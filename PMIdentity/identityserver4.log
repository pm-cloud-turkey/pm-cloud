2019-05-21 15:34:18.861 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-21 15:34:18.973 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-21 15:34:18.974 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-21 15:34:18.974 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-21 15:34:18.974 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-21 15:34:18.974 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-21 15:34:18.975 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-21 15:34:19.061 +03:00 [DBG] Starting grant removal
2019-05-21 15:34:43.272 +03:00 [DBG] Login Url: /Account/Login
2019-05-21 15:34:43.274 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-21 15:34:43.274 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-21 15:34:43.275 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-21 15:34:43.275 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-21 15:34:43.275 +03:00 [DBG] Error Url: /home/error
2019-05-21 15:34:43.276 +03:00 [DBG] Error Id Parameter: errorId
2019-05-21 15:34:43.321 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:34:43.327 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:34:43.328 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:34:43.332 +03:00 [DBG] Start authorize request
2019-05-21 15:34:43.344 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:34:43.352 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:34:45.359 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:34:45.369 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:34:45.444 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:34:45.658 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:34:45.680 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:34:45.694 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:34:45.703 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:34:45.713 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"3910750e65e84e7e9faa943088a0ffee","UiLocales":null,"Nonce":"357edc8b113249f5ab4dc745cd5a2426","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"be13fea4b2d95d03350082226bfab43c","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"3910750e65e84e7e9faa943088a0ffee","nonce":"357edc8b113249f5ab4dc745cd5a2426","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:34:45.842 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:34:45.852 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:34:45.863 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:34:45.864 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:34:46.038 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:34:46.039 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:34:46.054 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****lS8g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****WzaQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTT2PMCRMS:00000001","TimeStamp":"2019-05-21T12:34:46.0000000Z","ProcessId":4304,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:34:46.058 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"3910750e65e84e7e9faa943088a0ffee","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:34:46.451 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:34:46.475 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:34:46.476 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:34:46.483 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:34:46.487 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:34:46.488 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:34:46.490 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:34:46.494 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:34:46.494 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:34:46.499 +03:00 [DBG] Start userinfo request
2019-05-21 15:34:46.503 +03:00 [DBG] Bearer token found in header
2019-05-21 15:34:46.580 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:34:46.580 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:34:46.596 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:34:46.596 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:34:46.600 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:34:46.602 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558442085,"exp":1558442205,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558439407,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:34:46.616 +03:00 [DBG] Creating userinfo response
2019-05-21 15:34:46.620 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:34:46.623 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:34:46.630 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:34:46.631 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:34:46.633 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:34:46.639 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:34:46.651 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:34:46.653 +03:00 [DBG] End userinfo request
2019-05-21 15:35:49.901 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-05-21 15:35:49.904 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:35:49.904 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:35:49.905 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-21 15:35:49.907 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-21 15:35:49.908 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-21 15:35:49.911 +03:00 [DBG] Start discovery request
2019-05-21 15:35:50.028 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-21 15:35:50.047 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:35:50.048 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:35:50.049 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:35:50.049 +03:00 [DBG] Start authorize request
2019-05-21 15:35:50.050 +03:00 [DBG] No user present in authorize request
2019-05-21 15:35:50.050 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:35:50.068 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:35:50.068 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:35:50.081 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:35:50.097 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:35:50.104 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:35:50.112 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:35:50.112 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:35:50.112 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"705e1ca644ab43849bf27ed28a9ed234","UiLocales":null,"Nonce":"7cc4d0aae08d4af7ab2f59a162fc8185","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"705e1ca644ab43849bf27ed28a9ed234","nonce":"7cc4d0aae08d4af7ab2f59a162fc8185"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:35:50.115 +03:00 [INF] Showing login: User is not authenticated
2019-05-21 15:35:50.237 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:35:50.253 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:35:50.253 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:35:50.258 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:35:50.267 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:35:50.273 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:35:50.283 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:35:50.284 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:35:50.302 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:35:50.303 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:35:54.364 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-21 15:35:54.400 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:35:54.419 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:35:54.419 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:35:54.425 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:35:54.434 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:35:54.441 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:35:54.450 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:35:54.451 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:35:54.501 +03:00 [DBG] Augmenting SignInContext
2019-05-21 15:35:54.503 +03:00 [DBG] Adding idp claim with value: local
2019-05-21 15:35:54.503 +03:00 [DBG] Adding amr claim with value: pwd
2019-05-21 15:35:54.504 +03:00 [DBG] Adding auth_time claim with value: 1558442154
2019-05-21 15:35:54.512 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-21 15:35:54.520 +03:00 [INF] {"Username":"gurkanindibay@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","DisplayName":"gurkanindibay@gmail.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMTT2PMCRMU:00000003","TimeStamp":"2019-05-21T12:35:54.0000000Z","ProcessId":4304,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-21 15:35:54.537 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:35:54.538 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:35:54.543 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-21 15:35:54.544 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-21 15:35:54.545 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-21 15:35:54.550 +03:00 [DBG] Start authorize callback request
2019-05-21 15:35:54.554 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:35:54.554 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:35:54.568 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:35:54.568 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:35:54.572 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:35:54.579 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:35:54.591 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:35:54.601 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:35:54.602 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:35:54.602 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"705e1ca644ab43849bf27ed28a9ed234","UiLocales":null,"Nonce":"7cc4d0aae08d4af7ab2f59a162fc8185","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"705e1ca644ab43849bf27ed28a9ed234","nonce":"7cc4d0aae08d4af7ab2f59a162fc8185"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:35:54.608 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:35:54.608 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:35:54.609 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:35:54.609 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:35:54.614 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:35:54.615 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:35:54.618 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5B5g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****hUaQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTT2PMCRMU:00000004","TimeStamp":"2019-05-21T12:35:54.0000000Z","ProcessId":4304,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:35:54.627 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/#/auth-callback#","State":"705e1ca644ab43849bf27ed28a9ed234","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:35:54.632 +03:00 [DBG] Augmenting SignInContext
2019-05-21 15:35:54.633 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-21 15:35:59.763 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-05-21 15:35:59.768 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:35:59.769 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:35:59.769 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-21 15:35:59.770 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-21 15:35:59.770 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-21 15:35:59.771 +03:00 [DBG] Start discovery request
2019-05-21 15:35:59.792 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-21 15:35:59.805 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-05-21 15:35:59.809 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:35:59.809 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:35:59.810 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-21 15:35:59.812 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-21 15:35:59.812 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-21 15:35:59.817 +03:00 [DBG] Start key discovery request
2019-05-21 15:35:59.848 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:35:59.851 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:35:59.852 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:35:59.866 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:35:59.869 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:35:59.870 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:35:59.871 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:35:59.872 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:35:59.874 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:35:59.874 +03:00 [DBG] Start userinfo request
2019-05-21 15:35:59.875 +03:00 [DBG] Bearer token found in header
2019-05-21 15:35:59.899 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:35:59.900 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:35:59.915 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:35:59.915 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:35:59.918 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:35:59.919 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558442154,"exp":1558442274,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:35:59.921 +03:00 [DBG] Creating userinfo response
2019-05-21 15:35:59.922 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:35:59.922 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:35:59.929 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:35:59.930 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:35:59.930 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:35:59.936 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:35:59.941 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:35:59.942 +03:00 [DBG] End userinfo request
2019-05-21 15:35:59.953 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-21 15:35:59.954 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-21 15:35:59.955 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-21 15:35:59.956 +03:00 [DBG] Rendering check session result
2019-05-21 15:37:00.045 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:37:00.047 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:37:00.047 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:37:00.048 +03:00 [DBG] Start authorize request
2019-05-21 15:37:00.048 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:37:00.049 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:37:00.064 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:37:00.064 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:37:00.070 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:37:00.083 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:37:00.090 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:37:00.101 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:37:00.102 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:37:00.102 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"09458173875f4254b07cb8926d39d7e8","UiLocales":null,"Nonce":"ae8ea9024ae64549a59269670ef3ef9c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"09458173875f4254b07cb8926d39d7e8","nonce":"ae8ea9024ae64549a59269670ef3ef9c","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:37:00.107 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:37:00.107 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:37:00.108 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:37:00.108 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:37:00.114 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:37:00.114 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:37:00.117 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****b_dA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****IlDA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTT2PMCRMU:00000006","TimeStamp":"2019-05-21T12:37:00.0000000Z","ProcessId":4304,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:37:00.122 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"09458173875f4254b07cb8926d39d7e8","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:37:00.548 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:37:00.551 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:37:00.551 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:37:00.554 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:37:00.558 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:37:00.558 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:37:00.559 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:37:00.560 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:37:00.560 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:37:00.560 +03:00 [DBG] Start userinfo request
2019-05-21 15:37:00.561 +03:00 [DBG] Bearer token found in header
2019-05-21 15:37:00.580 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:37:00.581 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:37:00.595 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:37:00.595 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:37:00.598 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:37:00.599 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558442220,"exp":1558442340,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:37:00.602 +03:00 [DBG] Creating userinfo response
2019-05-21 15:37:00.603 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:37:00.612 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:37:00.618 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:37:00.619 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:37:00.619 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:37:00.627 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:37:00.631 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:37:00.631 +03:00 [DBG] End userinfo request
2019-05-21 15:38:01.210 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:38:01.210 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:38:01.211 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:38:01.212 +03:00 [DBG] Start authorize request
2019-05-21 15:38:01.213 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:38:01.213 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:38:01.233 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:38:01.233 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:38:01.238 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:38:01.246 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:38:01.257 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:38:01.265 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:38:01.266 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:38:01.266 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"87b1bb34e18e4756a9f55943021ca462","UiLocales":null,"Nonce":"e845d35d676f45baa33b92357d322475","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"87b1bb34e18e4756a9f55943021ca462","nonce":"e845d35d676f45baa33b92357d322475","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:38:01.272 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:38:01.272 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:38:01.273 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:38:01.274 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:38:01.291 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:38:01.293 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:38:01.296 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bzjQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zKzQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTT2PMCRMU:00000007","TimeStamp":"2019-05-21T12:38:01.0000000Z","ProcessId":4304,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:38:01.299 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"87b1bb34e18e4756a9f55943021ca462","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:38:01.730 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:38:01.733 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:38:01.734 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:38:01.738 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:38:01.742 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:38:01.743 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:38:01.743 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:38:01.744 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:38:01.744 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:38:01.744 +03:00 [DBG] Start userinfo request
2019-05-21 15:38:01.745 +03:00 [DBG] Bearer token found in header
2019-05-21 15:38:01.759 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:38:01.760 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:38:01.769 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:38:01.769 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:38:01.771 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:38:01.771 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558442281,"exp":1558442401,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:38:01.773 +03:00 [DBG] Creating userinfo response
2019-05-21 15:38:01.773 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:38:01.773 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:38:01.778 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:38:01.778 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:38:01.779 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:38:01.782 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:38:01.786 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:38:01.786 +03:00 [DBG] End userinfo request
2019-05-21 15:39:02.139 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:39:02.140 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:39:02.141 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:39:02.141 +03:00 [DBG] Start authorize request
2019-05-21 15:39:02.142 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:39:02.142 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:39:02.157 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:39:02.157 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:39:02.162 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:39:02.168 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:39:02.172 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:39:02.182 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:39:02.182 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:39:02.183 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"5011ae4eb42c42a7aca51fe693e4d8c6","UiLocales":null,"Nonce":"78837a7283f1497db58f5fa97b36205c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"5011ae4eb42c42a7aca51fe693e4d8c6","nonce":"78837a7283f1497db58f5fa97b36205c","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:39:02.190 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:39:02.191 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:39:02.192 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:39:02.205 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:39:02.213 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:39:02.214 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:39:02.217 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****PcOA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zCBA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTT2PMCRMU:00000008","TimeStamp":"2019-05-21T12:39:02.0000000Z","ProcessId":4304,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:39:02.220 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"5011ae4eb42c42a7aca51fe693e4d8c6","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:39:02.628 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:39:02.631 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:39:02.632 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:39:02.636 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:39:02.639 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:39:02.640 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:39:02.641 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:39:02.641 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:39:02.642 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:39:02.642 +03:00 [DBG] Start userinfo request
2019-05-21 15:39:02.643 +03:00 [DBG] Bearer token found in header
2019-05-21 15:39:02.658 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:39:02.659 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:39:02.669 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:39:02.670 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:39:02.672 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:39:02.672 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558442342,"exp":1558442462,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:39:02.674 +03:00 [DBG] Creating userinfo response
2019-05-21 15:39:02.674 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:39:02.674 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:39:02.678 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:39:02.679 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:39:02.679 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:39:02.683 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:39:02.687 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:39:02.688 +03:00 [DBG] End userinfo request
2019-05-21 15:40:03.147 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:40:03.148 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:40:03.150 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:40:03.151 +03:00 [DBG] Start authorize request
2019-05-21 15:40:03.168 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:40:03.168 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:40:03.183 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:40:03.183 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:40:03.188 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:40:03.197 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:40:03.201 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:40:03.208 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:40:03.208 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:40:03.209 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"2b4912b4b6834fb4ae446773ed7336e0","UiLocales":null,"Nonce":"1e25b3f271a748f3a1afedf9840aac18","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"2b4912b4b6834fb4ae446773ed7336e0","nonce":"1e25b3f271a748f3a1afedf9840aac18","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:40:03.213 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:40:03.213 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:40:03.214 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:40:03.214 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:40:03.219 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:40:03.219 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:40:03.222 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****KeXQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4GpQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTT2PMCRMU:00000009","TimeStamp":"2019-05-21T12:40:03.0000000Z","ProcessId":4304,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:40:03.234 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"2b4912b4b6834fb4ae446773ed7336e0","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:40:03.627 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:40:03.630 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:40:03.631 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:40:03.635 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:40:03.639 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:40:03.640 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:40:03.640 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:40:03.640 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:40:03.641 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:40:03.641 +03:00 [DBG] Start userinfo request
2019-05-21 15:40:03.642 +03:00 [DBG] Bearer token found in header
2019-05-21 15:40:03.653 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:40:03.654 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:40:03.662 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:40:03.662 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:40:03.664 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:40:03.665 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558442403,"exp":1558442523,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:40:03.677 +03:00 [DBG] Creating userinfo response
2019-05-21 15:40:03.677 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:40:03.678 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:40:03.686 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:40:03.686 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:40:03.687 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:40:03.691 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:40:03.695 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:40:03.696 +03:00 [DBG] End userinfo request
2019-05-21 15:40:28.811 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-21 15:40:28.917 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-21 15:40:28.917 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-21 15:40:28.918 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-21 15:40:28.918 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-21 15:40:28.918 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-21 15:40:28.919 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-21 15:40:29.000 +03:00 [DBG] Starting grant removal
2019-05-21 15:41:04.247 +03:00 [DBG] Login Url: /Account/Login
2019-05-21 15:41:04.250 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-21 15:41:04.251 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-21 15:41:04.252 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-21 15:41:04.252 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-21 15:41:04.252 +03:00 [DBG] Error Url: /home/error
2019-05-21 15:41:04.252 +03:00 [DBG] Error Id Parameter: errorId
2019-05-21 15:41:04.284 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:41:04.291 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:41:04.292 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:41:04.295 +03:00 [DBG] Start authorize request
2019-05-21 15:41:04.304 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:41:04.310 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:41:10.543 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-21 15:41:10.653 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-21 15:41:10.654 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-21 15:41:10.654 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-21 15:41:10.655 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-21 15:41:10.655 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-21 15:41:10.656 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-21 15:41:10.737 +03:00 [DBG] Starting grant removal
2019-05-21 15:43:07.152 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-21 15:43:07.269 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-21 15:43:07.270 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-21 15:43:07.270 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-21 15:43:07.270 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-21 15:43:07.271 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-21 15:43:07.271 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-21 15:43:07.362 +03:00 [DBG] Starting grant removal
2019-05-21 15:46:36.879 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-21 15:46:37.020 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-21 15:46:37.021 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-21 15:46:37.021 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-21 15:46:37.021 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-21 15:46:37.022 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-21 15:46:37.022 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-21 15:46:37.138 +03:00 [DBG] Starting grant removal
2019-05-21 15:46:58.028 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-21 15:46:58.224 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-21 15:46:58.224 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-21 15:46:58.225 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-21 15:46:58.225 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-21 15:46:58.226 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-21 15:46:58.226 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-21 15:46:58.324 +03:00 [DBG] Starting grant removal
2019-05-21 15:47:31.000 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-21 15:47:31.012 +03:00 [DBG] Stopping grant removal
2019-05-21 15:47:35.671 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-21 15:47:35.830 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-21 15:47:35.830 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-21 15:47:35.831 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-21 15:47:35.831 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-21 15:47:35.831 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-21 15:47:35.832 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-21 15:47:35.921 +03:00 [DBG] Starting grant removal
2019-05-21 15:48:01.080 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-05-21 15:48:02.754 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:48:02.758 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:48:02.782 +03:00 [DBG] Login Url: /Account/Login
2019-05-21 15:48:02.783 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-21 15:48:02.783 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-21 15:48:02.783 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-21 15:48:02.783 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-21 15:48:02.784 +03:00 [DBG] Error Url: /home/error
2019-05-21 15:48:02.784 +03:00 [DBG] Error Id Parameter: errorId
2019-05-21 15:48:02.799 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-21 15:48:02.812 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-21 15:48:02.813 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-21 15:48:02.816 +03:00 [DBG] Start discovery request
2019-05-21 15:48:03.487 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-21 15:48:03.604 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:48:03.608 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:48:03.609 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:48:03.612 +03:00 [DBG] Start authorize request
2019-05-21 15:48:03.623 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:48:03.628 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:48:03.902 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:48:03.908 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:48:03.965 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:48:04.061 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:48:04.078 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:48:04.088 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:48:04.095 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:48:04.105 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"29ca06c1e5cd4b2197d8cf25c3cf3ad5","UiLocales":null,"Nonce":"e266fd9a90d044958a48ef21ee330a5b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"29ca06c1e5cd4b2197d8cf25c3cf3ad5","nonce":"e266fd9a90d044958a48ef21ee330a5b"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:48:04.264 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:48:04.270 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:48:04.280 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:48:04.281 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:48:04.425 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:48:04.426 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:48:04.441 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****yV_A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****0gcQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000001","TimeStamp":"2019-05-21T12:48:04.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:48:04.446 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/#/auth-callback#","State":"29ca06c1e5cd4b2197d8cf25c3cf3ad5","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:48:11.961 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-05-21 15:48:11.967 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:48:11.968 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:48:11.969 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-21 15:48:11.969 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-21 15:48:11.971 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-21 15:48:11.971 +03:00 [DBG] Start discovery request
2019-05-21 15:48:11.991 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-21 15:48:12.031 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-05-21 15:48:12.033 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:48:12.034 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:48:12.034 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-21 15:48:12.035 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-21 15:48:12.036 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-21 15:48:12.040 +03:00 [DBG] Start key discovery request
2019-05-21 15:48:12.090 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:48:12.093 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:48:12.094 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:48:12.098 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:48:12.100 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:48:12.101 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:48:12.101 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:48:12.103 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:48:12.103 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:48:12.112 +03:00 [DBG] Start userinfo request
2019-05-21 15:48:12.115 +03:00 [DBG] Bearer token found in header
2019-05-21 15:48:12.170 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:48:12.170 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:48:12.185 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:48:12.185 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:48:12.190 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:48:12.191 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558442884,"exp":1558443004,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:48:12.199 +03:00 [DBG] Creating userinfo response
2019-05-21 15:48:12.202 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:48:12.204 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:48:12.214 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:48:12.215 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:48:12.215 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:48:12.222 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:48:12.229 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:48:12.230 +03:00 [DBG] End userinfo request
2019-05-21 15:48:12.247 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-21 15:48:12.248 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-21 15:48:12.249 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-21 15:48:12.255 +03:00 [DBG] Rendering check session result
2019-05-21 15:49:12.323 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:49:12.324 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:49:12.325 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:49:12.325 +03:00 [DBG] Start authorize request
2019-05-21 15:49:12.326 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:49:12.326 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:49:12.343 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:49:12.343 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:49:12.350 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:49:12.362 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:49:12.367 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:49:12.375 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:49:12.375 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:49:12.376 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"9292f758c1d94421991077af167112e6","UiLocales":null,"Nonce":"9a23dd8509664bdba7b15e97a59f6ace","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"9292f758c1d94421991077af167112e6","nonce":"9a23dd8509664bdba7b15e97a59f6ace","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:49:12.380 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:49:12.381 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:49:12.382 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:49:12.382 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:49:12.388 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:49:12.388 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:49:12.391 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****KYUw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****rIuA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000003","TimeStamp":"2019-05-21T12:49:12.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:49:12.394 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"9292f758c1d94421991077af167112e6","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:49:12.797 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:49:12.800 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:49:12.801 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:49:12.805 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:49:12.809 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:49:12.810 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:49:12.811 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:49:12.811 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:49:12.812 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:49:12.812 +03:00 [DBG] Start userinfo request
2019-05-21 15:49:12.812 +03:00 [DBG] Bearer token found in header
2019-05-21 15:49:12.828 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:49:12.829 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:49:12.839 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:49:12.840 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:49:12.842 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:49:12.843 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558442952,"exp":1558443072,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:49:12.844 +03:00 [DBG] Creating userinfo response
2019-05-21 15:49:12.845 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:49:12.845 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:49:12.851 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:49:12.852 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:49:12.853 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:49:12.857 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:49:12.861 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:49:12.862 +03:00 [DBG] End userinfo request
2019-05-21 15:50:12.879 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:50:12.880 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:50:12.880 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:50:12.881 +03:00 [DBG] Start authorize request
2019-05-21 15:50:12.882 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:50:12.882 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:50:12.898 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:50:12.898 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:50:12.904 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:50:12.913 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:50:12.918 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:50:12.925 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:50:12.925 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:50:12.926 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"3a5b5bf7441f4a9b96ac04ceafc351b2","UiLocales":null,"Nonce":"dec4eb5ecd634d35ad9bf8ad85ec074f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"3a5b5bf7441f4a9b96ac04ceafc351b2","nonce":"dec4eb5ecd634d35ad9bf8ad85ec074f","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:50:12.931 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:50:12.932 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:50:12.932 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:50:12.932 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:50:12.938 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:50:12.939 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:50:12.942 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****48vw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_dCA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000004","TimeStamp":"2019-05-21T12:50:12.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:50:12.946 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"3a5b5bf7441f4a9b96ac04ceafc351b2","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:50:13.322 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:50:13.348 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:50:13.349 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:50:13.353 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:50:13.363 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:50:13.364 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:50:13.365 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:50:13.366 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:50:13.366 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:50:13.366 +03:00 [DBG] Start userinfo request
2019-05-21 15:50:13.367 +03:00 [DBG] Bearer token found in header
2019-05-21 15:50:13.382 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:50:13.382 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:50:13.391 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:50:13.392 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:50:13.394 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:50:13.394 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443012,"exp":1558443132,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:50:13.396 +03:00 [DBG] Creating userinfo response
2019-05-21 15:50:13.396 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:50:13.396 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:50:13.401 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:50:13.401 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:50:13.402 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:50:13.406 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:50:13.409 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:50:13.409 +03:00 [DBG] End userinfo request
2019-05-21 15:51:14.143 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:51:14.145 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:51:14.145 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:51:14.146 +03:00 [DBG] Start authorize request
2019-05-21 15:51:14.146 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:51:14.147 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:51:14.162 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:51:14.163 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:51:14.173 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:51:14.182 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:51:14.186 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:51:14.195 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:51:14.196 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:51:14.196 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"46e7a19af15a4c008557fabf27ed086e","UiLocales":null,"Nonce":"717ae4bbb487424192e311d48f036f56","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"46e7a19af15a4c008557fabf27ed086e","nonce":"717ae4bbb487424192e311d48f036f56","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:51:14.203 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:51:14.203 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:51:14.203 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:51:14.203 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:51:14.209 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:51:14.209 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:51:14.212 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****VZ1A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****TxuQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000005","TimeStamp":"2019-05-21T12:51:14.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:51:14.215 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"46e7a19af15a4c008557fabf27ed086e","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:51:14.578 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:51:14.581 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:51:14.582 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:51:14.586 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:51:14.590 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:51:14.590 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:51:14.591 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:51:14.591 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:51:14.592 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:51:14.592 +03:00 [DBG] Start userinfo request
2019-05-21 15:51:14.592 +03:00 [DBG] Bearer token found in header
2019-05-21 15:51:14.613 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:51:14.614 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:51:14.626 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:51:14.627 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:51:14.630 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:51:14.631 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443074,"exp":1558443194,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:51:14.634 +03:00 [DBG] Creating userinfo response
2019-05-21 15:51:14.634 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:51:14.634 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:51:14.640 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:51:14.640 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:51:14.641 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:51:14.645 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:51:14.648 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:51:14.649 +03:00 [DBG] End userinfo request
2019-05-21 15:52:15.141 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:52:15.142 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:52:15.143 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:52:15.143 +03:00 [DBG] Start authorize request
2019-05-21 15:52:15.144 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:52:15.144 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:52:15.159 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:52:15.159 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:52:15.163 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:52:15.169 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:52:15.173 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:52:15.180 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:52:15.181 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:52:15.181 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"ffde959313b949e2b91a3341ba8bb6a2","UiLocales":null,"Nonce":"c0826c795a76465abaf1b049849148f9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"ffde959313b949e2b91a3341ba8bb6a2","nonce":"c0826c795a76465abaf1b049849148f9","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:52:15.185 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:52:15.186 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:52:15.186 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:52:15.186 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:52:15.191 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:52:15.191 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:52:15.194 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****jSxA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_hWA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000006","TimeStamp":"2019-05-21T12:52:15.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:52:15.196 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"ffde959313b949e2b91a3341ba8bb6a2","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:52:15.594 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:52:15.598 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:52:15.598 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:52:15.601 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:52:15.604 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:52:15.605 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:52:15.605 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:52:15.606 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:52:15.607 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:52:15.607 +03:00 [DBG] Start userinfo request
2019-05-21 15:52:15.607 +03:00 [DBG] Bearer token found in header
2019-05-21 15:52:15.622 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:52:15.623 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:52:15.634 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:52:15.635 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:52:15.637 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:52:15.638 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443135,"exp":1558443255,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:52:15.639 +03:00 [DBG] Creating userinfo response
2019-05-21 15:52:15.640 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:52:15.640 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:52:15.644 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:52:15.644 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:52:15.645 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:52:15.648 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:52:15.651 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:52:15.658 +03:00 [DBG] End userinfo request
2019-05-21 15:53:16.144 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:53:16.145 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:53:16.146 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:53:16.146 +03:00 [DBG] Start authorize request
2019-05-21 15:53:16.146 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:53:16.147 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:53:16.162 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:53:16.162 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:53:16.166 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:53:16.173 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:53:16.178 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:53:16.185 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:53:16.185 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:53:16.186 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"b7f9d305e853436c97c4a9723f90ce45","UiLocales":null,"Nonce":"cbe0eefd69da4405947f54d9d1838499","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"b7f9d305e853436c97c4a9723f90ce45","nonce":"cbe0eefd69da4405947f54d9d1838499","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:53:16.190 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:53:16.191 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:53:16.191 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:53:16.192 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:53:16.197 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:53:16.197 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:53:16.200 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****R6Uw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****08JA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000007","TimeStamp":"2019-05-21T12:53:16.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:53:16.202 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"b7f9d305e853436c97c4a9723f90ce45","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:53:16.583 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:53:16.586 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:53:16.587 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:53:16.590 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:53:16.593 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:53:16.599 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:53:16.599 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:53:16.600 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:53:16.600 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:53:16.601 +03:00 [DBG] Start userinfo request
2019-05-21 15:53:16.601 +03:00 [DBG] Bearer token found in header
2019-05-21 15:53:16.616 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:53:16.616 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:53:16.625 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:53:16.626 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:53:16.628 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:53:16.628 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443196,"exp":1558443316,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:53:16.630 +03:00 [DBG] Creating userinfo response
2019-05-21 15:53:16.630 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:53:16.630 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:53:16.634 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:53:16.635 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:53:16.635 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:53:16.641 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:53:16.644 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:53:16.645 +03:00 [DBG] End userinfo request
2019-05-21 15:54:17.158 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:54:17.160 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:54:17.162 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:54:17.163 +03:00 [DBG] Start authorize request
2019-05-21 15:54:17.179 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:54:17.180 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:54:17.198 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:54:17.199 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:54:17.205 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:54:17.214 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:54:17.218 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:54:17.236 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:54:17.236 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:54:17.236 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"e0d7eaaf092f4aefb2cc87038e021859","UiLocales":null,"Nonce":"8f9b0b8f8b104376863c67f84136beee","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"e0d7eaaf092f4aefb2cc87038e021859","nonce":"8f9b0b8f8b104376863c67f84136beee","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:54:17.242 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:54:17.242 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:54:17.242 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:54:17.243 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:54:17.249 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:54:17.249 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:54:17.252 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****zgIA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****nXzg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000008","TimeStamp":"2019-05-21T12:54:17.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:54:17.254 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"e0d7eaaf092f4aefb2cc87038e021859","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:54:17.616 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:54:17.619 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:54:17.620 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:54:17.639 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:54:17.643 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:54:17.644 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:54:17.644 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:54:17.645 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:54:17.646 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:54:17.646 +03:00 [DBG] Start userinfo request
2019-05-21 15:54:17.647 +03:00 [DBG] Bearer token found in header
2019-05-21 15:54:17.665 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:54:17.665 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:54:17.682 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:54:17.682 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:54:17.686 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:54:17.687 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443257,"exp":1558443377,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:54:17.689 +03:00 [DBG] Creating userinfo response
2019-05-21 15:54:17.689 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:54:17.690 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:54:17.696 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:54:17.697 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:54:17.697 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:54:17.702 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:54:17.706 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:54:17.706 +03:00 [DBG] End userinfo request
2019-05-21 15:55:18.185 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:55:18.186 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:55:18.187 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:55:18.187 +03:00 [DBG] Start authorize request
2019-05-21 15:55:18.188 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:55:18.188 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:55:18.201 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:55:18.202 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:55:18.206 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:55:18.212 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:55:18.217 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:55:18.229 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:55:18.229 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:55:18.230 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"be4f582d2b5a46b6beac08e9360c1805","UiLocales":null,"Nonce":"8b687281e59b4fd6af54f56473d55aa7","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"be4f582d2b5a46b6beac08e9360c1805","nonce":"8b687281e59b4fd6af54f56473d55aa7","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:55:18.240 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:55:18.241 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:55:18.242 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:55:18.242 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:55:18.251 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:55:18.251 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:55:18.254 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****gT7w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8rkQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000009","TimeStamp":"2019-05-21T12:55:18.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:55:18.258 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"be4f582d2b5a46b6beac08e9360c1805","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:55:18.675 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:55:18.680 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:55:18.680 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:55:18.685 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:55:18.688 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:55:18.689 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:55:18.689 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:55:18.690 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:55:18.690 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:55:18.691 +03:00 [DBG] Start userinfo request
2019-05-21 15:55:18.691 +03:00 [DBG] Bearer token found in header
2019-05-21 15:55:18.704 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:55:18.704 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:55:18.714 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:55:18.714 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:55:18.717 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:55:18.717 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443318,"exp":1558443438,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:55:18.719 +03:00 [DBG] Creating userinfo response
2019-05-21 15:55:18.719 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:55:18.719 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:55:18.723 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:55:18.723 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:55:18.724 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:55:18.728 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:55:18.731 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:55:18.731 +03:00 [DBG] End userinfo request
2019-05-21 15:56:19.164 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:56:19.165 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:56:19.167 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:56:19.181 +03:00 [DBG] Start authorize request
2019-05-21 15:56:19.182 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:56:19.182 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:56:19.198 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:56:19.199 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:56:19.202 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:56:19.210 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:56:19.213 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:56:19.220 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:56:19.220 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:56:19.221 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"2d5df2275e0a4a3f80aae56fed087330","UiLocales":null,"Nonce":"6008df4893384d8d9181a2234fad5c3b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"2d5df2275e0a4a3f80aae56fed087330","nonce":"6008df4893384d8d9181a2234fad5c3b","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:56:19.225 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:56:19.225 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:56:19.225 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:56:19.226 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:56:19.231 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:56:19.231 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:56:19.234 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****8niQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****yISg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000000A","TimeStamp":"2019-05-21T12:56:19.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:56:19.237 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"2d5df2275e0a4a3f80aae56fed087330","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:56:19.620 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:56:19.623 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:56:19.624 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:56:19.651 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:56:19.653 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:56:19.653 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:56:19.654 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:56:19.654 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:56:19.655 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:56:19.655 +03:00 [DBG] Start userinfo request
2019-05-21 15:56:19.655 +03:00 [DBG] Bearer token found in header
2019-05-21 15:56:19.671 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:56:19.672 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:56:19.680 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:56:19.681 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:56:19.684 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:56:19.687 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443379,"exp":1558443499,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:56:19.689 +03:00 [DBG] Creating userinfo response
2019-05-21 15:56:19.689 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:56:19.690 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:56:19.698 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:56:19.698 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:56:19.699 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:56:19.703 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:56:19.706 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:56:19.707 +03:00 [DBG] End userinfo request
2019-05-21 15:57:20.144 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:57:20.145 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:57:20.146 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:57:20.146 +03:00 [DBG] Start authorize request
2019-05-21 15:57:20.146 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:57:20.147 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:57:20.160 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:57:20.161 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:57:20.165 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:57:20.172 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:57:20.176 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:57:20.183 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:57:20.183 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:57:20.184 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"464dff85781340fa88168bf91ad7e2c7","UiLocales":null,"Nonce":"3664c8da373c4f38bce5b91f48a74e12","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"464dff85781340fa88168bf91ad7e2c7","nonce":"3664c8da373c4f38bce5b91f48a74e12","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:57:20.188 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:57:20.188 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:57:20.188 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:57:20.189 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:57:20.194 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:57:20.194 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:57:20.197 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bvmA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****tdyA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000000B","TimeStamp":"2019-05-21T12:57:20.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:57:20.210 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"464dff85781340fa88168bf91ad7e2c7","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:57:20.579 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:57:20.582 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:57:20.583 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:57:20.587 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:57:20.590 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:57:20.591 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:57:20.591 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:57:20.592 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:57:20.592 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:57:20.593 +03:00 [DBG] Start userinfo request
2019-05-21 15:57:20.593 +03:00 [DBG] Bearer token found in header
2019-05-21 15:57:20.607 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:57:20.607 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:57:20.617 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:57:20.617 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:57:20.619 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:57:20.620 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443440,"exp":1558443560,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:57:20.621 +03:00 [DBG] Creating userinfo response
2019-05-21 15:57:20.622 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:57:20.622 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:57:20.626 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:57:20.626 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:57:20.627 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:57:20.631 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:57:20.634 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:57:20.634 +03:00 [DBG] End userinfo request
2019-05-21 15:58:21.153 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:58:21.154 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:58:21.155 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:58:21.156 +03:00 [DBG] Start authorize request
2019-05-21 15:58:21.157 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:58:21.157 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:58:21.179 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:58:21.179 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:58:21.184 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:58:21.191 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:58:21.195 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:58:21.204 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:58:21.206 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:58:21.206 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"c90f659afa5447c6a0cd67eb3fc1ed4b","UiLocales":null,"Nonce":"6fe631d86f714353b11ffe4f3d5c3b29","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"c90f659afa5447c6a0cd67eb3fc1ed4b","nonce":"6fe631d86f714353b11ffe4f3d5c3b29","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:58:21.213 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:58:21.215 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:58:21.215 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:58:21.215 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:58:21.223 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:58:21.223 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:58:21.226 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****BiIw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Drrg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000000C","TimeStamp":"2019-05-21T12:58:21.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:58:21.228 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"c90f659afa5447c6a0cd67eb3fc1ed4b","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:58:21.598 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:58:21.601 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:58:21.602 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:58:21.625 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:58:21.631 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:58:21.632 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:58:21.632 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:58:21.633 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:58:21.633 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:58:21.633 +03:00 [DBG] Start userinfo request
2019-05-21 15:58:21.633 +03:00 [DBG] Bearer token found in header
2019-05-21 15:58:21.653 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:58:21.654 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:58:21.675 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:58:21.676 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:58:21.678 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:58:21.679 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443501,"exp":1558443621,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:58:21.681 +03:00 [DBG] Creating userinfo response
2019-05-21 15:58:21.681 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:58:21.681 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:58:21.686 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:58:21.687 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:58:21.687 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:58:21.692 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:58:21.696 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:58:21.702 +03:00 [DBG] End userinfo request
2019-05-21 15:59:22.164 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 15:59:22.166 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 15:59:22.174 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 15:59:22.176 +03:00 [DBG] Start authorize request
2019-05-21 15:59:22.177 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:59:22.177 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 15:59:22.198 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:59:22.199 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:59:22.206 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:59:22.218 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:59:22.223 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:59:22.230 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 15:59:22.230 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 15:59:22.231 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"840c28183237431bba55f4974ec32eae","UiLocales":null,"Nonce":"92260404f6f7492987dfb0a379cd0b69","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"840c28183237431bba55f4974ec32eae","nonce":"92260404f6f7492987dfb0a379cd0b69","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 15:59:22.235 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 15:59:22.235 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 15:59:22.235 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 15:59:22.235 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 15:59:22.241 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 15:59:22.241 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 15:59:22.244 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****FoVw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****80Hg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000000D","TimeStamp":"2019-05-21T12:59:22.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 15:59:22.248 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"840c28183237431bba55f4974ec32eae","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 15:59:22.606 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:59:22.609 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:59:22.610 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:59:22.613 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 15:59:22.616 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 15:59:22.617 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 15:59:22.617 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 15:59:22.618 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 15:59:22.618 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 15:59:22.618 +03:00 [DBG] Start userinfo request
2019-05-21 15:59:22.619 +03:00 [DBG] Bearer token found in header
2019-05-21 15:59:22.635 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:59:22.635 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:59:22.646 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 15:59:22.647 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 15:59:22.649 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 15:59:22.650 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443562,"exp":1558443682,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 15:59:22.662 +03:00 [DBG] Creating userinfo response
2019-05-21 15:59:22.662 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:59:22.663 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:59:22.670 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:59:22.671 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 15:59:22.671 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 15:59:22.675 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 15:59:22.678 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 15:59:22.678 +03:00 [DBG] End userinfo request
2019-05-21 16:00:23.155 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:00:23.156 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:00:23.157 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:00:23.158 +03:00 [DBG] Start authorize request
2019-05-21 16:00:23.159 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:00:23.160 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:00:23.184 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:00:23.184 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:00:23.189 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:00:23.198 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:00:23.202 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:00:23.210 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:00:23.210 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:00:23.211 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d1e39e8f4d5b425d9d83a0f231b37c15","UiLocales":null,"Nonce":"5c2005e0543c469f9d128dbe6a89a49c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d1e39e8f4d5b425d9d83a0f231b37c15","nonce":"5c2005e0543c469f9d128dbe6a89a49c","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:00:23.215 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:00:23.215 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:00:23.216 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:00:23.225 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:00:23.231 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:00:23.231 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:00:23.234 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****iGIw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ft2Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000000E","TimeStamp":"2019-05-21T13:00:23.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:00:23.236 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"d1e39e8f4d5b425d9d83a0f231b37c15","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:00:23.586 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:00:23.594 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:00:23.594 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:00:23.598 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:00:23.601 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:00:23.602 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:00:23.602 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:00:23.603 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:00:23.603 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:00:23.603 +03:00 [DBG] Start userinfo request
2019-05-21 16:00:23.603 +03:00 [DBG] Bearer token found in header
2019-05-21 16:00:23.616 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:00:23.617 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:00:23.628 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:00:23.628 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:00:23.631 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:00:23.631 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443623,"exp":1558443743,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:00:23.633 +03:00 [DBG] Creating userinfo response
2019-05-21 16:00:23.633 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:00:23.633 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:00:23.637 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:00:23.637 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:00:23.638 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:00:23.642 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:00:23.645 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:00:23.645 +03:00 [DBG] End userinfo request
2019-05-21 16:01:24.154 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:01:24.157 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:01:24.158 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:01:24.160 +03:00 [DBG] Start authorize request
2019-05-21 16:01:24.161 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:01:24.162 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:01:24.204 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:01:24.204 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:01:24.213 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:01:24.235 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:01:24.240 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:01:24.246 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:01:24.246 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:01:24.246 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"6486860be5ac4664a7fdeff4164595d8","UiLocales":null,"Nonce":"20b4702dc09045719bbd614df2505c82","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"6486860be5ac4664a7fdeff4164595d8","nonce":"20b4702dc09045719bbd614df2505c82","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:01:24.251 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:01:24.251 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:01:24.251 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:01:24.251 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:01:24.258 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:01:24.258 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:01:24.261 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****igMw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****3H5Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000000F","TimeStamp":"2019-05-21T13:01:24.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:01:24.265 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"6486860be5ac4664a7fdeff4164595d8","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:01:24.698 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:01:24.703 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:01:24.707 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:01:24.710 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:01:24.713 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:01:24.714 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:01:24.714 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:01:24.715 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:01:24.715 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:01:24.716 +03:00 [DBG] Start userinfo request
2019-05-21 16:01:24.716 +03:00 [DBG] Bearer token found in header
2019-05-21 16:01:24.729 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:01:24.729 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:01:24.738 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:01:24.738 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:01:24.740 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:01:24.741 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443684,"exp":1558443804,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:01:24.742 +03:00 [DBG] Creating userinfo response
2019-05-21 16:01:24.742 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:01:24.743 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:01:24.748 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:01:24.756 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:01:24.756 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:01:24.763 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:01:24.768 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:01:24.769 +03:00 [DBG] End userinfo request
2019-05-21 16:02:25.152 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:02:25.153 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:02:25.154 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:02:25.155 +03:00 [DBG] Start authorize request
2019-05-21 16:02:25.155 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:02:25.156 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:02:25.183 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:02:25.184 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:02:25.192 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:02:25.206 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:02:25.210 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:02:25.216 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:02:25.216 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:02:25.216 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"594a34b670034e4a852edfa19ae8130e","UiLocales":null,"Nonce":"f305e4e17ed04e488b9fc3ea6d6fad51","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"594a34b670034e4a852edfa19ae8130e","nonce":"f305e4e17ed04e488b9fc3ea6d6fad51","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:02:25.221 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:02:25.221 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:02:25.221 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:02:25.221 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:02:25.226 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:02:25.227 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:02:25.230 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9cpA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****JEgg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000010","TimeStamp":"2019-05-21T13:02:25.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:02:25.233 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"594a34b670034e4a852edfa19ae8130e","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:02:25.666 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:02:25.669 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:02:25.670 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:02:25.674 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:02:25.676 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:02:25.677 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:02:25.677 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:02:25.678 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:02:25.678 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:02:25.679 +03:00 [DBG] Start userinfo request
2019-05-21 16:02:25.680 +03:00 [DBG] Bearer token found in header
2019-05-21 16:02:25.696 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:02:25.696 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:02:25.705 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:02:25.705 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:02:25.707 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:02:25.708 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443745,"exp":1558443865,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:02:25.709 +03:00 [DBG] Creating userinfo response
2019-05-21 16:02:25.709 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:02:25.710 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:02:25.713 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:02:25.714 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:02:25.714 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:02:25.718 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:02:25.721 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:02:25.722 +03:00 [DBG] End userinfo request
2019-05-21 16:03:26.144 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:03:26.145 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:03:26.146 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:03:26.146 +03:00 [DBG] Start authorize request
2019-05-21 16:03:26.146 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:03:26.147 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:03:26.160 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:03:26.160 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:03:26.165 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:03:26.171 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:03:26.175 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:03:26.182 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:03:26.182 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:03:26.182 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"ba2cbef386f94d3e8824c3c43bc9d5f8","UiLocales":null,"Nonce":"fbdf851c27634f5f916e0a56ed20c068","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"ba2cbef386f94d3e8824c3c43bc9d5f8","nonce":"fbdf851c27634f5f916e0a56ed20c068","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:03:26.187 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:03:26.187 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:03:26.187 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:03:26.188 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:03:26.193 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:03:26.193 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:03:26.196 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****gH1w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****msWA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000011","TimeStamp":"2019-05-21T13:03:26.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:03:26.198 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"ba2cbef386f94d3e8824c3c43bc9d5f8","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:03:26.570 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:03:26.574 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:03:26.574 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:03:26.578 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:03:26.581 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:03:26.581 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:03:26.582 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:03:26.582 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:03:26.583 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:03:26.583 +03:00 [DBG] Start userinfo request
2019-05-21 16:03:26.583 +03:00 [DBG] Bearer token found in header
2019-05-21 16:03:26.597 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:03:26.598 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:03:26.608 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:03:26.608 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:03:26.610 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:03:26.611 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443806,"exp":1558443926,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:03:26.612 +03:00 [DBG] Creating userinfo response
2019-05-21 16:03:26.613 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:03:26.613 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:03:26.617 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:03:26.617 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:03:26.617 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:03:26.621 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:03:26.624 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:03:26.624 +03:00 [DBG] End userinfo request
2019-05-21 16:04:27.146 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:04:27.147 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:04:27.148 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:04:27.149 +03:00 [DBG] Start authorize request
2019-05-21 16:04:27.150 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:04:27.151 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:04:27.177 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:04:27.177 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:04:27.187 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:04:27.200 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:04:27.205 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:04:27.214 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:04:27.214 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:04:27.215 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"dbd6a3abb3e745b1a289491fb7596ea0","UiLocales":null,"Nonce":"9b20e14031ca4079b9009c3dfd421d6a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"dbd6a3abb3e745b1a289491fb7596ea0","nonce":"9b20e14031ca4079b9009c3dfd421d6a","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:04:27.220 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:04:27.220 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:04:27.221 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:04:27.221 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:04:27.227 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:04:27.228 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:04:27.230 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****nfIA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****y-tw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000012","TimeStamp":"2019-05-21T13:04:27.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:04:27.233 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"dbd6a3abb3e745b1a289491fb7596ea0","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:04:27.614 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:04:27.616 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:04:27.617 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:04:27.636 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:04:27.640 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:04:27.641 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:04:27.641 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:04:27.642 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:04:27.642 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:04:27.642 +03:00 [DBG] Start userinfo request
2019-05-21 16:04:27.643 +03:00 [DBG] Bearer token found in header
2019-05-21 16:04:27.659 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:04:27.660 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:04:27.672 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:04:27.673 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:04:27.678 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:04:27.678 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443867,"exp":1558443987,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:04:27.680 +03:00 [DBG] Creating userinfo response
2019-05-21 16:04:27.680 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:04:27.681 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:04:27.686 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:04:27.691 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:04:27.691 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:04:27.697 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:04:27.701 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:04:27.701 +03:00 [DBG] End userinfo request
2019-05-21 16:05:28.149 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:05:28.150 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:05:28.151 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:05:28.152 +03:00 [DBG] Start authorize request
2019-05-21 16:05:28.165 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:05:28.165 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:05:28.180 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:05:28.180 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:05:28.185 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:05:28.192 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:05:28.196 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:05:28.202 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:05:28.203 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:05:28.203 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"3d14aa7458dd44dc897d76518c99fe66","UiLocales":null,"Nonce":"9a5f2c3932694e27815206605488738a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"3d14aa7458dd44dc897d76518c99fe66","nonce":"9a5f2c3932694e27815206605488738a","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:05:28.207 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:05:28.207 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:05:28.208 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:05:28.208 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:05:28.215 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:05:28.215 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:05:28.218 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****wmfQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****oRnA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000013","TimeStamp":"2019-05-21T13:05:28.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:05:28.220 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"3d14aa7458dd44dc897d76518c99fe66","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:05:28.597 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:05:28.600 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:05:28.601 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:05:28.604 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:05:28.607 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:05:28.608 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:05:28.612 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:05:28.613 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:05:28.614 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:05:28.614 +03:00 [DBG] Start userinfo request
2019-05-21 16:05:28.615 +03:00 [DBG] Bearer token found in header
2019-05-21 16:05:28.629 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:05:28.630 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:05:28.638 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:05:28.639 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:05:28.641 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:05:28.649 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443928,"exp":1558444048,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:05:28.651 +03:00 [DBG] Creating userinfo response
2019-05-21 16:05:28.652 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:05:28.652 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:05:28.659 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:05:28.660 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:05:28.660 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:05:28.664 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:05:28.667 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:05:28.667 +03:00 [DBG] End userinfo request
2019-05-21 16:06:29.161 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:06:29.162 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:06:29.163 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:06:29.163 +03:00 [DBG] Start authorize request
2019-05-21 16:06:29.164 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:06:29.165 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:06:29.186 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:06:29.187 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:06:29.191 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:06:29.199 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:06:29.204 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:06:29.212 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:06:29.212 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:06:29.212 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"34b36bbdcbc74e86884c4b0c0ce805f0","UiLocales":null,"Nonce":"3f3b38bf7db54d459e11df5797086a7b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"34b36bbdcbc74e86884c4b0c0ce805f0","nonce":"3f3b38bf7db54d459e11df5797086a7b","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:06:29.215 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:06:29.215 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:06:29.215 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:06:29.215 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:06:29.220 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:06:29.221 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:06:29.223 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****g9_w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ot1w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000014","TimeStamp":"2019-05-21T13:06:29.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:06:29.226 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"34b36bbdcbc74e86884c4b0c0ce805f0","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:06:29.591 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:06:29.594 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:06:29.594 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:06:29.622 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:06:29.624 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:06:29.624 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:06:29.625 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:06:29.626 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:06:29.626 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:06:29.626 +03:00 [DBG] Start userinfo request
2019-05-21 16:06:29.627 +03:00 [DBG] Bearer token found in header
2019-05-21 16:06:29.642 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:06:29.642 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:06:29.650 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:06:29.651 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:06:29.653 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:06:29.653 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558443989,"exp":1558444109,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:06:29.655 +03:00 [DBG] Creating userinfo response
2019-05-21 16:06:29.655 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:06:29.655 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:06:29.660 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:06:29.661 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:06:29.661 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:06:29.666 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:06:29.671 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:06:29.671 +03:00 [DBG] End userinfo request
2019-05-21 16:07:30.143 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:07:30.144 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:07:30.144 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:07:30.145 +03:00 [DBG] Start authorize request
2019-05-21 16:07:30.145 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:07:30.145 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:07:30.158 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:07:30.159 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:07:30.162 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:07:30.169 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:07:30.173 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:07:30.179 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:07:30.179 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:07:30.180 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"2ad728b1fc454c65abb70d09b271423c","UiLocales":null,"Nonce":"7a103b045ac54496b5f3d77c052e9707","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"2ad728b1fc454c65abb70d09b271423c","nonce":"7a103b045ac54496b5f3d77c052e9707","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:07:30.184 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:07:30.184 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:07:30.184 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:07:30.185 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:07:30.190 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:07:30.190 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:07:30.193 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****_UvA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Qv2A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000015","TimeStamp":"2019-05-21T13:07:30.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:07:30.195 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"2ad728b1fc454c65abb70d09b271423c","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:07:30.555 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:07:30.559 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:07:30.559 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:07:30.563 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:07:30.566 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:07:30.567 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:07:30.567 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:07:30.568 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:07:30.568 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:07:30.569 +03:00 [DBG] Start userinfo request
2019-05-21 16:07:30.569 +03:00 [DBG] Bearer token found in header
2019-05-21 16:07:30.581 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:07:30.582 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:07:30.591 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:07:30.591 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:07:30.593 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:07:30.594 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444050,"exp":1558444170,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:07:30.595 +03:00 [DBG] Creating userinfo response
2019-05-21 16:07:30.595 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:07:30.596 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:07:30.599 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:07:30.600 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:07:30.600 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:07:30.603 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:07:30.620 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:07:30.621 +03:00 [DBG] End userinfo request
2019-05-21 16:08:31.146 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:08:31.147 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:08:31.149 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:08:31.163 +03:00 [DBG] Start authorize request
2019-05-21 16:08:31.163 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:08:31.164 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:08:31.179 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:08:31.179 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:08:31.184 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:08:31.192 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:08:31.197 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:08:31.204 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:08:31.204 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:08:31.204 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"5d64370a9dc9455f94138bc3f517829d","UiLocales":null,"Nonce":"d661049a9e5d46d79ab07130fa7e012c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"5d64370a9dc9455f94138bc3f517829d","nonce":"d661049a9e5d46d79ab07130fa7e012c","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:08:31.208 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:08:31.209 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:08:31.209 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:08:31.209 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:08:31.214 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:08:31.214 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:08:31.217 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Jdag","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ebKg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000016","TimeStamp":"2019-05-21T13:08:31.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:08:31.219 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"5d64370a9dc9455f94138bc3f517829d","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:08:31.597 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:08:31.600 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:08:31.601 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:08:31.605 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:08:31.608 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:08:31.608 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:08:31.609 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:08:31.609 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:08:31.610 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:08:31.610 +03:00 [DBG] Start userinfo request
2019-05-21 16:08:31.610 +03:00 [DBG] Bearer token found in header
2019-05-21 16:08:31.624 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:08:31.624 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:08:31.633 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:08:31.633 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:08:31.635 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:08:31.635 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444111,"exp":1558444231,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:08:31.637 +03:00 [DBG] Creating userinfo response
2019-05-21 16:08:31.637 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:08:31.637 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:08:31.643 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:08:31.643 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:08:31.644 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:08:31.648 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:08:31.651 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:08:31.652 +03:00 [DBG] End userinfo request
2019-05-21 16:09:32.147 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:09:32.148 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:09:32.149 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:09:32.150 +03:00 [DBG] Start authorize request
2019-05-21 16:09:32.150 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:09:32.151 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:09:32.172 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:09:32.173 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:09:32.180 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:09:32.189 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:09:32.195 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:09:32.203 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:09:32.204 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:09:32.204 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"54fbb8446df048799ee15948bdfc24a3","UiLocales":null,"Nonce":"f8c456dffe6c43b1b5d1455cbde45044","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"54fbb8446df048799ee15948bdfc24a3","nonce":"f8c456dffe6c43b1b5d1455cbde45044","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:09:32.208 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:09:32.208 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:09:32.209 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:09:32.209 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:09:32.214 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:09:32.214 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:09:32.217 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****TkMg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****HFVg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000017","TimeStamp":"2019-05-21T13:09:32.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:09:32.220 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"54fbb8446df048799ee15948bdfc24a3","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:09:32.683 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:09:32.688 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:09:32.688 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:09:32.691 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:09:32.694 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:09:32.694 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:09:32.695 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:09:32.695 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:09:32.696 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:09:32.696 +03:00 [DBG] Start userinfo request
2019-05-21 16:09:32.696 +03:00 [DBG] Bearer token found in header
2019-05-21 16:09:32.708 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:09:32.709 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:09:32.717 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:09:32.717 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:09:32.720 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:09:32.720 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444172,"exp":1558444292,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:09:32.722 +03:00 [DBG] Creating userinfo response
2019-05-21 16:09:32.722 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:09:32.722 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:09:32.726 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:09:32.727 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:09:32.727 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:09:32.731 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:09:32.733 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:09:32.734 +03:00 [DBG] End userinfo request
2019-05-21 16:10:33.154 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:10:33.156 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:10:33.157 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:10:33.176 +03:00 [DBG] Start authorize request
2019-05-21 16:10:33.177 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:10:33.178 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:10:33.200 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:10:33.200 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:10:33.205 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:10:33.212 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:10:33.216 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:10:33.230 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:10:33.231 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:10:33.231 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"8a4ac62b05f447a6985ea74a577a9e47","UiLocales":null,"Nonce":"7682577ca171404887e731acf0a38e7e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"8a4ac62b05f447a6985ea74a577a9e47","nonce":"7682577ca171404887e731acf0a38e7e","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:10:33.235 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:10:33.236 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:10:33.236 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:10:33.236 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:10:33.242 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:10:33.243 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:10:33.245 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****0hog","$type":"Token"},{"TokenType":"access_token","TokenValue":"****HxOg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000018","TimeStamp":"2019-05-21T13:10:33.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:10:33.248 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"8a4ac62b05f447a6985ea74a577a9e47","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:10:33.638 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:10:33.641 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:10:33.641 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:10:33.658 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:10:33.661 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:10:33.661 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:10:33.662 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:10:33.662 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:10:33.663 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:10:33.665 +03:00 [DBG] Start userinfo request
2019-05-21 16:10:33.674 +03:00 [DBG] Bearer token found in header
2019-05-21 16:10:33.688 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:10:33.688 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:10:33.697 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:10:33.697 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:10:33.700 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:10:33.701 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444233,"exp":1558444353,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:10:33.707 +03:00 [DBG] Creating userinfo response
2019-05-21 16:10:33.707 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:10:33.707 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:10:33.712 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:10:33.712 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:10:33.713 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:10:33.716 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:10:33.719 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:10:33.720 +03:00 [DBG] End userinfo request
2019-05-21 16:11:34.145 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:11:34.146 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:11:34.147 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:11:34.148 +03:00 [DBG] Start authorize request
2019-05-21 16:11:34.148 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:11:34.149 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:11:34.165 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:11:34.165 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:11:34.169 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:11:34.175 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:11:34.179 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:11:34.186 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:11:34.186 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:11:34.186 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"72107b80a4b94c679b8ff8b31475e0ba","UiLocales":null,"Nonce":"69ed4e196cd8490b92b6c32efc4d38df","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"72107b80a4b94c679b8ff8b31475e0ba","nonce":"69ed4e196cd8490b92b6c32efc4d38df","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:11:34.191 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:11:34.191 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:11:34.191 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:11:34.192 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:11:34.197 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:11:34.197 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:11:34.200 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ORxg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Kt2g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000019","TimeStamp":"2019-05-21T13:11:34.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:11:34.202 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"72107b80a4b94c679b8ff8b31475e0ba","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:11:34.569 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:11:34.573 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:11:34.574 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:11:34.578 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:11:34.580 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:11:34.581 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:11:34.581 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:11:34.581 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:11:34.582 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:11:34.582 +03:00 [DBG] Start userinfo request
2019-05-21 16:11:34.582 +03:00 [DBG] Bearer token found in header
2019-05-21 16:11:34.595 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:11:34.595 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:11:34.604 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:11:34.605 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:11:34.607 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:11:34.607 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444294,"exp":1558444414,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:11:34.609 +03:00 [DBG] Creating userinfo response
2019-05-21 16:11:34.609 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:11:34.609 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:11:34.613 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:11:34.613 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:11:34.614 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:11:34.617 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:11:34.620 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:11:34.621 +03:00 [DBG] End userinfo request
2019-05-21 16:12:35.149 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:12:35.151 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:12:35.152 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:12:35.153 +03:00 [DBG] Start authorize request
2019-05-21 16:12:35.153 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:12:35.154 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:12:35.181 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:12:35.182 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:12:35.188 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:12:35.196 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:12:35.201 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:12:35.211 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:12:35.211 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:12:35.216 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"6ff346f89a2f47229e01eeb76973a2fc","UiLocales":null,"Nonce":"27cf1a174e794bd7bdacf5a27fcea395","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"6ff346f89a2f47229e01eeb76973a2fc","nonce":"27cf1a174e794bd7bdacf5a27fcea395","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:12:35.224 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:12:35.225 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:12:35.225 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:12:35.225 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:12:35.232 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:12:35.233 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:12:35.235 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****UKsQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****m8nQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000001A","TimeStamp":"2019-05-21T13:12:35.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:12:35.238 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"6ff346f89a2f47229e01eeb76973a2fc","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:12:35.600 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:12:35.603 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:12:35.604 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:12:35.623 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:12:35.627 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:12:35.628 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:12:35.628 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:12:35.629 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:12:35.629 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:12:35.630 +03:00 [DBG] Start userinfo request
2019-05-21 16:12:35.630 +03:00 [DBG] Bearer token found in header
2019-05-21 16:12:35.646 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:12:35.646 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:12:35.658 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:12:35.659 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:12:35.662 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:12:35.662 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444355,"exp":1558444475,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:12:35.665 +03:00 [DBG] Creating userinfo response
2019-05-21 16:12:35.666 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:12:35.666 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:12:35.672 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:12:35.672 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:12:35.673 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:12:35.677 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:12:35.681 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:12:35.681 +03:00 [DBG] End userinfo request
2019-05-21 16:13:36.153 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:13:36.154 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:13:36.155 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:13:36.156 +03:00 [DBG] Start authorize request
2019-05-21 16:13:36.157 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:13:36.158 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:13:36.189 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:13:36.190 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:13:36.199 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:13:36.211 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:13:36.216 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:13:36.225 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:13:36.226 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:13:36.227 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"cae0fe90609448698ca94f0e57fdb417","UiLocales":null,"Nonce":"eea02e17546241e6824925aa0def3808","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"cae0fe90609448698ca94f0e57fdb417","nonce":"eea02e17546241e6824925aa0def3808","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:13:36.232 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:13:36.241 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:13:36.241 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:13:36.242 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:13:36.251 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:13:36.251 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:13:36.254 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****M-_Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****YO5g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000001B","TimeStamp":"2019-05-21T13:13:36.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:13:36.257 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"cae0fe90609448698ca94f0e57fdb417","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:13:36.636 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:13:36.640 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:13:36.640 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:13:36.644 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:13:36.646 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:13:36.647 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:13:36.647 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:13:36.648 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:13:36.648 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:13:36.648 +03:00 [DBG] Start userinfo request
2019-05-21 16:13:36.649 +03:00 [DBG] Bearer token found in header
2019-05-21 16:13:36.663 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:13:36.663 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:13:36.671 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:13:36.672 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:13:36.674 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:13:36.674 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444416,"exp":1558444536,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:13:36.676 +03:00 [DBG] Creating userinfo response
2019-05-21 16:13:36.676 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:13:36.676 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:13:36.680 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:13:36.680 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:13:36.680 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:13:36.693 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:13:36.698 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:13:36.699 +03:00 [DBG] End userinfo request
2019-05-21 16:14:37.145 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:14:37.146 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:14:37.147 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:14:37.148 +03:00 [DBG] Start authorize request
2019-05-21 16:14:37.149 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:14:37.149 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:14:37.168 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:14:37.169 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:14:37.173 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:14:37.182 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:14:37.186 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:14:37.193 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:14:37.193 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:14:37.194 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"8dc35734c00447ddaa8a03a291e82240","UiLocales":null,"Nonce":"7c3e70af009b4b848db6217296b4c377","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"8dc35734c00447ddaa8a03a291e82240","nonce":"7c3e70af009b4b848db6217296b4c377","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:14:37.198 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:14:37.199 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:14:37.199 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:14:37.199 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:14:37.204 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:14:37.205 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:14:37.207 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****SxlA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****T4Jw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000001C","TimeStamp":"2019-05-21T13:14:37.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:14:37.210 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"8dc35734c00447ddaa8a03a291e82240","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:14:37.569 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:14:37.572 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:14:37.573 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:14:37.577 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:14:37.579 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:14:37.580 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:14:37.580 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:14:37.581 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:14:37.581 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:14:37.582 +03:00 [DBG] Start userinfo request
2019-05-21 16:14:37.582 +03:00 [DBG] Bearer token found in header
2019-05-21 16:14:37.599 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:14:37.599 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:14:37.609 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:14:37.609 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:14:37.612 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:14:37.612 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444477,"exp":1558444597,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:14:37.614 +03:00 [DBG] Creating userinfo response
2019-05-21 16:14:37.614 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:14:37.615 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:14:37.619 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:14:37.625 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:14:37.626 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:14:37.633 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:14:37.639 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:14:37.640 +03:00 [DBG] End userinfo request
2019-05-21 16:15:38.139 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:15:38.140 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:15:38.140 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:15:38.141 +03:00 [DBG] Start authorize request
2019-05-21 16:15:38.141 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:15:38.141 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:15:38.154 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:15:38.155 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:15:38.158 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:15:38.165 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:15:38.168 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:15:38.174 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:15:38.175 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:15:38.175 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"e3e0febaf4944c70872b62654afde778","UiLocales":null,"Nonce":"84ccfc8e269745ea94756b367e9a9783","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"e3e0febaf4944c70872b62654afde778","nonce":"84ccfc8e269745ea94756b367e9a9783","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:15:38.180 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:15:38.184 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:15:38.185 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:15:38.186 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:15:38.195 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:15:38.196 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:15:38.198 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Lu3A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ijxw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000001D","TimeStamp":"2019-05-21T13:15:38.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:15:38.201 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"e3e0febaf4944c70872b62654afde778","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:15:38.582 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:15:38.585 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:15:38.586 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:15:38.590 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:15:38.593 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:15:38.593 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:15:38.594 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:15:38.594 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:15:38.595 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:15:38.595 +03:00 [DBG] Start userinfo request
2019-05-21 16:15:38.595 +03:00 [DBG] Bearer token found in header
2019-05-21 16:15:38.610 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:15:38.610 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:15:38.620 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:15:38.620 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:15:38.622 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:15:38.623 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444538,"exp":1558444658,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:15:38.624 +03:00 [DBG] Creating userinfo response
2019-05-21 16:15:38.624 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:15:38.625 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:15:38.628 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:15:38.629 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:15:38.629 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:15:38.633 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:15:38.636 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:15:38.636 +03:00 [DBG] End userinfo request
2019-05-21 16:16:39.223 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:16:39.224 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:16:39.225 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:16:39.225 +03:00 [DBG] Start authorize request
2019-05-21 16:16:39.226 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:16:39.227 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:16:39.238 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:16:39.238 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:16:39.242 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:16:39.249 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:16:39.253 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:16:39.259 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:16:39.260 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:16:39.260 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"f1ab192b4d5247f8ae50a0e9b55ae3ca","UiLocales":null,"Nonce":"3eca6574b7804bc6b7291def7da131dc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"f1ab192b4d5247f8ae50a0e9b55ae3ca","nonce":"3eca6574b7804bc6b7291def7da131dc","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:16:39.264 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:16:39.265 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:16:39.265 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:16:39.265 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:16:39.272 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:16:39.272 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:16:39.275 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****oCPg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ArWg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000001E","TimeStamp":"2019-05-21T13:16:39.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:16:39.279 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"f1ab192b4d5247f8ae50a0e9b55ae3ca","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:16:39.710 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:16:39.713 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:16:39.714 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:16:39.718 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:16:39.721 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:16:39.721 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:16:39.722 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:16:39.722 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:16:39.723 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:16:39.723 +03:00 [DBG] Start userinfo request
2019-05-21 16:16:39.723 +03:00 [DBG] Bearer token found in header
2019-05-21 16:16:39.736 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:16:39.736 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:16:39.744 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:16:39.745 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:16:39.747 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:16:39.747 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444599,"exp":1558444719,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:16:39.749 +03:00 [DBG] Creating userinfo response
2019-05-21 16:16:39.749 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:16:39.749 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:16:39.754 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:16:39.755 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:16:39.755 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:16:39.758 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:16:39.761 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:16:39.762 +03:00 [DBG] End userinfo request
2019-05-21 16:17:40.151 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:17:40.152 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:17:40.153 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:17:40.154 +03:00 [DBG] Start authorize request
2019-05-21 16:17:40.154 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:17:40.155 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:17:40.174 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:17:40.174 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:17:40.180 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:17:40.190 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:17:40.195 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:17:40.202 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:17:40.202 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:17:40.203 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"55f17e4a756b4823805435cb556b27d0","UiLocales":null,"Nonce":"bcf8225dbb744d9881405c324488e405","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"55f17e4a756b4823805435cb556b27d0","nonce":"bcf8225dbb744d9881405c324488e405","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:17:40.208 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:17:40.208 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:17:40.208 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:17:40.209 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:17:40.217 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:17:40.217 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:17:40.220 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****4D7g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****BvFw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:0000001F","TimeStamp":"2019-05-21T13:17:40.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:17:40.223 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"55f17e4a756b4823805435cb556b27d0","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:17:40.622 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:17:40.625 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:17:40.625 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:17:40.644 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:17:40.646 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:17:40.647 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:17:40.647 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:17:40.647 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:17:40.648 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:17:40.648 +03:00 [DBG] Start userinfo request
2019-05-21 16:17:40.648 +03:00 [DBG] Bearer token found in header
2019-05-21 16:17:40.663 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:17:40.664 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:17:40.673 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:17:40.673 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:17:40.675 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:17:40.676 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444660,"exp":1558444780,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:17:40.677 +03:00 [DBG] Creating userinfo response
2019-05-21 16:17:40.677 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:17:40.678 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:17:40.682 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:17:40.683 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:17:40.683 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:17:40.689 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:17:40.693 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:17:40.693 +03:00 [DBG] End userinfo request
2019-05-21 16:18:41.148 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:18:41.149 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:18:41.149 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:18:41.150 +03:00 [DBG] Start authorize request
2019-05-21 16:18:41.150 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:18:41.150 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:18:41.167 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:18:41.167 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:18:41.171 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:18:41.178 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:18:41.182 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:18:41.189 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:18:41.190 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:18:41.190 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"24b2b0502ccd4ddf924d89194cd6ccc9","UiLocales":null,"Nonce":"a2536dcba0fc4c43b543f2370f199a75","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"24b2b0502ccd4ddf924d89194cd6ccc9","nonce":"a2536dcba0fc4c43b543f2370f199a75","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:18:41.195 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:18:41.195 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:18:41.195 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:18:41.195 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:18:41.201 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:18:41.202 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:18:41.204 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****gMmQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Dutg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTA4MM0OH:00000020","TimeStamp":"2019-05-21T13:18:41.0000000Z","ProcessId":18424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:18:41.207 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"24b2b0502ccd4ddf924d89194cd6ccc9","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:18:41.602 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:18:41.605 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:18:41.609 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:18:41.613 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:18:41.615 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:18:41.616 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:18:41.616 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:18:41.617 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:18:41.617 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:18:41.618 +03:00 [DBG] Start userinfo request
2019-05-21 16:18:41.618 +03:00 [DBG] Bearer token found in header
2019-05-21 16:18:41.631 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:18:41.631 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:18:41.641 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:18:41.641 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:18:41.643 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:18:41.644 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444721,"exp":1558444841,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:18:41.645 +03:00 [DBG] Creating userinfo response
2019-05-21 16:18:41.645 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:18:41.646 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:18:41.650 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:18:41.650 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:18:41.651 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:18:41.655 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:18:41.658 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:18:41.659 +03:00 [DBG] End userinfo request
2019-05-21 16:19:07.613 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-21 16:19:07.791 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-21 16:19:07.792 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-21 16:19:07.792 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-21 16:19:07.793 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-21 16:19:07.793 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-21 16:19:07.793 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-21 16:19:07.892 +03:00 [DBG] Starting grant removal
2019-05-21 16:19:42.260 +03:00 [DBG] Login Url: /Account/Login
2019-05-21 16:19:42.262 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-21 16:19:42.262 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-21 16:19:42.263 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-21 16:19:42.263 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-21 16:19:42.263 +03:00 [DBG] Error Url: /home/error
2019-05-21 16:19:42.263 +03:00 [DBG] Error Id Parameter: errorId
2019-05-21 16:19:42.303 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:19:42.308 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:19:42.309 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:19:42.313 +03:00 [DBG] Start authorize request
2019-05-21 16:19:42.323 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:19:42.328 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:19:44.866 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:19:44.875 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:19:44.951 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:19:45.175 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:19:45.198 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:19:45.207 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:19:45.216 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:19:45.226 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"834ad8bf35a741eba76cf88324603a0b","UiLocales":null,"Nonce":"d7f406329cf844c186507fb58e8b35b6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"834ad8bf35a741eba76cf88324603a0b","nonce":"d7f406329cf844c186507fb58e8b35b6","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:19:45.451 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:19:45.457 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:19:45.468 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:19:45.468 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:19:45.625 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:19:45.625 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:19:45.642 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****qd_g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****LTxQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTRU214TJ:00000001","TimeStamp":"2019-05-21T13:19:45.0000000Z","ProcessId":6720,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:19:45.648 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"834ad8bf35a741eba76cf88324603a0b","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:19:46.044 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:19:46.072 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:19:46.073 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:19:46.081 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:19:46.085 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:19:46.089 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:19:46.092 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:19:46.093 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:19:46.094 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:19:46.100 +03:00 [DBG] Start userinfo request
2019-05-21 16:19:46.104 +03:00 [DBG] Bearer token found in header
2019-05-21 16:19:46.154 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:19:46.154 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:19:46.169 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:19:46.170 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:19:46.174 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:19:46.175 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444785,"exp":1558444905,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:19:46.187 +03:00 [DBG] Creating userinfo response
2019-05-21 16:19:46.193 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:19:46.196 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:19:46.203 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:19:46.203 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:19:46.204 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:19:46.208 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:19:46.214 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:19:46.215 +03:00 [DBG] End userinfo request
2019-05-21 16:20:47.142 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:20:47.143 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:20:47.144 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:20:47.144 +03:00 [DBG] Start authorize request
2019-05-21 16:20:47.145 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:20:47.145 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:20:47.163 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:20:47.163 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:20:47.170 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:20:47.181 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:20:47.186 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:20:47.195 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:20:47.196 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:20:47.196 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"c08c447c9d964da7b059ad8100a47420","UiLocales":null,"Nonce":"055df798f7314730a4727018c822892b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"c08c447c9d964da7b059ad8100a47420","nonce":"055df798f7314730a4727018c822892b","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:20:47.201 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:20:47.202 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:20:47.202 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:20:47.202 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:20:47.208 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:20:47.209 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:20:47.212 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****g5pg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****iOig","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTRU214TJ:00000002","TimeStamp":"2019-05-21T13:20:47.0000000Z","ProcessId":6720,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:20:47.226 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"c08c447c9d964da7b059ad8100a47420","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:20:47.623 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:20:47.626 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:20:47.627 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:20:47.637 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:20:47.639 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:20:47.640 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:20:47.640 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:20:47.641 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:20:47.641 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:20:47.642 +03:00 [DBG] Start userinfo request
2019-05-21 16:20:47.642 +03:00 [DBG] Bearer token found in header
2019-05-21 16:20:47.656 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:20:47.656 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:20:47.666 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:20:47.667 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:20:47.669 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:20:47.670 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444847,"exp":1558444967,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:20:47.682 +03:00 [DBG] Creating userinfo response
2019-05-21 16:20:47.682 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:20:47.682 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:20:47.689 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:20:47.691 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:20:47.691 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:20:47.697 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:20:47.700 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:20:47.701 +03:00 [DBG] End userinfo request
2019-05-21 16:21:46.091 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-21 16:21:46.275 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-21 16:21:46.275 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-21 16:21:46.275 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-21 16:21:46.276 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-21 16:21:46.276 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-21 16:21:46.276 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-21 16:21:46.369 +03:00 [DBG] Starting grant removal
2019-05-21 16:21:48.259 +03:00 [DBG] Login Url: /Account/Login
2019-05-21 16:21:48.260 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-21 16:21:48.261 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-21 16:21:48.261 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-21 16:21:48.261 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-21 16:21:48.262 +03:00 [DBG] Error Url: /home/error
2019-05-21 16:21:48.262 +03:00 [DBG] Error Id Parameter: errorId
2019-05-21 16:21:48.324 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:21:48.329 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:21:48.329 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:21:48.333 +03:00 [DBG] Start authorize request
2019-05-21 16:21:48.342 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:21:48.348 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:21:50.805 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:21:50.813 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:21:50.889 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:21:51.056 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:21:51.080 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:21:51.092 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:21:51.101 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:21:51.110 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"30d1c6b59780459aab808dd4410b3070","UiLocales":null,"Nonce":"d4aed715fa874da2b40d0f530d3599af","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"30d1c6b59780459aab808dd4410b3070","nonce":"d4aed715fa874da2b40d0f530d3599af","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:21:51.309 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:21:51.315 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:21:51.324 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:21:51.325 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:21:51.475 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:21:51.476 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:21:51.489 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****wptg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****mEGg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTT3JQ4EJ:00000001","TimeStamp":"2019-05-21T13:21:51.0000000Z","ProcessId":6980,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:21:51.503 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"30d1c6b59780459aab808dd4410b3070","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:21:51.938 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:21:51.963 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:21:51.964 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:21:51.970 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:21:51.974 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:21:51.974 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:21:51.977 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:21:51.979 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:21:51.979 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:21:51.987 +03:00 [DBG] Start userinfo request
2019-05-21 16:21:52.003 +03:00 [DBG] Bearer token found in header
2019-05-21 16:21:52.043 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:21:52.044 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:21:52.063 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:21:52.064 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:21:52.068 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:21:52.069 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444911,"exp":1558445031,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:21:52.076 +03:00 [DBG] Creating userinfo response
2019-05-21 16:21:52.079 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:21:52.083 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:21:52.092 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:21:52.093 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:21:52.094 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:21:52.099 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:21:52.104 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:21:52.105 +03:00 [DBG] End userinfo request
2019-05-21 16:22:52.157 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:22:52.159 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:22:52.160 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:22:52.160 +03:00 [DBG] Start authorize request
2019-05-21 16:22:52.161 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:22:52.162 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:22:52.185 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:22:52.195 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:22:52.202 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:22:52.210 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:22:52.215 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:22:52.223 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:22:52.223 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:22:52.224 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"978263fc6b614f5e9cab6cde678e72f7","UiLocales":null,"Nonce":"fd5ba3e2e2e142b5bca3188418302175","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"978263fc6b614f5e9cab6cde678e72f7","nonce":"fd5ba3e2e2e142b5bca3188418302175","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:22:52.228 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:22:52.229 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:22:52.229 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:22:52.229 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:22:52.237 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:22:52.237 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:22:52.240 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****mPqA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ab0g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTT3JQ4EJ:00000002","TimeStamp":"2019-05-21T13:22:52.0000000Z","ProcessId":6980,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:22:52.243 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"978263fc6b614f5e9cab6cde678e72f7","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:22:52.596 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:22:52.599 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:22:52.600 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:22:52.604 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:22:52.607 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:22:52.608 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:22:52.614 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:22:52.615 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:22:52.615 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:22:52.616 +03:00 [DBG] Start userinfo request
2019-05-21 16:22:52.616 +03:00 [DBG] Bearer token found in header
2019-05-21 16:22:52.633 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:22:52.634 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:22:52.646 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:22:52.646 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:22:52.649 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:22:52.650 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558444972,"exp":1558445092,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:22:52.660 +03:00 [DBG] Creating userinfo response
2019-05-21 16:22:52.660 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:22:52.661 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:22:52.668 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:22:52.669 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:22:52.670 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:22:52.678 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:22:52.682 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:22:52.683 +03:00 [DBG] End userinfo request
2019-05-21 16:23:53.155 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:23:53.157 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:23:53.158 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:23:53.158 +03:00 [DBG] Start authorize request
2019-05-21 16:23:53.159 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:23:53.160 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:23:53.187 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:23:53.188 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:23:53.200 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:23:53.216 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:23:53.223 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:23:53.239 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:23:53.240 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:23:53.240 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"51df8ed964dd4028af2b2cf1861c89f2","UiLocales":null,"Nonce":"b595e5fab07d4c7c94e26351f62f3cd0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"51df8ed964dd4028af2b2cf1861c89f2","nonce":"b595e5fab07d4c7c94e26351f62f3cd0","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:23:53.247 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:23:53.247 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:23:53.248 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:23:53.248 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:23:53.253 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:23:53.254 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:23:53.256 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****0qRQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****c9Gw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTT3JQ4EJ:00000003","TimeStamp":"2019-05-21T13:23:53.0000000Z","ProcessId":6980,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:23:53.259 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"51df8ed964dd4028af2b2cf1861c89f2","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:23:53.640 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:23:53.643 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:23:53.644 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:23:53.647 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:23:53.650 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:23:53.651 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:23:53.651 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:23:53.653 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:23:53.653 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:23:53.653 +03:00 [DBG] Start userinfo request
2019-05-21 16:23:53.654 +03:00 [DBG] Bearer token found in header
2019-05-21 16:23:53.666 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:23:53.675 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:23:53.686 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:23:53.686 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:23:53.688 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:23:53.689 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558445033,"exp":1558445153,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:23:53.691 +03:00 [DBG] Creating userinfo response
2019-05-21 16:23:53.691 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:23:53.691 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:23:53.695 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:23:53.696 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:23:53.696 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:23:53.700 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:23:53.703 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:23:53.704 +03:00 [DBG] End userinfo request
2019-05-21 16:24:54.198 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-21 16:24:54.199 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-21 16:24:54.199 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-21 16:24:54.200 +03:00 [DBG] Start authorize request
2019-05-21 16:24:54.200 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:24:54.200 +03:00 [DBG] Start authorize request protocol validation
2019-05-21 16:24:54.214 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:24:54.215 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:24:54.218 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:24:54.227 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:24:54.231 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:24:54.238 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-21 16:24:54.238 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-21 16:24:54.239 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"2111784716d244db83f565d3e72ce0d2","UiLocales":null,"Nonce":"d01c2da2d53941268d2a170698fef507","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"2111784716d244db83f565d3e72ce0d2","nonce":"d01c2da2d53941268d2a170698fef507","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-21 16:24:54.255 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-21 16:24:54.256 +03:00 [DBG] Creating Implicit Flow response.
2019-05-21 16:24:54.257 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-21 16:24:54.258 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-21 16:24:54.267 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-21 16:24:54.267 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-21 16:24:54.270 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****0MVA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****nmtg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMTTT3JQ4EJ:00000004","TimeStamp":"2019-05-21T13:24:54.0000000Z","ProcessId":6980,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-21 16:24:54.272 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"2111784716d244db83f565d3e72ce0d2","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-21 16:24:54.714 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:24:54.718 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:24:54.719 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:24:54.723 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-21 16:24:54.726 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-21 16:24:54.727 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-21 16:24:54.727 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-21 16:24:54.728 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-21 16:24:54.728 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-21 16:24:54.728 +03:00 [DBG] Start userinfo request
2019-05-21 16:24:54.729 +03:00 [DBG] Bearer token found in header
2019-05-21 16:24:54.742 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:24:54.742 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:24:54.752 +03:00 [DBG] promanage_spa found in database: true
2019-05-21 16:24:54.752 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-21 16:24:54.754 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-21 16:24:54.755 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558445094,"exp":1558445214,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-21 16:24:54.757 +03:00 [DBG] Creating userinfo response
2019-05-21 16:24:54.757 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:24:54.757 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:24:54.762 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:24:54.763 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-21 16:24:54.763 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-21 16:24:54.767 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-21 16:24:54.771 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-21 16:24:54.771 +03:00 [DBG] End userinfo request
2019-05-21 16:25:11.099 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-21 16:25:11.126 +03:00 [DBG] Stopping grant removal
2019-05-22 08:43:07.488 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-22 08:43:07.676 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-22 08:43:07.677 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-22 08:43:07.677 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-22 08:43:07.678 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-22 08:43:07.678 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-22 08:43:07.679 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-22 08:43:07.770 +03:00 [DBG] Starting grant removal
2019-05-22 08:43:12.781 +03:00 [DBG] Login Url: /Account/Login
2019-05-22 08:43:12.785 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-22 08:43:12.785 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-22 08:43:12.786 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-22 08:43:12.786 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-22 08:43:12.786 +03:00 [DBG] Error Url: /home/error
2019-05-22 08:43:12.786 +03:00 [DBG] Error Id Parameter: errorId
2019-05-22 08:44:29.243 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-22 08:44:29.255 +03:00 [DBG] Stopping grant removal
2019-05-22 08:44:35.250 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-22 08:44:35.420 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-22 08:44:35.421 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-22 08:44:35.421 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-22 08:44:35.422 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-22 08:44:35.422 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-22 08:44:35.422 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-22 08:44:35.516 +03:00 [DBG] Starting grant removal
2019-05-22 08:44:44.176 +03:00 [DBG] Login Url: /Account/Login
2019-05-22 08:44:44.179 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-22 08:44:44.180 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-22 08:44:44.180 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-22 08:44:44.180 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-22 08:44:44.180 +03:00 [DBG] Error Url: /home/error
2019-05-22 08:44:44.180 +03:00 [DBG] Error Id Parameter: errorId
2019-05-22 08:45:14.003 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 08:45:14.008 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 08:45:14.008 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 08:45:14.012 +03:00 [DBG] Start discovery request
2019-05-22 08:45:16.540 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 09:07:10.793 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-05-22 09:07:10.868 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:07:10.870 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:07:10.878 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 09:07:10.878 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 09:07:10.879 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 09:07:10.879 +03:00 [DBG] Start discovery request
2019-05-22 09:07:10.901 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 09:07:10.920 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:07:10.924 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:07:10.925 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:07:10.929 +03:00 [DBG] Start authorize request
2019-05-22 09:07:10.948 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:07:10.960 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:07:11.243 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:07:11.249 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:07:11.314 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:07:11.372 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:07:11.386 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:07:11.394 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:07:11.413 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:07:11.424 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"98f631a2cad14f1396f13abea2b7d841","UiLocales":null,"Nonce":"0f60daf9952c4f2d95473e970a8bdea1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"98f631a2cad14f1396f13abea2b7d841","nonce":"0f60daf9952c4f2d95473e970a8bdea1"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:07:11.606 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:07:11.612 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:07:11.622 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:07:11.622 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:07:11.804 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:07:11.805 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:07:11.827 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****-N5g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****n3TA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:00000001","TimeStamp":"2019-05-22T06:07:11.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:07:11.834 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/#/auth-callback#","State":"98f631a2cad14f1396f13abea2b7d841","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:07:17.850 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-05-22 09:07:17.855 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:07:17.856 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:07:17.856 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 09:07:17.857 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 09:07:17.858 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 09:07:17.858 +03:00 [DBG] Start discovery request
2019-05-22 09:07:17.880 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 09:07:17.898 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-05-22 09:07:17.901 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:07:17.902 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:07:17.902 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-22 09:07:17.903 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-22 09:07:17.904 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-22 09:07:17.908 +03:00 [DBG] Start key discovery request
2019-05-22 09:07:17.939 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:07:17.943 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:07:17.944 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:07:17.958 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:07:17.961 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:07:17.962 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:07:17.963 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:07:17.964 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:07:17.965 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:07:17.970 +03:00 [DBG] Start userinfo request
2019-05-22 09:07:17.973 +03:00 [DBG] Bearer token found in header
2019-05-22 09:07:18.015 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:07:18.015 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:07:18.034 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:07:18.034 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:07:18.038 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:07:18.040 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505231,"exp":1558505351,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:07:18.049 +03:00 [DBG] Creating userinfo response
2019-05-22 09:07:18.052 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:07:18.055 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:07:18.064 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:07:18.065 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:07:18.065 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:07:18.071 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:07:18.077 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:07:18.078 +03:00 [DBG] End userinfo request
2019-05-22 09:07:18.089 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-22 09:07:18.090 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-22 09:07:18.091 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-22 09:07:18.092 +03:00 [DBG] Rendering check session result
2019-05-22 09:08:18.199 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:08:18.201 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:08:18.201 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:08:18.202 +03:00 [DBG] Start authorize request
2019-05-22 09:08:18.202 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:08:18.203 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:08:18.222 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:08:18.223 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:08:18.230 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:08:18.247 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:08:18.254 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:08:18.263 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:08:18.263 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:08:18.264 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"bf763acdc43441f9b1f45ac64ce6ada0","UiLocales":null,"Nonce":"b8458516bfaa4c699b5c2aaecfd0a19c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"bf763acdc43441f9b1f45ac64ce6ada0","nonce":"b8458516bfaa4c699b5c2aaecfd0a19c","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:08:18.269 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:08:18.269 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:08:18.270 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:08:18.270 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:08:18.276 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:08:18.277 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:08:18.279 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****QD5A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ygvw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:00000003","TimeStamp":"2019-05-22T06:08:18.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:08:18.282 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"bf763acdc43441f9b1f45ac64ce6ada0","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:08:18.794 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:08:18.798 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:08:18.799 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:08:18.803 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:08:18.807 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:08:18.807 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:08:18.808 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:08:18.808 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:08:18.809 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:08:18.809 +03:00 [DBG] Start userinfo request
2019-05-22 09:08:18.810 +03:00 [DBG] Bearer token found in header
2019-05-22 09:08:18.827 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:08:18.828 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:08:18.843 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:08:18.844 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:08:18.846 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:08:18.847 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505298,"exp":1558505418,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:08:18.849 +03:00 [DBG] Creating userinfo response
2019-05-22 09:08:18.849 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:08:18.850 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:08:18.856 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:08:18.857 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:08:18.858 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:08:18.863 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:08:18.870 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:08:18.870 +03:00 [DBG] End userinfo request
2019-05-22 09:09:19.384 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:09:19.384 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:09:19.385 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:09:19.385 +03:00 [DBG] Start authorize request
2019-05-22 09:09:19.385 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:09:19.386 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:09:19.399 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:09:19.399 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:09:19.404 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:09:19.413 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:09:19.417 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:09:19.427 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:09:19.427 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:09:19.427 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"6822ba7bffb6494791f5313b76a2f6be","UiLocales":null,"Nonce":"ea7af8327b114f5b85aeb574b3cc2266","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"6822ba7bffb6494791f5313b76a2f6be","nonce":"ea7af8327b114f5b85aeb574b3cc2266","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:09:19.432 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:09:19.432 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:09:19.432 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:09:19.433 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:09:19.440 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:09:19.440 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:09:19.443 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****wWwQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****rxWQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:00000004","TimeStamp":"2019-05-22T06:09:19.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:09:19.456 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"6822ba7bffb6494791f5313b76a2f6be","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:09:19.992 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:09:19.998 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:09:19.998 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:09:20.004 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:09:20.009 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:09:20.010 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:09:20.011 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:09:20.013 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:09:20.031 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:09:20.032 +03:00 [DBG] Start userinfo request
2019-05-22 09:09:20.032 +03:00 [DBG] Bearer token found in header
2019-05-22 09:09:20.066 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:09:20.067 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:09:20.098 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:09:20.099 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:09:20.105 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:09:20.106 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505359,"exp":1558505479,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:09:20.111 +03:00 [DBG] Creating userinfo response
2019-05-22 09:09:20.112 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:09:20.113 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:09:20.125 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:09:20.134 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:09:20.135 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:09:20.147 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:09:20.155 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:09:20.155 +03:00 [DBG] End userinfo request
2019-05-22 09:10:20.301 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:10:20.303 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:10:20.304 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:10:20.306 +03:00 [DBG] Start authorize request
2019-05-22 09:10:20.307 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:10:20.308 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:10:20.355 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:10:20.356 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:10:20.374 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:10:20.422 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:10:20.440 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:10:20.473 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:10:20.474 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:10:20.477 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"8c9343cd8325415e94fa3c5edd95ae50","UiLocales":null,"Nonce":"43b63ac2c6b94038859243e40f545326","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"8c9343cd8325415e94fa3c5edd95ae50","nonce":"43b63ac2c6b94038859243e40f545326","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:10:20.530 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:10:20.531 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:10:20.532 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:10:20.533 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:10:20.554 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:10:20.556 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:10:20.566 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****nJLQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dhEQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:00000005","TimeStamp":"2019-05-22T06:10:20.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:10:20.576 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"8c9343cd8325415e94fa3c5edd95ae50","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:10:21.019 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:10:21.022 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:10:21.023 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:10:21.039 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:10:21.041 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:10:21.042 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:10:21.043 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:10:21.043 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:10:21.043 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:10:21.044 +03:00 [DBG] Start userinfo request
2019-05-22 09:10:21.044 +03:00 [DBG] Bearer token found in header
2019-05-22 09:10:21.062 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:10:21.062 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:10:21.072 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:10:21.072 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:10:21.075 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:10:21.075 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505420,"exp":1558505540,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:10:21.076 +03:00 [DBG] Creating userinfo response
2019-05-22 09:10:21.077 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:10:21.077 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:10:21.081 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:10:21.082 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:10:21.082 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:10:21.086 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:10:21.094 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:10:21.097 +03:00 [DBG] End userinfo request
2019-05-22 09:11:21.311 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:11:21.313 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:11:21.314 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:11:21.316 +03:00 [DBG] Start authorize request
2019-05-22 09:11:21.317 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:11:21.318 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:11:21.370 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:11:21.371 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:11:21.392 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:11:21.425 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:11:21.444 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:11:21.469 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:11:21.471 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:11:21.473 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"1baa31b8eee34b628690c398ee70df2c","UiLocales":null,"Nonce":"b611ae4939ae4664b385d912c84d83f5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"1baa31b8eee34b628690c398ee70df2c","nonce":"b611ae4939ae4664b385d912c84d83f5","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:11:21.492 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:11:21.518 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:11:21.519 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:11:21.520 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:11:21.545 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:11:21.546 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:11:21.559 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5wqg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****TNJQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:00000006","TimeStamp":"2019-05-22T06:11:21.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:11:21.595 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"1baa31b8eee34b628690c398ee70df2c","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:11:22.063 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:11:22.066 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:11:22.067 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:11:22.071 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:11:22.074 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:11:22.074 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:11:22.075 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:11:22.075 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:11:22.076 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:11:22.076 +03:00 [DBG] Start userinfo request
2019-05-22 09:11:22.076 +03:00 [DBG] Bearer token found in header
2019-05-22 09:11:22.094 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:11:22.095 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:11:22.107 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:11:22.107 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:11:22.110 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:11:22.110 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505481,"exp":1558505601,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:11:22.112 +03:00 [DBG] Creating userinfo response
2019-05-22 09:11:22.113 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:11:22.113 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:11:22.120 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:11:22.121 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:11:22.122 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:11:22.134 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:11:22.146 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:11:22.148 +03:00 [DBG] End userinfo request
2019-05-22 09:12:22.301 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:12:22.303 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:12:22.304 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:12:22.306 +03:00 [DBG] Start authorize request
2019-05-22 09:12:22.307 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:12:22.309 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:12:22.357 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:12:22.359 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:12:22.376 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:12:22.408 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:12:22.427 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:12:22.460 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:12:22.462 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:12:22.463 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"4956f9b41d6d441cb3e378c028f0c1d2","UiLocales":null,"Nonce":"710e25a283bd40778172d3306c256994","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"4956f9b41d6d441cb3e378c028f0c1d2","nonce":"710e25a283bd40778172d3306c256994","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:12:22.481 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:12:22.483 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:12:22.485 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:12:22.516 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:12:22.536 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:12:22.538 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:12:22.549 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****XbVA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****SzsQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:00000007","TimeStamp":"2019-05-22T06:12:22.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:12:22.557 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"4956f9b41d6d441cb3e378c028f0c1d2","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:12:22.957 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:12:22.961 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:12:22.961 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:12:22.965 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:12:22.968 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:12:22.969 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:12:22.969 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:12:22.970 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:12:22.970 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:12:22.970 +03:00 [DBG] Start userinfo request
2019-05-22 09:12:22.971 +03:00 [DBG] Bearer token found in header
2019-05-22 09:12:22.982 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:12:22.990 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:12:23.008 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:12:23.009 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:12:23.012 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:12:23.013 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505542,"exp":1558505662,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:12:23.015 +03:00 [DBG] Creating userinfo response
2019-05-22 09:12:23.015 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:12:23.016 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:12:23.022 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:12:23.023 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:12:23.023 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:12:23.028 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:12:23.032 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:12:23.032 +03:00 [DBG] End userinfo request
2019-05-22 09:13:23.377 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:13:23.379 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:13:23.381 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:13:23.383 +03:00 [DBG] Start authorize request
2019-05-22 09:13:23.384 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:13:23.385 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:13:23.431 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:13:23.433 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:13:23.450 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:13:23.497 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:13:23.517 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:13:23.549 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:13:23.551 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:13:23.552 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"75fb6f2ad18348ad989dab39d2e3695a","UiLocales":null,"Nonce":"a602010822f54b6894338939df2393fb","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"75fb6f2ad18348ad989dab39d2e3695a","nonce":"a602010822f54b6894338939df2393fb","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:13:23.598 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:13:23.599 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:13:23.600 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:13:23.601 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:13:23.622 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:13:23.623 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:13:23.629 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****NTDA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****EWtw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:00000008","TimeStamp":"2019-05-22T06:13:23.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:13:23.650 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"75fb6f2ad18348ad989dab39d2e3695a","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:13:24.065 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:13:24.070 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:13:24.071 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:13:24.077 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:13:24.083 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:13:24.084 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:13:24.085 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:13:24.087 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:13:24.107 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:13:24.108 +03:00 [DBG] Start userinfo request
2019-05-22 09:13:24.109 +03:00 [DBG] Bearer token found in header
2019-05-22 09:13:24.146 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:13:24.147 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:13:24.179 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:13:24.180 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:13:24.186 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:13:24.187 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505603,"exp":1558505723,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:13:24.193 +03:00 [DBG] Creating userinfo response
2019-05-22 09:13:24.194 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:13:24.196 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:13:24.209 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:13:24.211 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:13:24.212 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:13:24.225 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:13:24.235 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:13:24.236 +03:00 [DBG] End userinfo request
2019-05-22 09:14:24.303 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:14:24.305 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:14:24.307 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:14:24.309 +03:00 [DBG] Start authorize request
2019-05-22 09:14:24.310 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:14:24.341 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:14:24.366 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:14:24.367 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:14:24.375 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:14:24.386 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:14:24.391 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:14:24.400 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:14:24.400 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:14:24.401 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"88fe6b58ec4c495e93d12b597332169d","UiLocales":null,"Nonce":"707defa01f71402b9425d20f11f1bc94","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"88fe6b58ec4c495e93d12b597332169d","nonce":"707defa01f71402b9425d20f11f1bc94","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:14:24.407 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:14:24.407 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:14:24.408 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:14:24.408 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:14:24.418 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:14:24.419 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:14:24.422 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9GGA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****vhZg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:00000009","TimeStamp":"2019-05-22T06:14:24.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:14:24.426 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"88fe6b58ec4c495e93d12b597332169d","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:14:24.794 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:14:24.798 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:14:24.798 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:14:24.803 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:14:24.806 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:14:24.812 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:14:24.812 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:14:24.813 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:14:24.814 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:14:24.814 +03:00 [DBG] Start userinfo request
2019-05-22 09:14:24.815 +03:00 [DBG] Bearer token found in header
2019-05-22 09:14:24.843 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:14:24.844 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:14:24.859 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:14:24.860 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:14:24.863 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:14:24.863 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505664,"exp":1558505784,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:14:24.866 +03:00 [DBG] Creating userinfo response
2019-05-22 09:14:24.866 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:14:24.867 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:14:24.887 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:14:24.888 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:14:24.888 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:14:24.896 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:14:24.901 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:14:24.902 +03:00 [DBG] End userinfo request
2019-05-22 09:15:25.309 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:15:25.310 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:15:25.311 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:15:25.312 +03:00 [DBG] Start authorize request
2019-05-22 09:15:25.313 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:15:25.314 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:15:25.341 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:15:25.341 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:15:25.348 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:15:25.359 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:15:25.365 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:15:25.376 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:15:25.377 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:15:25.377 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"6f88fb038168434584659c6f5f51c59d","UiLocales":null,"Nonce":"42d98c732d994bf59da41cf159d76641","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"6f88fb038168434584659c6f5f51c59d","nonce":"42d98c732d994bf59da41cf159d76641","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:15:25.383 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:15:25.383 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:15:25.384 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:15:25.386 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:15:25.418 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:15:25.419 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:15:25.425 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Mpvw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****YSFg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:0000000A","TimeStamp":"2019-05-22T06:15:25.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:15:25.431 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"6f88fb038168434584659c6f5f51c59d","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:15:26.014 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:15:26.018 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:15:26.018 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:15:26.022 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:15:26.025 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:15:26.025 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:15:26.025 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:15:26.026 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:15:26.026 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:15:26.027 +03:00 [DBG] Start userinfo request
2019-05-22 09:15:26.027 +03:00 [DBG] Bearer token found in header
2019-05-22 09:15:26.040 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:15:26.040 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:15:26.050 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:15:26.050 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:15:26.052 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:15:26.053 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505725,"exp":1558505845,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:15:26.054 +03:00 [DBG] Creating userinfo response
2019-05-22 09:15:26.055 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:15:26.055 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:15:26.059 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:15:26.059 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:15:26.060 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:15:26.063 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:15:26.066 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:15:26.066 +03:00 [DBG] End userinfo request
2019-05-22 09:16:26.303 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:16:26.305 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:16:26.306 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:16:26.308 +03:00 [DBG] Start authorize request
2019-05-22 09:16:26.309 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:16:26.311 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:16:26.357 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:16:26.358 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:16:26.377 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:16:26.409 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:16:26.426 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:16:26.459 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:16:26.460 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:16:26.462 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"9ab77c44eb1c45318401e0dee8fab263","UiLocales":null,"Nonce":"540fd582c7e8427a89d397cbb3c13c68","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"9ab77c44eb1c45318401e0dee8fab263","nonce":"540fd582c7e8427a89d397cbb3c13c68","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:16:26.480 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:16:26.482 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:16:26.483 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:16:26.484 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:16:26.504 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:16:26.506 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:16:26.516 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****34Ww","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6XCA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:0000000B","TimeStamp":"2019-05-22T06:16:26.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:16:26.525 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"9ab77c44eb1c45318401e0dee8fab263","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:16:26.981 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:16:26.983 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:16:26.984 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:16:27.004 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:16:27.007 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:16:27.007 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:16:27.008 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:16:27.008 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:16:27.008 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:16:27.009 +03:00 [DBG] Start userinfo request
2019-05-22 09:16:27.009 +03:00 [DBG] Bearer token found in header
2019-05-22 09:16:27.023 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:16:27.024 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:16:27.036 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:16:27.036 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:16:27.039 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:16:27.039 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505786,"exp":1558505906,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:16:27.041 +03:00 [DBG] Creating userinfo response
2019-05-22 09:16:27.041 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:16:27.042 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:16:27.046 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:16:27.046 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:16:27.047 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:16:27.050 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:16:27.058 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:16:27.059 +03:00 [DBG] End userinfo request
2019-05-22 09:17:27.295 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:17:27.297 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:17:27.298 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:17:27.299 +03:00 [DBG] Start authorize request
2019-05-22 09:17:27.300 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:17:27.301 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:17:27.341 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:17:27.342 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:17:27.356 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:17:27.395 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:17:27.410 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:17:27.431 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:17:27.432 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:17:27.434 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"373db319bb9b4f1382d024bec9755f26","UiLocales":null,"Nonce":"27d3f2ff9e2f4abb83b7e227f492211d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"373db319bb9b4f1382d024bec9755f26","nonce":"27d3f2ff9e2f4abb83b7e227f492211d","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:17:27.476 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:17:27.477 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:17:27.478 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:17:27.479 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:17:27.497 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:17:27.500 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:17:27.530 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****crbQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****PyEw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:0000000C","TimeStamp":"2019-05-22T06:17:27.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:17:27.537 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"373db319bb9b4f1382d024bec9755f26","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:17:27.966 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:17:27.976 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:17:27.977 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:17:27.981 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:17:27.984 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:17:27.985 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:17:27.986 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:17:27.986 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:17:27.987 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:17:27.987 +03:00 [DBG] Start userinfo request
2019-05-22 09:17:27.988 +03:00 [DBG] Bearer token found in header
2019-05-22 09:17:28.005 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:17:28.005 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:17:28.019 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:17:28.019 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:17:28.022 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:17:28.023 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505847,"exp":1558505967,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:17:28.025 +03:00 [DBG] Creating userinfo response
2019-05-22 09:17:28.026 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:17:28.026 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:17:28.032 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:17:28.033 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:17:28.033 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:17:28.039 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:17:28.046 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:17:28.046 +03:00 [DBG] End userinfo request
2019-05-22 09:18:28.283 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:18:28.284 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:18:28.284 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:18:28.285 +03:00 [DBG] Start authorize request
2019-05-22 09:18:28.285 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:18:28.286 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:18:28.303 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:18:28.303 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:18:28.309 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:18:28.320 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:18:28.327 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:18:28.335 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:18:28.335 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:18:28.336 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"558cdb22e4e443009e324538c1f8d517","UiLocales":null,"Nonce":"46e8ba3aa6b14d7095959cad7f6cb7de","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"558cdb22e4e443009e324538c1f8d517","nonce":"46e8ba3aa6b14d7095959cad7f6cb7de","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:18:28.340 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:18:28.341 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:18:28.341 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:18:28.341 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:18:28.347 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:18:28.354 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:18:28.358 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****RSEA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****iaog","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:0000000D","TimeStamp":"2019-05-22T06:18:28.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:18:28.361 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"558cdb22e4e443009e324538c1f8d517","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:18:28.781 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:18:28.785 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:18:28.786 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:18:28.800 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:18:28.803 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:18:28.804 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:18:28.805 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:18:28.805 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:18:28.806 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:18:28.806 +03:00 [DBG] Start userinfo request
2019-05-22 09:18:28.807 +03:00 [DBG] Bearer token found in header
2019-05-22 09:18:28.826 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:18:28.826 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:18:28.840 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:18:28.840 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:18:28.845 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:18:28.845 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505908,"exp":1558506028,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:18:28.848 +03:00 [DBG] Creating userinfo response
2019-05-22 09:18:28.848 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:18:28.849 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:18:28.855 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:18:28.856 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:18:28.857 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:18:28.864 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:18:28.868 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:18:28.869 +03:00 [DBG] End userinfo request
2019-05-22 09:19:29.308 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:19:29.312 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:19:29.315 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:19:29.317 +03:00 [DBG] Start authorize request
2019-05-22 09:19:29.318 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:19:29.319 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:19:29.349 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:19:29.350 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:19:29.358 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:19:29.370 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:19:29.376 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:19:29.385 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:19:29.386 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:19:29.386 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"a138943625da4355ae8d362ba3eb1dd7","UiLocales":null,"Nonce":"219fd2e18cdf415a85d25ea62ce56a38","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"ac2429ebd7fde5f3583e8a3eaed42f7a","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"a138943625da4355ae8d362ba3eb1dd7","nonce":"219fd2e18cdf415a85d25ea62ce56a38","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:19:29.392 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:19:29.393 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:19:29.393 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:19:29.394 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:19:29.401 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:19:29.401 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:19:29.405 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****jVIw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****CKJg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUF2BPCNED:0000000E","TimeStamp":"2019-05-22T06:19:29.0000000Z","ProcessId":19436,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:19:29.408 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"a138943625da4355ae8d362ba3eb1dd7","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:19:29.821 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:19:29.831 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:19:29.833 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:19:29.842 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:19:29.851 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:19:29.852 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:19:29.854 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:19:29.857 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:19:29.858 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:19:29.861 +03:00 [DBG] Start userinfo request
2019-05-22 09:19:29.864 +03:00 [DBG] Bearer token found in header
2019-05-22 09:19:29.945 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:19:29.946 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:19:29.992 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:19:29.993 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:19:30.004 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:19:30.006 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558505969,"exp":1558506089,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558442154,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:19:30.043 +03:00 [DBG] Creating userinfo response
2019-05-22 09:19:30.044 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:19:30.046 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:19:30.068 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:19:30.070 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:19:30.072 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:19:30.088 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:19:30.103 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:19:30.104 +03:00 [DBG] End userinfo request
2019-05-22 09:35:59.549 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-22 09:35:59.708 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-22 09:35:59.709 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-22 09:35:59.710 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-22 09:35:59.710 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-22 09:35:59.710 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-22 09:35:59.711 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-22 09:35:59.800 +03:00 [DBG] Starting grant removal
2019-05-22 09:37:56.437 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-05-22 09:37:58.482 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:37:58.486 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:37:58.509 +03:00 [DBG] Login Url: /Account/Login
2019-05-22 09:37:58.510 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-22 09:37:58.510 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-22 09:37:58.511 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-22 09:37:58.511 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-22 09:37:58.511 +03:00 [DBG] Error Url: /home/error
2019-05-22 09:37:58.511 +03:00 [DBG] Error Id Parameter: errorId
2019-05-22 09:37:58.553 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 09:37:58.574 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 09:37:58.575 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 09:37:58.579 +03:00 [DBG] Start discovery request
2019-05-22 09:37:59.248 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 09:37:59.337 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 09:37:59.343 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 09:37:59.345 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:37:59.350 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:37:59.351 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:37:59.355 +03:00 [DBG] Start authorize request
2019-05-22 09:37:59.360 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 09:37:59.365 +03:00 [DBG] No user present in authorize request
2019-05-22 09:37:59.370 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:37:59.658 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:37:59.664 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:37:59.719 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:37:59.794 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:37:59.823 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:37:59.848 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:37:59.867 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:37:59.890 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d49a41c367984bacaa98e23f52545fff","UiLocales":null,"Nonce":"3555dd5166a44b73a8633604ed8b325d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d49a41c367984bacaa98e23f52545fff","nonce":"3555dd5166a44b73a8633604ed8b325d"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:37:59.968 +03:00 [INF] Showing login: User is not authenticated
2019-05-22 09:37:59.993 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 09:37:59.996 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 09:38:00.200 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 09:38:00.201 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:38:00.216 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:38:00.217 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:38:00.221 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:38:00.229 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:38:00.233 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:38:00.239 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:38:00.239 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:38:00.259 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:38:00.259 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:38:03.621 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 09:38:03.623 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 09:38:03.623 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 09:38:03.678 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 09:38:03.679 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:38:03.696 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:38:03.697 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:38:03.702 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:38:03.714 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:38:03.718 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:38:03.726 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:38:03.726 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:38:04.053 +03:00 [DBG] Augmenting SignInContext
2019-05-22 09:38:04.055 +03:00 [DBG] Adding idp claim with value: local
2019-05-22 09:38:04.055 +03:00 [DBG] Adding amr claim with value: pwd
2019-05-22 09:38:04.056 +03:00 [DBG] Adding auth_time claim with value: 1558507084
2019-05-22 09:38:04.058 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 09:38:04.092 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-22 09:38:04.121 +03:00 [INF] {"Username":"gurkanindibay@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","DisplayName":"gurkanindibay@gmail.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMUG03548LF:00000003","TimeStamp":"2019-05-22T06:38:04.0000000Z","ProcessId":8468,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-22 09:38:04.151 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:38:04.152 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:38:04.168 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-22 09:38:04.170 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-22 09:38:04.171 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-22 09:38:04.180 +03:00 [DBG] Start authorize callback request
2019-05-22 09:38:04.204 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:38:04.206 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:38:04.247 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:38:04.248 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:38:04.265 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:38:04.294 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:38:04.311 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:38:04.339 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:38:04.341 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:38:04.343 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d49a41c367984bacaa98e23f52545fff","UiLocales":null,"Nonce":"3555dd5166a44b73a8633604ed8b325d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"607931e1570d6eef8ad36990a2b05cfc","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d49a41c367984bacaa98e23f52545fff","nonce":"3555dd5166a44b73a8633604ed8b325d"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:38:04.424 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:38:04.434 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:38:04.449 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:38:04.450 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:38:04.543 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:38:04.543 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:38:04.552 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****NP2w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****97Ww","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUG03548LF:00000004","TimeStamp":"2019-05-22T06:38:04.0000000Z","ProcessId":8468,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:38:04.556 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/#/auth-callback#","State":"d49a41c367984bacaa98e23f52545fff","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:38:04.591 +03:00 [DBG] Augmenting SignInContext
2019-05-22 09:38:04.594 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-22 09:38:10.501 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-05-22 09:38:10.506 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:38:10.507 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:38:10.507 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 09:38:10.508 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 09:38:10.509 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 09:38:10.510 +03:00 [DBG] Start discovery request
2019-05-22 09:38:10.537 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 09:38:10.557 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-05-22 09:38:10.560 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:38:10.561 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:38:10.561 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-22 09:38:10.562 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-22 09:38:10.562 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-22 09:38:10.568 +03:00 [DBG] Start key discovery request
2019-05-22 09:38:10.599 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:38:10.602 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:38:10.602 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:38:10.614 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-05-22 09:38:10.617 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-05-22 09:38:10.618 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-05-22 09:38:10.618 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 09:38:10.620 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 09:38:10.621 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 09:38:10.629 +03:00 [DBG] Start userinfo request
2019-05-22 09:38:10.635 +03:00 [DBG] Bearer token found in header
2019-05-22 09:38:10.683 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:38:10.683 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:38:10.698 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:38:10.698 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:38:10.702 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 09:38:10.703 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558507084,"exp":1558507204,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558507084,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 09:38:10.709 +03:00 [DBG] Creating userinfo response
2019-05-22 09:38:10.712 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:38:10.715 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:38:10.722 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:38:10.723 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 09:38:10.723 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 09:38:10.727 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:38:10.732 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 09:38:10.733 +03:00 [DBG] End userinfo request
2019-05-22 09:38:10.745 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-22 09:38:10.746 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-22 09:38:10.746 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-22 09:38:10.747 +03:00 [DBG] Rendering check session result
2019-05-22 09:39:10.756 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 09:39:10.757 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 09:39:10.758 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 09:39:10.758 +03:00 [DBG] Start authorize request
2019-05-22 09:39:10.759 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:39:10.759 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 09:39:10.776 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 09:39:10.777 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 09:39:10.783 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:39:10.798 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:39:10.803 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 09:39:10.815 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 09:39:10.815 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 09:39:10.816 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"29e3f97c22b44e5894d654810e180fcc","UiLocales":null,"Nonce":"81fd86c388a34ff8ab3a0a36bf275cc6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"607931e1570d6eef8ad36990a2b05cfc","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"29e3f97c22b44e5894d654810e180fcc","nonce":"81fd86c388a34ff8ab3a0a36bf275cc6","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 09:39:10.822 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 09:39:10.823 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 09:39:10.824 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 09:39:10.824 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 09:39:10.837 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 09:39:10.841 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 09:39:10.848 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****-XtQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****aZag","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUG03548LF:00000006","TimeStamp":"2019-05-22T06:39:10.0000000Z","ProcessId":8468,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 09:39:10.852 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"29e3f97c22b44e5894d654810e180fcc","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 09:52:40.244 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-22 09:52:40.270 +03:00 [DBG] Stopping grant removal
2019-05-22 17:21:08.685 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-22 17:21:08.886 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-22 17:21:08.887 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-22 17:21:08.889 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-22 17:21:08.890 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-22 17:21:08.891 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-22 17:21:08.892 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-22 17:21:08.996 +03:00 [DBG] Starting grant removal
2019-05-22 17:21:56.030 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 17:21:57.747 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 17:21:57.752 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 17:21:57.781 +03:00 [DBG] Login Url: /Account/Login
2019-05-22 17:21:57.781 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-22 17:21:57.782 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-22 17:21:57.783 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-22 17:21:57.785 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-22 17:21:57.785 +03:00 [DBG] Error Url: /home/error
2019-05-22 17:21:57.786 +03:00 [DBG] Error Id Parameter: errorId
2019-05-22 17:21:57.805 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 17:21:57.824 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 17:21:57.826 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 17:21:57.831 +03:00 [DBG] Start discovery request
2019-05-22 17:21:58.540 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 17:21:58.616 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 17:21:58.617 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 17:21:58.620 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 17:21:58.625 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 17:21:58.626 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 17:21:58.632 +03:00 [DBG] Start authorize request
2019-05-22 17:21:58.637 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 17:21:58.643 +03:00 [DBG] No user present in authorize request
2019-05-22 17:21:58.649 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 17:21:58.949 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 17:21:58.954 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 17:21:59.014 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:21:59.091 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 17:21:59.112 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:21:59.120 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 17:21:59.131 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 17:21:59.141 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"a50b596975274cf8aac6978c0c25c034","UiLocales":null,"Nonce":"249d9c8c6f31476fafc74cb602c457db","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"a50b596975274cf8aac6978c0c25c034","nonce":"249d9c8c6f31476fafc74cb602c457db"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 17:21:59.156 +03:00 [INF] Showing login: User is not authenticated
2019-05-22 17:21:59.168 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 17:21:59.169 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 17:21:59.343 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 17:21:59.344 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 17:21:59.362 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 17:21:59.362 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 17:21:59.367 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:21:59.375 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 17:21:59.380 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:21:59.387 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 17:21:59.388 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 17:21:59.400 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 17:21:59.401 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 17:22:01.054 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 17:22:01.056 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 17:22:01.057 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 17:22:01.096 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 17:22:01.098 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 17:22:01.116 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 17:22:01.116 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 17:22:01.123 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:22:01.131 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 17:22:01.135 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:22:01.143 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 17:22:01.144 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 17:22:01.385 +03:00 [DBG] Augmenting SignInContext
2019-05-22 17:22:01.388 +03:00 [DBG] Adding idp claim with value: local
2019-05-22 17:22:01.388 +03:00 [DBG] Adding amr claim with value: pwd
2019-05-22 17:22:01.389 +03:00 [DBG] Adding auth_time claim with value: 1558534921
2019-05-22 17:22:01.391 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-22 17:22:01.398 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-22 17:22:01.410 +03:00 [INF] {"Username":"gurkanindibay@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","DisplayName":"gurkanindibay@gmail.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMUO3C0TT3C:00000003","TimeStamp":"2019-05-22T14:22:01.0000000Z","ProcessId":20320,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-22 17:22:01.426 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 17:22:01.426 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 17:22:01.437 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-22 17:22:01.439 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-22 17:22:01.440 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-22 17:22:01.445 +03:00 [DBG] Start authorize callback request
2019-05-22 17:22:01.450 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 17:22:01.451 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 17:22:01.463 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 17:22:01.463 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 17:22:01.469 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:22:01.476 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 17:22:01.481 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:22:01.488 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 17:22:01.489 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 17:22:01.490 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"a50b596975274cf8aac6978c0c25c034","UiLocales":null,"Nonce":"249d9c8c6f31476fafc74cb602c457db","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"034e79cdeba1704199e70911637d65fd","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"a50b596975274cf8aac6978c0c25c034","nonce":"249d9c8c6f31476fafc74cb602c457db"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 17:22:01.530 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 17:22:01.535 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 17:22:01.545 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 17:22:01.546 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 17:22:01.607 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 17:22:01.609 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 17:22:01.618 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****xqKw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Kb3g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUO3C0TT3C:00000004","TimeStamp":"2019-05-22T14:22:01.0000000Z","ProcessId":20320,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 17:22:01.623 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","State":"a50b596975274cf8aac6978c0c25c034","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 17:22:01.640 +03:00 [DBG] Augmenting SignInContext
2019-05-22 17:22:01.640 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-22 17:22:09.028 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 17:22:09.034 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 17:22:09.035 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 17:22:09.036 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 17:22:09.037 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 17:22:09.038 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 17:22:09.040 +03:00 [DBG] Start discovery request
2019-05-22 17:22:09.061 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 17:22:09.172 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.7.130:4200
2019-05-22 17:22:09.181 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 17:22:09.184 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 17:22:09.185 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-22 17:22:09.187 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-22 17:22:09.187 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-22 17:22:09.192 +03:00 [DBG] Start key discovery request
2019-05-22 17:22:09.279 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-22 17:22:09.283 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 17:22:09.284 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 17:22:09.292 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-22 17:22:09.295 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 17:22:09.296 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 17:22:09.296 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-22 17:22:09.299 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-22 17:22:09.300 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-22 17:22:09.307 +03:00 [DBG] Start userinfo request
2019-05-22 17:22:09.311 +03:00 [DBG] Bearer token found in header
2019-05-22 17:22:09.360 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 17:22:09.360 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 17:22:09.377 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 17:22:09.378 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 17:22:09.381 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-22 17:22:09.383 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558534921,"exp":1558535041,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"360b380a-065c-4ab2-bfa5-08ba44582803","auth_time":1558534921,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-22 17:22:09.390 +03:00 [DBG] Creating userinfo response
2019-05-22 17:22:09.393 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 17:22:09.396 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 17:22:09.410 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:22:09.411 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-22 17:22:09.412 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-22 17:22:09.417 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:22:09.421 +03:00 [INF] Profile service returned the following claim types: sub email name preferred_username email email_verified
2019-05-22 17:22:09.423 +03:00 [DBG] End userinfo request
2019-05-22 17:22:09.445 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-22 17:22:09.448 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-22 17:22:09.449 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-22 17:22:09.452 +03:00 [DBG] Rendering check session result
2019-05-22 17:22:32.931 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-22 17:22:32.944 +03:00 [DBG] Stopping grant removal
2019-05-22 17:23:20.338 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-22 17:23:20.492 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-22 17:23:20.494 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-22 17:23:20.495 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-22 17:23:20.496 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-22 17:23:20.497 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-22 17:23:20.498 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-22 17:23:20.581 +03:00 [DBG] Starting grant removal
2019-05-22 17:23:23.349 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-22 17:23:23.375 +03:00 [DBG] Stopping grant removal
2019-05-22 17:26:39.953 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-22 17:26:40.107 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-22 17:26:40.108 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-22 17:26:40.110 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-22 17:26:40.111 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-22 17:26:40.112 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-22 17:26:40.113 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-22 17:26:40.197 +03:00 [DBG] Starting grant removal
2019-05-22 17:26:44.161 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-22 17:26:44.175 +03:00 [DBG] Stopping grant removal
2019-05-22 17:27:16.513 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-22 17:27:16.671 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-22 17:27:16.672 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-22 17:27:16.674 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-22 17:27:16.675 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-22 17:27:16.676 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-22 17:27:16.677 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-22 17:27:16.770 +03:00 [DBG] Starting grant removal
2019-05-22 17:27:37.795 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 17:27:39.602 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 17:27:39.608 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 17:27:39.641 +03:00 [DBG] Login Url: /Account/Login
2019-05-22 17:27:39.641 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-22 17:27:39.643 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-22 17:27:39.644 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-22 17:27:39.645 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-22 17:27:39.646 +03:00 [DBG] Error Url: /home/error
2019-05-22 17:27:39.647 +03:00 [DBG] Error Id Parameter: errorId
2019-05-22 17:27:39.665 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 17:27:39.679 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 17:27:39.680 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 17:27:39.684 +03:00 [DBG] Start discovery request
2019-05-22 17:27:40.387 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 17:27:40.445 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 17:27:40.464 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 17:27:40.465 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 17:27:40.467 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 17:27:40.469 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 17:27:40.470 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 17:27:40.471 +03:00 [DBG] Start discovery request
2019-05-22 17:27:40.482 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-22 17:27:40.484 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-22 17:27:40.485 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-22 17:27:40.485 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 17:27:40.487 +03:00 [DBG] Rendering check session result
2019-05-22 17:27:40.519 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 17:27:40.530 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 17:27:40.531 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 17:27:40.537 +03:00 [DBG] Start authorize request
2019-05-22 17:27:40.552 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 17:27:40.562 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 17:27:40.833 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 17:27:40.840 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 17:27:40.956 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:27:41.015 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 17:27:41.029 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 17:27:41.038 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 17:27:41.046 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 17:27:41.056 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"7c98d230598f40299ee7db04ac29f6d9","UiLocales":null,"Nonce":"9cc956d13cec441fafbd8ee6a6679860","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"034e79cdeba1704199e70911637d65fd","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"7c98d230598f40299ee7db04ac29f6d9","nonce":"9cc956d13cec441fafbd8ee6a6679860"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 17:27:41.205 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 17:27:41.211 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 17:27:41.220 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 17:27:41.221 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 17:27:41.474 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 17:27:41.475 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 17:27:41.490 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****PP6A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****KQDQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUO6HS2SRR:00000002","TimeStamp":"2019-05-22T14:27:41.0000000Z","ProcessId":10300,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 17:27:41.497 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","State":"7c98d230598f40299ee7db04ac29f6d9","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 17:27:48.741 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 17:27:48.745 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 17:27:48.746 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 17:27:48.747 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 17:27:48.748 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 17:27:48.749 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 17:27:48.750 +03:00 [DBG] Start discovery request
2019-05-22 17:27:48.770 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 17:27:48.774 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 17:27:48.777 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 17:27:48.778 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 17:27:48.779 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 17:27:48.780 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 17:27:48.781 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 17:27:48.782 +03:00 [DBG] Start discovery request
2019-05-22 17:27:48.795 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 17:27:48.845 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-22 17:27:48.846 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-22 17:27:48.847 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-22 17:27:48.848 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.7.130:4200
2019-05-22 17:27:48.849 +03:00 [DBG] Rendering check session result
2019-05-22 17:27:48.852 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 17:27:48.853 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 17:27:48.854 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-22 17:27:48.857 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-22 17:27:48.859 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-22 17:27:48.865 +03:00 [DBG] Start key discovery request
2019-05-22 18:05:46.818 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 18:05:46.821 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 18:05:46.821 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 18:05:46.822 +03:00 [DBG] Start authorize request
2019-05-22 18:05:46.823 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 18:05:46.824 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 18:05:46.850 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:05:46.851 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:05:46.861 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:05:46.877 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:05:46.883 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:05:46.896 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:05:46.899 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 18:05:46.900 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d52d6bbc2f054e178bbb93238cf59c59","UiLocales":null,"Nonce":"6bf5bf93c6594ce0bb079f40f7c9d1f4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"034e79cdeba1704199e70911637d65fd","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d52d6bbc2f054e178bbb93238cf59c59","nonce":"6bf5bf93c6594ce0bb079f40f7c9d1f4"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 18:05:46.906 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 18:05:46.906 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 18:05:46.907 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 18:05:46.907 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 18:05:46.915 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 18:05:46.916 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 18:05:46.918 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****glcA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****BGXw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUO6HS2SRT:00000001","TimeStamp":"2019-05-22T15:05:46.0000000Z","ProcessId":10300,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 18:05:46.922 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","State":"d52d6bbc2f054e178bbb93238cf59c59","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 18:05:54.020 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 18:05:54.024 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:05:54.025 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:05:54.025 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:05:54.026 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:05:54.027 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:05:54.028 +03:00 [DBG] Start discovery request
2019-05-22 18:05:54.050 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:05:54.055 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 18:05:54.058 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:05:54.059 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:05:54.060 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:05:54.061 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:05:54.062 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:05:54.063 +03:00 [DBG] Start discovery request
2019-05-22 18:05:54.076 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:05:54.280 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-22 18:05:54.282 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-22 18:05:54.283 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-22 18:05:54.284 +03:00 [DBG] Rendering check session result
2019-05-22 18:05:54.290 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.7.130:4200
2019-05-22 18:05:54.293 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:05:54.294 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:05:54.295 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-22 18:05:54.297 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-22 18:05:54.298 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-22 18:05:54.299 +03:00 [DBG] Start key discovery request
2019-05-22 18:06:19.757 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 18:06:19.761 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 18:06:19.762 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 18:06:19.764 +03:00 [DBG] Start authorize request
2019-05-22 18:06:19.766 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 18:06:19.767 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 18:06:19.786 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:06:19.787 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:06:19.795 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:06:19.807 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:06:19.813 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:06:19.827 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:06:19.828 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 18:06:19.829 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"13b599c7de2b401a9941bbdb90e91263","UiLocales":null,"Nonce":"6988fa1e9625463195bef5f2a7365f9f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"034e79cdeba1704199e70911637d65fd","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"13b599c7de2b401a9941bbdb90e91263","nonce":"6988fa1e9625463195bef5f2a7365f9f"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 18:06:19.838 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 18:06:19.838 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 18:06:19.839 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 18:06:19.839 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 18:06:19.849 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 18:06:19.850 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 18:06:19.852 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****YPPQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****TF1Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUO6HS2SRT:00000003","TimeStamp":"2019-05-22T15:06:19.0000000Z","ProcessId":10300,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 18:06:19.858 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","State":"13b599c7de2b401a9941bbdb90e91263","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 18:06:27.347 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 18:06:27.351 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:06:27.352 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:06:27.353 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:06:27.354 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:06:27.356 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:06:27.358 +03:00 [DBG] Start discovery request
2019-05-22 18:06:27.379 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:06:27.384 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 18:06:27.387 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:06:27.388 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:06:27.389 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:06:27.391 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:06:27.394 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:06:27.400 +03:00 [DBG] Start discovery request
2019-05-22 18:06:27.416 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:06:27.438 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-22 18:06:27.439 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-22 18:06:27.441 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-22 18:06:27.442 +03:00 [DBG] Rendering check session result
2019-05-22 18:06:27.473 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.7.130:4200
2019-05-22 18:06:27.476 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:06:27.477 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:06:27.478 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-22 18:06:27.479 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-22 18:06:27.479 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-22 18:06:27.480 +03:00 [DBG] Start key discovery request
2019-05-22 18:11:34.024 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-22 18:11:34.073 +03:00 [DBG] Stopping grant removal
2019-05-22 18:11:43.046 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-22 18:11:43.204 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-22 18:11:43.205 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-22 18:11:43.207 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-22 18:11:43.209 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-22 18:11:43.210 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-22 18:11:43.211 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-22 18:11:43.306 +03:00 [DBG] Starting grant removal
2019-05-22 18:12:12.485 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-05-22 18:12:14.186 +03:00 [DBG] Origin http://localhost:4200 is allowed: false
2019-05-22 18:12:14.191 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:4200
2019-05-22 18:12:14.214 +03:00 [DBG] Login Url: /Account/Login
2019-05-22 18:12:14.215 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-22 18:12:14.216 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-22 18:12:14.216 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-22 18:12:14.217 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-22 18:12:14.218 +03:00 [DBG] Error Url: /home/error
2019-05-22 18:12:14.220 +03:00 [DBG] Error Id Parameter: errorId
2019-05-22 18:12:14.235 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:12:14.248 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:12:14.249 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:12:14.253 +03:00 [DBG] Start discovery request
2019-05-22 18:12:14.897 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:13:05.774 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-05-22 18:13:05.790 +03:00 [DBG] Origin http://localhost:4200 is allowed: false
2019-05-22 18:13:05.791 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:4200
2019-05-22 18:13:05.792 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:13:05.794 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:13:05.795 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:13:05.796 +03:00 [DBG] Start discovery request
2019-05-22 18:13:05.812 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:13:09.762 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:13:09.764 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:13:09.765 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:13:09.767 +03:00 [DBG] Start discovery request
2019-05-22 18:13:09.781 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:13:29.060 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 18:13:29.065 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:13:29.066 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:13:29.069 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:13:29.071 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:13:29.075 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:13:29.076 +03:00 [DBG] Start discovery request
2019-05-22 18:13:29.093 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:13:29.165 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-22 18:13:29.169 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-22 18:13:29.170 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-22 18:13:29.172 +03:00 [DBG] Rendering check session result
2019-05-22 18:13:30.940 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 18:13:30.946 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 18:13:30.948 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 18:13:30.955 +03:00 [DBG] Start authorize request
2019-05-22 18:13:30.964 +03:00 [DBG] User in authorize request: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 18:13:30.969 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 18:13:31.256 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:13:31.261 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:13:31.318 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:13:31.381 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:13:31.397 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:13:31.407 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:13:31.415 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 18:13:31.426 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d6029ea8c26e498b93420c6da940acd2","UiLocales":null,"Nonce":"e949f4364e6a450aa590e1551994f960","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"034e79cdeba1704199e70911637d65fd","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d6029ea8c26e498b93420c6da940acd2","nonce":"e949f4364e6a450aa590e1551994f960"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 18:13:31.585 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 18:13:31.591 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 18:13:31.600 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 18:13:31.601 +03:00 [DBG] Getting claims for access token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803
2019-05-22 18:13:31.805 +03:00 [DBG] Getting claims for identity token for subject: 360b380a-065c-4ab2-bfa5-08ba44582803 and client: promanage_spa
2019-05-22 18:13:31.806 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 18:13:31.819 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****lAlQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****-EzA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUOVF04I77:00000003","TimeStamp":"2019-05-22T15:13:31.0000000Z","ProcessId":20716,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 18:13:31.825 +03:00 [INF] Authorize endpoint response
{"SubjectId":"360b380a-065c-4ab2-bfa5-08ba44582803","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","State":"d6029ea8c26e498b93420c6da940acd2","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 18:13:39.276 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 18:13:39.280 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:13:39.281 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:13:39.282 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:13:39.283 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:13:39.284 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:13:39.286 +03:00 [DBG] Start discovery request
2019-05-22 18:13:39.304 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:13:39.308 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 18:13:39.312 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:13:39.313 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:13:39.314 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:13:39.315 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:13:39.316 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:13:39.318 +03:00 [DBG] Start discovery request
2019-05-22 18:13:39.332 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:13:39.409 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-22 18:13:39.410 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-22 18:13:39.411 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-22 18:13:39.411 +03:00 [DBG] Rendering check session result
2019-05-22 18:13:39.435 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.7.130:4200
2019-05-22 18:13:39.439 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:13:39.440 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:13:39.441 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-22 18:13:39.442 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-22 18:13:39.443 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-22 18:13:39.447 +03:00 [DBG] Start key discovery request
2019-05-22 18:14:40.294 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://10.1.7.130:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:14:40.393 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://10.1.7.130:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:16:53.394 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://10.1.7.130:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:16:53.403 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://10.1.7.130:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:16:53.449 +03:00 [WRN] User 3befcd10-731f-45cf-867b-d2cb928f3bef validation failed: DuplicateUserName.
2019-05-22 18:18:10.738 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://10.1.7.130:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:18:10.745 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://10.1.7.130:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:18:10.758 +03:00 [WRN] User f054654e-6bd6-419b-a455-7550e7f09e79 validation failed: DuplicateUserName.
2019-05-22 18:18:12.478 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://10.1.7.130:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:18:12.491 +03:00 [WRN] User 986d3751-bae1-47c4-aebf-84cd27165b71 validation failed: DuplicateUserName.
2019-05-22 18:18:13.768 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://10.1.7.130:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:18:13.782 +03:00 [WRN] User 7d4656bf-7bdc-4203-847a-a07252c62e37 validation failed: DuplicateUserName.
2019-05-22 18:18:45.683 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-22 18:18:45.693 +03:00 [DBG] Stopping grant removal
2019-05-22 18:18:52.689 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-22 18:18:52.861 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-22 18:18:52.864 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-22 18:18:52.865 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-22 18:18:52.866 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-22 18:18:52.867 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-22 18:18:52.869 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-22 18:18:52.970 +03:00 [DBG] Starting grant removal
2019-05-22 18:18:56.227 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 18:18:57.950 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:18:57.956 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:18:57.980 +03:00 [DBG] Login Url: /Account/Login
2019-05-22 18:18:57.980 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-22 18:18:57.981 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-22 18:18:57.982 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-22 18:18:57.983 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-22 18:18:57.983 +03:00 [DBG] Error Url: /home/error
2019-05-22 18:18:57.984 +03:00 [DBG] Error Id Parameter: errorId
2019-05-22 18:18:58.000 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:18:58.012 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:18:58.013 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:18:58.018 +03:00 [DBG] Start discovery request
2019-05-22 18:18:58.689 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:18:58.791 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 18:18:58.809 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 18:18:58.811 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 18:18:58.816 +03:00 [DBG] Start authorize request
2019-05-22 18:18:58.825 +03:00 [DBG] No user present in authorize request
2019-05-22 18:18:58.832 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 18:18:59.113 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:18:59.118 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:18:59.178 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:18:59.240 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:18:59.260 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:18:59.270 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:18:59.278 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 18:18:59.289 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"f00f43427e414305aaca5ec370c1d1e5","UiLocales":null,"Nonce":"b9864bc2a9bc4b19b9616b01b2335a10","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"f00f43427e414305aaca5ec370c1d1e5","nonce":"b9864bc2a9bc4b19b9616b01b2335a10"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 18:18:59.306 +03:00 [INF] Showing login: User is not authenticated
2019-05-22 18:18:59.431 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 18:18:59.448 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:18:59.449 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:18:59.453 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:18:59.461 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:18:59.465 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:18:59.472 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:18:59.473 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 18:18:59.485 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:18:59.485 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:19:22.178 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://10.1.7.130:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:19:22.187 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://10.1.7.130:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:19:22.364 +03:00 [WRN] User 89cd944a-1cfd-4a24-9768-f1d44305b8de validation failed: DuplicateUserName.
2019-05-22 18:21:40.077 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 18:21:40.081 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:21:40.082 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:21:40.083 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:21:40.085 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:21:40.093 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:21:40.095 +03:00 [DBG] Start discovery request
2019-05-22 18:21:40.109 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:21:40.138 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-22 18:21:40.140 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-22 18:21:40.141 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-22 18:21:40.143 +03:00 [DBG] Start authorize request
2019-05-22 18:21:40.145 +03:00 [DBG] No user present in authorize request
2019-05-22 18:21:40.145 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 18:21:40.165 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:21:40.166 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:21:40.174 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:21:40.187 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:21:40.195 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:21:40.206 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:21:40.207 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 18:21:40.208 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d74e251181a3423fa198bf70aff45d0f","UiLocales":null,"Nonce":"5681374bbf114bc3bdc948f51dbe7e02","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d74e251181a3423fa198bf70aff45d0f","nonce":"5681374bbf114bc3bdc948f51dbe7e02"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 18:21:40.211 +03:00 [INF] Showing login: User is not authenticated
2019-05-22 18:21:40.218 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 18:21:40.232 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:21:40.232 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:21:40.238 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:21:40.249 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:21:40.254 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:21:40.263 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:21:40.264 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 18:21:40.278 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:21:40.279 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:21:42.229 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-22 18:21:42.260 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 18:21:42.276 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:21:42.276 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:21:42.285 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:21:42.296 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:21:42.302 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:21:42.314 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:21:42.315 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 18:21:42.433 +03:00 [DBG] Augmenting SignInContext
2019-05-22 18:21:42.435 +03:00 [DBG] Adding idp claim with value: local
2019-05-22 18:21:42.436 +03:00 [DBG] Adding amr claim with value: pwd
2019-05-22 18:21:42.437 +03:00 [DBG] Adding auth_time claim with value: 1558538502
2019-05-22 18:21:42.445 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-22 18:21:42.457 +03:00 [INF] {"Username":"gurkanindibay@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","DisplayName":"gurkanindibay@gmail.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMUP37AEOPG:00000003","TimeStamp":"2019-05-22T15:21:42.0000000Z","ProcessId":4272,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-22 18:21:42.472 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:21:42.472 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:21:42.481 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-22 18:21:42.483 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-22 18:21:42.484 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-22 18:21:42.490 +03:00 [DBG] Start authorize callback request
2019-05-22 18:21:42.494 +03:00 [DBG] User in authorize request: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-22 18:21:42.495 +03:00 [DBG] Start authorize request protocol validation
2019-05-22 18:21:42.510 +03:00 [DBG] promanage_spa found in database: true
2019-05-22 18:21:42.511 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-22 18:21:42.515 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:21:42.523 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:21:42.528 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-22 18:21:42.536 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-22 18:21:42.537 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-22 18:21:42.538 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d74e251181a3423fa198bf70aff45d0f","UiLocales":null,"Nonce":"5681374bbf114bc3bdc948f51dbe7e02","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"505c8ae4fee1616bec1117fbcc14c799","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d74e251181a3423fa198bf70aff45d0f","nonce":"5681374bbf114bc3bdc948f51dbe7e02"},"$type":"AuthorizeRequestValidationLog"}
2019-05-22 18:21:42.575 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-22 18:21:42.580 +03:00 [DBG] Creating Implicit Flow response.
2019-05-22 18:21:42.590 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-22 18:21:42.590 +03:00 [DBG] Getting claims for access token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-22 18:21:42.698 +03:00 [DBG] Getting claims for identity token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9 and client: promanage_spa
2019-05-22 18:21:42.699 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-22 18:21:42.710 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****jToA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****J0zw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMUP37AEOPG:00000004","TimeStamp":"2019-05-22T15:21:42.0000000Z","ProcessId":4272,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-22 18:21:42.715 +03:00 [INF] Authorize endpoint response
{"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","State":"d74e251181a3423fa198bf70aff45d0f","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-22 18:21:42.732 +03:00 [DBG] Augmenting SignInContext
2019-05-22 18:21:42.733 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-22 18:21:50.064 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-22 18:21:50.070 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:21:50.071 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:21:50.072 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-22 18:21:50.073 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-22 18:21:50.074 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-22 18:21:50.075 +03:00 [DBG] Start discovery request
2019-05-22 18:21:50.096 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-22 18:21:50.132 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.7.130:4200
2019-05-22 18:21:50.136 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-22 18:21:50.137 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-22 18:21:50.138 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-22 18:21:50.139 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-22 18:21:50.140 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-22 18:21:50.145 +03:00 [DBG] Start key discovery request
2019-05-22 19:18:53.085 +03:00 [INF] Removing 0 grants
2019-05-22 20:18:53.104 +03:00 [INF] Removing 0 grants
2019-05-22 21:18:53.128 +03:00 [INF] Removing 0 grants
2019-05-22 22:18:53.157 +03:00 [INF] Removing 0 grants
2019-05-22 23:18:53.176 +03:00 [INF] Removing 0 grants
2019-05-23 00:18:53.209 +03:00 [INF] Removing 0 grants
2019-05-23 01:18:53.237 +03:00 [INF] Removing 0 grants
2019-05-23 02:18:53.261 +03:00 [INF] Removing 0 grants
2019-05-23 03:18:53.277 +03:00 [INF] Removing 0 grants
2019-05-23 04:18:53.303 +03:00 [INF] Removing 0 grants
2019-05-23 05:18:53.327 +03:00 [INF] Removing 0 grants
2019-05-23 06:18:53.347 +03:00 [INF] Removing 0 grants
2019-05-23 07:18:53.367 +03:00 [INF] Removing 0 grants
2019-05-23 08:17:51.322 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-23 08:17:51.353 +03:00 [DBG] Stopping grant removal
2019-05-23 08:21:18.314 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-23 08:21:18.479 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-23 08:21:18.481 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-23 08:21:18.484 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-23 08:21:18.485 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-23 08:21:18.485 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-23 08:21:18.486 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-23 08:21:18.574 +03:00 [DBG] Starting grant removal
2019-05-23 08:21:20.077 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-23 08:21:20.087 +03:00 [DBG] Stopping grant removal
2019-05-23 08:25:22.074 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-23 08:25:22.239 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-23 08:25:22.241 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-23 08:25:22.242 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-23 08:25:22.243 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-23 08:25:22.244 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-23 08:25:22.245 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-23 08:25:22.340 +03:00 [DBG] Starting grant removal
2019-05-23 09:25:24.205 +03:00 [INF] Removing 0 grants
2019-05-23 10:25:24.252 +03:00 [INF] Removing 0 grants
2019-05-23 10:54:06.279 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-23 10:54:06.657 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:54:06.659 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:54:06.685 +03:00 [DBG] Login Url: /Account/Login
2019-05-23 10:54:06.686 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-23 10:54:06.687 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-23 10:54:06.688 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-23 10:54:06.690 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-23 10:54:06.692 +03:00 [DBG] Error Url: /home/error
2019-05-23 10:54:06.694 +03:00 [DBG] Error Id Parameter: errorId
2019-05-23 10:54:06.743 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-23 10:54:06.766 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-23 10:54:06.768 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-23 10:54:06.774 +03:00 [DBG] Start discovery request
2019-05-23 10:54:07.538 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-23 10:54:07.975 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-23 10:54:07.979 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-23 10:54:07.980 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-23 10:54:07.984 +03:00 [DBG] Start authorize request
2019-05-23 10:54:07.993 +03:00 [DBG] User in authorize request: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:54:07.999 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:54:08.264 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:54:08.269 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:54:08.358 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:54:08.451 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:54:08.467 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:54:08.479 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:54:08.486 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:54:08.497 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"11b7324907684842bd6a6233eb108df0","UiLocales":null,"Nonce":"d535824717894e54866f8441d16f3fd9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"505c8ae4fee1616bec1117fbcc14c799","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"11b7324907684842bd6a6233eb108df0","nonce":"d535824717894e54866f8441d16f3fd9"},"$type":"AuthorizeRequestValidationLog"}
2019-05-23 10:54:08.526 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-23 10:54:08.532 +03:00 [DBG] Creating Implicit Flow response.
2019-05-23 10:54:08.550 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-23 10:54:08.551 +03:00 [DBG] Getting claims for access token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:54:08.633 +03:00 [DBG] Getting claims for identity token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9 and client: promanage_spa
2019-05-23 10:54:08.635 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-23 10:54:08.652 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Hjwg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qbxQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMVAFA9K69J:00000001","TimeStamp":"2019-05-23T07:54:08.0000000Z","ProcessId":5972,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-23 10:54:08.659 +03:00 [INF] Authorize endpoint response
{"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","State":"11b7324907684842bd6a6233eb108df0","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-23 10:54:17.667 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-23 10:54:17.674 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:54:17.675 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:54:17.676 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-23 10:54:17.678 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-23 10:54:17.679 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-23 10:54:17.680 +03:00 [DBG] Start discovery request
2019-05-23 10:54:17.703 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-23 10:54:17.740 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.7.130:4200
2019-05-23 10:54:17.743 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:54:17.744 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:54:17.745 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-23 10:54:17.746 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-23 10:54:17.747 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-23 10:54:17.754 +03:00 [DBG] Start key discovery request
2019-05-23 10:54:17.832 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:54:17.835 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:54:17.836 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:54:17.845 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:54:17.852 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:54:17.853 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:54:17.857 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-23 10:54:17.859 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-23 10:54:17.860 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-23 10:54:17.868 +03:00 [DBG] Start userinfo request
2019-05-23 10:54:17.872 +03:00 [DBG] Bearer token found in header
2019-05-23 10:54:17.938 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:54:17.938 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:54:17.958 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:54:17.959 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:54:17.964 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-23 10:54:17.966 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558598048,"exp":1558598168,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","auth_time":1558538502,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-23 10:54:17.976 +03:00 [DBG] Creating userinfo response
2019-05-23 10:54:17.991 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:54:17.994 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:54:18.006 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:54:18.007 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-23 10:54:18.008 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:54:18.013 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:54:18.020 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-05-23 10:54:18.022 +03:00 [DBG] End userinfo request
2019-05-23 10:54:18.060 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-23 10:54:18.062 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-23 10:54:18.069 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-23 10:54:18.076 +03:00 [DBG] Rendering check session result
2019-05-23 10:55:06.918 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-23 10:55:06.923 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:55:06.925 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:55:06.926 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-23 10:55:06.927 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-23 10:55:06.928 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-23 10:55:06.929 +03:00 [DBG] Start discovery request
2019-05-23 10:55:06.938 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-23 10:55:06.972 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-23 10:55:06.974 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-23 10:55:06.978 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-23 10:55:06.979 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-23 10:55:06.980 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-23 10:55:06.982 +03:00 [DBG] Start authorize request
2019-05-23 10:55:06.983 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-23 10:55:06.984 +03:00 [DBG] No user present in authorize request
2019-05-23 10:55:06.985 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:55:07.005 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:07.010 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:07.018 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:07.037 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:55:07.046 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:07.064 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:55:07.065 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:55:07.066 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"37e1e597640742e6975c6669bc1f3e66","UiLocales":null,"Nonce":"3e2784678078416ab90ebf1c5921b810","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"37e1e597640742e6975c6669bc1f3e66","nonce":"3e2784678078416ab90ebf1c5921b810"},"$type":"AuthorizeRequestValidationLog"}
2019-05-23 10:55:07.070 +03:00 [INF] Showing login: User is not authenticated
2019-05-23 10:55:07.080 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-23 10:55:07.081 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-23 10:55:07.236 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-23 10:55:07.237 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:55:07.249 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:07.249 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:07.255 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:07.265 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:55:07.271 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:07.279 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:55:07.280 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:55:07.293 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:07.294 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:09.886 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-23 10:55:09.888 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-23 10:55:09.889 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-23 10:55:09.925 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-23 10:55:09.926 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:55:09.940 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:09.941 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:09.946 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:09.952 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:55:09.958 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:09.965 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:55:09.966 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:55:10.019 +03:00 [DBG] Augmenting SignInContext
2019-05-23 10:55:10.022 +03:00 [DBG] Adding idp claim with value: local
2019-05-23 10:55:10.022 +03:00 [DBG] Adding amr claim with value: pwd
2019-05-23 10:55:10.024 +03:00 [DBG] Adding auth_time claim with value: 1558598110
2019-05-23 10:55:10.026 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-05-23 10:55:10.030 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-23 10:55:10.034 +03:00 [INF] {"Username":"gurkanindibay@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","DisplayName":"gurkanindibay@gmail.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMVAFA9K69P:00000003","TimeStamp":"2019-05-23T07:55:10.0000000Z","ProcessId":5972,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-23 10:55:10.047 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:10.047 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:10.052 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-23 10:55:10.053 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-23 10:55:10.054 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-23 10:55:10.059 +03:00 [DBG] Start authorize callback request
2019-05-23 10:55:10.062 +03:00 [DBG] User in authorize request: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:55:10.064 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:55:10.093 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:10.093 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:10.098 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:10.108 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:55:10.114 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:10.131 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:55:10.132 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:55:10.132 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"37e1e597640742e6975c6669bc1f3e66","UiLocales":null,"Nonce":"3e2784678078416ab90ebf1c5921b810","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"e667324a29c5a9a950ba5b4e5980bfed","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"37e1e597640742e6975c6669bc1f3e66","nonce":"3e2784678078416ab90ebf1c5921b810"},"$type":"AuthorizeRequestValidationLog"}
2019-05-23 10:55:10.139 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-23 10:55:10.139 +03:00 [DBG] Creating Implicit Flow response.
2019-05-23 10:55:10.140 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-23 10:55:10.140 +03:00 [DBG] Getting claims for access token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:55:10.147 +03:00 [DBG] Getting claims for identity token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9 and client: promanage_spa
2019-05-23 10:55:10.148 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-23 10:55:10.154 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****SpVg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****A7bw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMVAFA9K69P:00000004","TimeStamp":"2019-05-23T07:55:10.0000000Z","ProcessId":5972,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-23 10:55:10.161 +03:00 [INF] Authorize endpoint response
{"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/#/auth-callback#","State":"37e1e597640742e6975c6669bc1f3e66","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-23 10:55:10.179 +03:00 [DBG] Augmenting SignInContext
2019-05-23 10:55:10.180 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-23 10:55:18.143 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-23 10:55:18.144 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-23 10:55:18.145 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-23 10:55:18.146 +03:00 [DBG] Start authorize request
2019-05-23 10:55:18.147 +03:00 [DBG] User in authorize request: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:55:18.148 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:55:18.168 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:18.169 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:18.177 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:18.191 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:55:18.198 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:18.211 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:55:18.212 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:55:18.213 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"46bb4b3571bd4ce8abf080243c2fbff6","UiLocales":null,"Nonce":"ba79001f68d94af3bc335d97b27b0ad9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"505c8ae4fee1616bec1117fbcc14c799","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"46bb4b3571bd4ce8abf080243c2fbff6","nonce":"ba79001f68d94af3bc335d97b27b0ad9","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-23 10:55:18.232 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-23 10:55:18.232 +03:00 [DBG] Creating Implicit Flow response.
2019-05-23 10:55:18.233 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-23 10:55:18.234 +03:00 [DBG] Getting claims for access token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:55:18.243 +03:00 [DBG] Getting claims for identity token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9 and client: promanage_spa
2019-05-23 10:55:18.244 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-23 10:55:18.251 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ZCVQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Z99Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMVAFA9K69J:00000003","TimeStamp":"2019-05-23T07:55:18.0000000Z","ProcessId":5972,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-23 10:55:18.256 +03:00 [INF] Authorize endpoint response
{"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","State":"46bb4b3571bd4ce8abf080243c2fbff6","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-23 10:55:18.381 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:55:18.386 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:55:18.388 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:55:18.392 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:55:18.396 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:55:18.397 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:55:18.398 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-23 10:55:18.399 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-23 10:55:18.400 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-23 10:55:18.401 +03:00 [DBG] Start userinfo request
2019-05-23 10:55:18.401 +03:00 [DBG] Bearer token found in header
2019-05-23 10:55:18.419 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:18.420 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:18.437 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:18.438 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:18.442 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-23 10:55:18.443 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558598118,"exp":1558598238,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","auth_time":1558538502,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-23 10:55:18.448 +03:00 [DBG] Creating userinfo response
2019-05-23 10:55:18.449 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:55:18.454 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:55:18.461 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:18.462 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-23 10:55:18.463 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:55:18.470 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:18.475 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-05-23 10:55:18.476 +03:00 [DBG] End userinfo request
2019-05-23 10:55:18.725 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.7.130:4200
2019-05-23 10:55:18.729 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:55:18.731 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:55:18.731 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-23 10:55:18.733 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-23 10:55:18.734 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-23 10:55:18.744 +03:00 [DBG] Start discovery request
2019-05-23 10:55:18.766 +03:00 [DBG] Found ["openid","profile","email","api1","monitoring","epc"] as all scopes in database
2019-05-23 10:55:18.798 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.7.130:4200
2019-05-23 10:55:18.802 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:55:18.803 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:55:18.804 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-23 10:55:18.805 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-23 10:55:18.806 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-23 10:55:18.807 +03:00 [DBG] Start key discovery request
2019-05-23 10:55:18.861 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:55:18.865 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:55:18.866 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:55:18.868 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:55:18.871 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:55:18.873 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:55:18.873 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-23 10:55:18.874 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-23 10:55:18.875 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-23 10:55:18.876 +03:00 [DBG] Start userinfo request
2019-05-23 10:55:18.877 +03:00 [DBG] Bearer token found in header
2019-05-23 10:55:18.894 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:18.894 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:18.908 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:55:18.908 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:55:18.912 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-23 10:55:18.913 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558598110,"exp":1558598230,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","auth_time":1558598110,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-23 10:55:18.916 +03:00 [DBG] Creating userinfo response
2019-05-23 10:55:18.916 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:55:18.917 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:55:18.924 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:18.926 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-23 10:55:18.927 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:55:18.934 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:55:18.938 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-05-23 10:55:18.939 +03:00 [DBG] End userinfo request
2019-05-23 10:55:18.959 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-05-23 10:55:18.960 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-05-23 10:55:18.961 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-05-23 10:55:18.962 +03:00 [DBG] Rendering check session result
2019-05-23 10:56:18.528 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-23 10:56:18.536 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-23 10:56:18.559 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-23 10:56:18.568 +03:00 [DBG] Start authorize request
2019-05-23 10:56:18.572 +03:00 [DBG] User in authorize request: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:56:18.576 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:56:18.605 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:56:18.606 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:56:18.619 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:56:18.650 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:56:18.662 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:56:18.685 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:56:18.687 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:56:18.689 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"c474e6327587459b8a1063a0269fa185","UiLocales":null,"Nonce":"05ab411e2ee3494c9bcf53511cf118a0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"505c8ae4fee1616bec1117fbcc14c799","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"c474e6327587459b8a1063a0269fa185","nonce":"05ab411e2ee3494c9bcf53511cf118a0","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-23 10:56:18.705 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-23 10:56:18.724 +03:00 [DBG] Creating Implicit Flow response.
2019-05-23 10:56:18.725 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-23 10:56:18.725 +03:00 [DBG] Getting claims for access token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:56:18.743 +03:00 [DBG] Getting claims for identity token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9 and client: promanage_spa
2019-05-23 10:56:18.744 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-23 10:56:18.753 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****2fWw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Ruhw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMVAFA9K69J:00000004","TimeStamp":"2019-05-23T07:56:18.0000000Z","ProcessId":5972,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-23 10:56:18.762 +03:00 [INF] Authorize endpoint response
{"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","State":"c474e6327587459b8a1063a0269fa185","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-23 10:56:18.990 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:56:18.997 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:56:18.999 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:56:19.048 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:56:19.053 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:56:19.053 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:56:19.054 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-23 10:56:19.054 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-23 10:56:19.055 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-23 10:56:19.056 +03:00 [DBG] Start userinfo request
2019-05-23 10:56:19.056 +03:00 [DBG] Bearer token found in header
2019-05-23 10:56:19.077 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:56:19.078 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:56:19.096 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:56:19.096 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:56:19.101 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-23 10:56:19.101 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558598178,"exp":1558598298,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","auth_time":1558538502,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-23 10:56:19.104 +03:00 [DBG] Creating userinfo response
2019-05-23 10:56:19.104 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:56:19.105 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:56:19.112 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:56:19.113 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-23 10:56:19.114 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:56:19.119 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:56:19.123 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-05-23 10:56:19.123 +03:00 [DBG] End userinfo request
2019-05-23 10:56:19.554 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-23 10:56:19.555 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-23 10:56:19.556 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-23 10:56:19.556 +03:00 [DBG] Start authorize request
2019-05-23 10:56:19.557 +03:00 [DBG] User in authorize request: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:56:19.557 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:56:19.572 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:56:19.572 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:56:19.578 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:56:19.589 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:56:19.598 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:56:19.609 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:56:19.609 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:56:19.610 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"342f7856c24340eaa1c13ba541c35273","UiLocales":null,"Nonce":"27282968d148402eb86394df2008603c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"e667324a29c5a9a950ba5b4e5980bfed","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"342f7856c24340eaa1c13ba541c35273","nonce":"27282968d148402eb86394df2008603c","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-23 10:56:19.616 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-23 10:56:19.616 +03:00 [DBG] Creating Implicit Flow response.
2019-05-23 10:56:19.617 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-23 10:56:19.617 +03:00 [DBG] Getting claims for access token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:56:19.626 +03:00 [DBG] Getting claims for identity token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9 and client: promanage_spa
2019-05-23 10:56:19.627 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-23 10:56:19.632 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****kq9A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****PQ9A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMVAFA9K69P:00000006","TimeStamp":"2019-05-23T07:56:19.0000000Z","ProcessId":5972,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-23 10:56:19.637 +03:00 [INF] Authorize endpoint response
{"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","State":"342f7856c24340eaa1c13ba541c35273","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-23 10:56:19.755 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:56:19.758 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:56:19.759 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:56:19.762 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:56:19.765 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:56:19.765 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:56:19.766 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-23 10:56:19.766 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-23 10:56:19.767 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-23 10:56:19.767 +03:00 [DBG] Start userinfo request
2019-05-23 10:56:19.768 +03:00 [DBG] Bearer token found in header
2019-05-23 10:56:19.781 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:56:19.782 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:56:19.791 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:56:19.791 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:56:19.793 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-23 10:56:19.794 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558598179,"exp":1558598299,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","auth_time":1558598110,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-23 10:56:19.795 +03:00 [DBG] Creating userinfo response
2019-05-23 10:56:19.795 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:56:19.796 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:56:19.800 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:56:19.800 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-23 10:56:19.801 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:56:19.804 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:56:19.807 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-05-23 10:56:19.808 +03:00 [DBG] End userinfo request
2019-05-23 10:57:19.183 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-23 10:57:19.184 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-23 10:57:19.185 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-23 10:57:19.186 +03:00 [DBG] Start authorize request
2019-05-23 10:57:19.187 +03:00 [DBG] User in authorize request: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:57:19.187 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:57:19.220 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:57:19.220 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:57:19.231 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:57:19.252 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:57:19.264 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:57:19.284 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:57:19.286 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:57:19.287 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"fc9abd6c73a946caa0b07289c6fa4116","UiLocales":null,"Nonce":"93f63a60fd16407c94d9eac2b44a0453","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"505c8ae4fee1616bec1117fbcc14c799","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"fc9abd6c73a946caa0b07289c6fa4116","nonce":"93f63a60fd16407c94d9eac2b44a0453","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-23 10:57:19.298 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-23 10:57:19.299 +03:00 [DBG] Creating Implicit Flow response.
2019-05-23 10:57:19.300 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-23 10:57:19.320 +03:00 [DBG] Getting claims for access token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:57:19.338 +03:00 [DBG] Getting claims for identity token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9 and client: promanage_spa
2019-05-23 10:57:19.339 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-23 10:57:19.348 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****pm8A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****mDew","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMVAFA9K69J:00000005","TimeStamp":"2019-05-23T07:57:19.0000000Z","ProcessId":5972,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-23 10:57:19.353 +03:00 [INF] Authorize endpoint response
{"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","State":"fc9abd6c73a946caa0b07289c6fa4116","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-23 10:57:19.594 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:57:19.599 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:57:19.627 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:57:19.642 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:57:19.646 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:57:19.646 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:57:19.647 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-23 10:57:19.647 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-23 10:57:19.648 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-23 10:57:19.648 +03:00 [DBG] Start userinfo request
2019-05-23 10:57:19.649 +03:00 [DBG] Bearer token found in header
2019-05-23 10:57:19.665 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:57:19.666 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:57:19.682 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:57:19.683 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:57:19.686 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-23 10:57:19.687 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558598239,"exp":1558598359,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","auth_time":1558538502,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-23 10:57:19.689 +03:00 [DBG] Creating userinfo response
2019-05-23 10:57:19.689 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:57:19.689 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:57:19.694 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:57:19.694 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-23 10:57:19.695 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:57:19.699 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:57:19.703 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-05-23 10:57:19.703 +03:00 [DBG] End userinfo request
2019-05-23 10:57:20.252 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-23 10:57:20.268 +03:00 [DBG] Stopping grant removal
2019-05-23 10:57:25.811 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-05-23 10:57:25.974 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-23 10:57:25.975 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-23 10:57:25.975 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-23 10:57:25.975 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-23 10:57:25.976 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-23 10:57:25.976 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-23 10:57:26.070 +03:00 [DBG] Starting grant removal
2019-05-23 10:58:20.672 +03:00 [DBG] Login Url: /Account/Login
2019-05-23 10:58:20.674 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-23 10:58:20.674 +03:00 [DBG] Logout Url: /Account/Logout
2019-05-23 10:58:20.675 +03:00 [DBG] ConsentUrl Url: /consent
2019-05-23 10:58:20.675 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-23 10:58:20.675 +03:00 [DBG] Error Url: /home/error
2019-05-23 10:58:20.676 +03:00 [DBG] Error Id Parameter: errorId
2019-05-23 10:58:20.708 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-23 10:58:20.713 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-23 10:58:20.713 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-23 10:58:20.717 +03:00 [DBG] Start authorize request
2019-05-23 10:58:20.726 +03:00 [DBG] User in authorize request: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:58:20.730 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:58:23.212 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:58:23.221 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:58:23.329 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:58:23.584 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:58:23.606 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:58:23.617 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:58:23.625 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:58:23.634 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"807c5a99f2434ad48d1c6924502eb084","UiLocales":null,"Nonce":"5a4680942b25447593c1e4d10ea95a02","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"505c8ae4fee1616bec1117fbcc14c799","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"807c5a99f2434ad48d1c6924502eb084","nonce":"5a4680942b25447593c1e4d10ea95a02","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-23 10:58:23.885 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-23 10:58:23.892 +03:00 [DBG] Creating Implicit Flow response.
2019-05-23 10:58:23.901 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-23 10:58:23.901 +03:00 [DBG] Getting claims for access token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:58:24.073 +03:00 [DBG] Getting claims for identity token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9 and client: promanage_spa
2019-05-23 10:58:24.073 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-23 10:58:24.095 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****FtCw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Gp2Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMVAHM3T788:00000001","TimeStamp":"2019-05-23T07:58:24.0000000Z","ProcessId":8324,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-23 10:58:24.105 +03:00 [INF] Authorize endpoint response
{"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","State":"807c5a99f2434ad48d1c6924502eb084","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-23 10:58:24.313 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:58:24.334 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:58:24.335 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:58:24.343 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:58:24.350 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:58:24.351 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:58:24.355 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-23 10:58:24.359 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-23 10:58:24.360 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-23 10:58:24.370 +03:00 [DBG] Start userinfo request
2019-05-23 10:58:24.376 +03:00 [DBG] Bearer token found in header
2019-05-23 10:58:24.442 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:58:24.442 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:58:24.491 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:58:24.491 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:58:24.495 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-23 10:58:24.496 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558598304,"exp":1558598424,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","auth_time":1558538502,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-23 10:58:24.504 +03:00 [DBG] Creating userinfo response
2019-05-23 10:58:24.509 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:58:24.516 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:58:24.561 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:58:24.564 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-23 10:58:24.566 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:58:24.585 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:58:24.622 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-05-23 10:58:24.626 +03:00 [DBG] End userinfo request
2019-05-23 10:59:25.469 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-23 10:59:25.472 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-23 10:59:25.474 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-23 10:59:25.475 +03:00 [DBG] Start authorize request
2019-05-23 10:59:25.477 +03:00 [DBG] User in authorize request: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:59:25.478 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 10:59:25.538 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:59:25.538 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:59:25.545 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:59:25.555 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:59:25.561 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:59:25.573 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-05-23 10:59:25.574 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-23 10:59:25.575 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","AllowedRedirectUris":["http://10.1.7.130:4200/silent-refresh.html","http://10.1.7.130:4200/#/auth-callback#"],"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"18d7fce5a1394e3bb3638dbd2b0db018","UiLocales":null,"Nonce":"aa51178d227b4b2f9ab3e9ac994e1f29","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"505c8ae4fee1616bec1117fbcc14c799","Raw":{"client_id":"promanage_spa","redirect_uri":"http://10.1.7.130:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"18d7fce5a1394e3bb3638dbd2b0db018","nonce":"aa51178d227b4b2f9ab3e9ac994e1f29","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-05-23 10:59:25.581 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-05-23 10:59:25.582 +03:00 [DBG] Creating Implicit Flow response.
2019-05-23 10:59:25.582 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-05-23 10:59:25.582 +03:00 [DBG] Getting claims for access token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 10:59:25.594 +03:00 [DBG] Getting claims for identity token for subject: 8c038a33-34f5-4806-91d2-c4a90f4a86c9 and client: promanage_spa
2019-05-23 10:59:25.595 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-05-23 10:59:25.601 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****iE-g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****VdvQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMVAHM3T788:00000002","TimeStamp":"2019-05-23T07:59:25.0000000Z","ProcessId":8324,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-23 10:59:25.605 +03:00 [INF] Authorize endpoint response
{"SubjectId":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","ClientId":"promanage_spa","RedirectUri":"http://10.1.7.130:4200/silent-refresh.html","State":"18d7fce5a1394e3bb3638dbd2b0db018","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-23 10:59:25.797 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:59:25.801 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:59:25.802 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:59:25.806 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.7.130:4200
2019-05-23 10:59:25.808 +03:00 [DBG] Origin http://10.1.7.130:4200 is allowed: true
2019-05-23 10:59:25.809 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.7.130:4200
2019-05-23 10:59:25.810 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-05-23 10:59:25.810 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-05-23 10:59:25.811 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-05-23 10:59:25.811 +03:00 [DBG] Start userinfo request
2019-05-23 10:59:25.811 +03:00 [DBG] Bearer token found in header
2019-05-23 10:59:25.823 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:59:25.824 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:59:25.836 +03:00 [DBG] promanage_spa found in database: true
2019-05-23 10:59:25.836 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-05-23 10:59:25.839 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-23 10:59:25.840 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558598365,"exp":1558598485,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"8c038a33-34f5-4806-91d2-c4a90f4a86c9","auth_time":1558538502,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-23 10:59:25.842 +03:00 [DBG] Creating userinfo response
2019-05-23 10:59:25.842 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:59:25.842 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:59:25.847 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:59:25.855 +03:00 [DBG] Requested claim types: sub name updated_at family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale email email_verified
2019-05-23 10:59:25.856 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-05-23 10:59:25.863 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-05-23 10:59:25.868 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-05-23 10:59:25.869 +03:00 [DBG] End userinfo request
2019-05-23 11:00:26.511 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-23 11:00:26.512 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-23 11:00:26.513 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-23 11:00:26.513 +03:00 [DBG] Start authorize request
2019-05-23 11:00:26.513 +03:00 [DBG] User in authorize request: 8c038a33-34f5-4806-91d2-c4a90f4a86c9
2019-05-23 11:00:26.514 +03:00 [DBG] Start authorize request protocol validation
2019-05-23 11:00:51.634 +03:00 [ERR] An error occurred using the connection to database '' on server '10.1.7.130:32769/ORCLPDB1.localdomain'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): Connection request timed out
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2019-05-23 11:00:51.654 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): Connection request timed out
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): Connection request timed out
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2019-05-23 11:00:51.665 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): Connection request timed out
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): Connection request timed out
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
2019-05-23 11:00:51.750 +03:00 [INF] {"Details":"Oracle.ManagedDataAccess.Client.OracleException (0x80004005): Connection request timed out\r\n   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)\r\n   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)\r\n   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)\r\n   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method(Closure )\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\r\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\EntityFramework.Storage\\src\\Stores\\ClientStore.cs:line 47\r\n   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Stores\\ValidatingClientStore.cs:line 52\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Extensions\\IClientStoreExtensions.cs:line 23\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Validation\\Default\\AuthorizeRequestValidator.cs:line 147\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Validation\\Default\\AuthorizeRequestValidator.cs:line 65\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Endpoints\\AuthorizeEndpointBase.cs:line 67\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Endpoints\\AuthorizeEndpoint.cs:line 55\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Hosting\\IdentityServerMiddleware.cs:line 54","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Connection request timed out","ActivityId":"0HLMVAHM3T78A:00000001","TimeStamp":"2019-05-23T08:00:51.0000000Z","ProcessId":8324,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2019-05-23 11:00:51.770 +03:00 [FTL] Unhandled exception: Connection request timed out
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): Connection request timed out
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework.Storage\src\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\Stores\ValidatingClientStore.cs:line 52
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\Validation\Default\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\Validation\Default\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2019-05-23 11:00:51.838 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): Connection request timed out
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework.Storage\src\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\Stores\ValidatingClientStore.cs:line 52
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\Validation\Default\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\Validation\Default\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.Invoke(HttpContext context)
2019-05-23 11:26:55.165 +03:00 [DBG] TaskCanceledException. Exiting.
2019-05-23 11:26:55.184 +03:00 [DBG] Stopping grant removal
2019-06-17 10:30:10.825 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-17 10:30:11.152 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 10:30:11.153 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 10:30:11.153 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 10:30:11.154 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 10:30:11.154 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 10:30:11.154 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 10:30:11.467 +03:00 [DBG] Starting grant removal
2019-06-17 11:30:15.504 +03:00 [ERR] An error occurred using the connection to database '' on server 'localhost:32769/ORCLPDB1.localdomain'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2019-06-17 11:30:15.526 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2019-06-17 11:30:15.554 +03:00 [ERR] Exception removing expired grants: ORA-12541: TNS: No listener
2019-06-17 12:30:17.606 +03:00 [ERR] An error occurred using the connection to database '' on server 'localhost:32769/ORCLPDB1.localdomain'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2019-06-17 12:30:17.619 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2019-06-17 12:30:17.644 +03:00 [ERR] Exception removing expired grants: ORA-12541: TNS: No listener
2019-06-17 13:30:19.789 +03:00 [ERR] An error occurred using the connection to database '' on server 'localhost:32769/ORCLPDB1.localdomain'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2019-06-17 13:30:19.796 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2019-06-17 13:30:19.809 +03:00 [ERR] Exception removing expired grants: ORA-12541: TNS: No listener
2019-06-17 14:30:21.773 +03:00 [ERR] An error occurred using the connection to database '' on server 'localhost:32769/ORCLPDB1.localdomain'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2019-06-17 14:30:21.796 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2019-06-17 14:30:21.807 +03:00 [ERR] Exception removing expired grants: ORA-12541: TNS: No listener
2019-06-24 12:40:53.522 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-24 12:40:53.747 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-24 12:40:53.748 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-24 12:40:53.749 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-24 12:40:53.750 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-24 12:40:53.751 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-24 12:40:53.752 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-24 12:40:53.864 +03:00 [DBG] Starting grant removal
2019-06-24 12:42:05.050 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-06-24 12:42:08.540 +03:00 [ERR] An error occurred using the connection to database '' on server 'localhost:32769/ORCLPDB1.localdomain'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2019-06-24 12:42:08.554 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2019-06-24 12:42:10.645 +03:00 [ERR] 2019-06-24 12:42:10.645231 ThreadID:5   (ERROR)   OracleDatabaseCreator.ExistsAsync() :  OracleException.Number: 12541
2019-06-24 12:42:10.650 +03:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at System.Data.Common.DbConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleDatabaseCreator.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
2019-06-24 12:42:10.682 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework.Storage\src\Services\CorsPolicyService.cs:line 46
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.InvokeCore(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-06-24 12:42:13.083 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-06-24 12:42:15.097 +03:00 [ERR] An error occurred using the connection to database '' on server 'localhost:32769/ORCLPDB1.localdomain'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2019-06-24 12:42:15.104 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2019-06-24 12:42:17.119 +03:00 [ERR] 2019-06-24 12:42:17.119838 ThreadID:14  (ERROR)   OracleDatabaseCreator.ExistsAsync() :  OracleException.Number: 12541
2019-06-24 12:42:17.121 +03:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at System.Data.Common.DbConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleDatabaseCreator.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
2019-06-24 12:42:17.129 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework.Storage\src\Services\CorsPolicyService.cs:line 46
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.InvokeCore(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-06-24 12:47:58.824 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-24 12:47:58.852 +03:00 [DBG] Stopping grant removal
2019-06-25 08:15:04.081 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-25 08:15:04.345 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-25 08:15:04.346 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-25 08:15:04.347 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-25 08:15:04.348 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-25 08:15:04.350 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-25 08:15:04.351 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-25 08:15:04.476 +03:00 [DBG] Starting grant removal
2019-06-25 08:15:59.991 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-25 08:16:00.009 +03:00 [DBG] Stopping grant removal
2019-06-25 08:16:19.862 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-25 08:16:20.029 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-25 08:16:20.031 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-25 08:16:20.032 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-25 08:16:20.033 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-25 08:16:20.034 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-25 08:16:20.035 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-25 08:16:20.125 +03:00 [DBG] Starting grant removal
2019-06-25 08:17:50.309 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-25 08:17:50.322 +03:00 [DBG] Stopping grant removal
2019-06-25 08:17:56.047 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-25 08:17:56.219 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-25 08:17:56.221 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-25 08:17:56.222 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-25 08:17:56.224 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-25 08:17:56.225 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-25 08:17:56.228 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-25 08:17:56.326 +03:00 [DBG] Starting grant removal
2019-06-25 08:18:49.733 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-25 08:18:49.744 +03:00 [DBG] Stopping grant removal
2019-06-25 08:48:48.299 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-25 08:48:48.472 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-25 08:48:48.473 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-25 08:48:48.476 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-25 08:48:48.477 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-25 08:48:48.479 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-25 08:48:48.480 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-25 08:48:48.578 +03:00 [DBG] Starting grant removal
2019-06-25 08:49:18.633 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-06-25 08:49:20.331 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-06-25 08:49:20.336 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-06-25 08:49:20.366 +03:00 [DBG] Login Url: /Account/Login
2019-06-25 08:49:20.368 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-25 08:49:20.369 +03:00 [DBG] Logout Url: /Account/Logout
2019-06-25 08:49:20.370 +03:00 [DBG] ConsentUrl Url: /consent
2019-06-25 08:49:20.371 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-25 08:49:20.372 +03:00 [DBG] Error Url: /home/error
2019-06-25 08:49:20.373 +03:00 [DBG] Error Id Parameter: errorId
2019-06-25 08:49:20.390 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 08:49:20.407 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 08:49:20.408 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 08:49:20.413 +03:00 [DBG] Start discovery request
2019-06-25 08:49:21.393 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 08:49:21.666 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 08:49:21.672 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 08:49:21.672 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 08:49:21.692 +03:00 [DBG] Start authorize request
2019-06-25 08:49:21.705 +03:00 [DBG] No user present in authorize request
2019-06-25 08:49:21.712 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 08:49:22.176 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 08:49:22.182 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 08:49:22.262 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:22.346 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:22.364 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:22.374 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:22.387 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 08:49:22.399 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"c4c0fae0aaab46bdba7eb57f88406217","UiLocales":null,"Nonce":"f30569f4478c4d87bed71b8296cc143b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"c4c0fae0aaab46bdba7eb57f88406217","nonce":"f30569f4478c4d87bed71b8296cc143b"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 08:49:22.420 +03:00 [INF] Showing login: User is not authenticated
2019-06-25 08:49:22.628 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 08:49:22.644 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 08:49:22.644 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 08:49:22.648 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:22.659 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:22.665 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:22.676 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:22.677 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 08:49:22.695 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 08:49:22.696 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 08:49:43.209 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:49:43.266 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 08:49:43.282 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 08:49:43.283 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 08:49:43.289 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:43.300 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:43.306 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:43.315 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:43.317 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 08:49:43.448 +03:00 [INF] {"Username":"gurkanindibay@gmail.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLNP63EK3OFT:00000005","TimeStamp":"2019-06-25T05:49:43.0000000Z","ProcessId":20380,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-06-25 08:49:43.451 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 08:49:43.461 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 08:49:43.462 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 08:49:43.467 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:43.477 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:43.482 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:43.490 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:43.491 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 08:49:43.505 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 08:49:43.506 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 08:49:46.618 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:49:46.621 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 08:49:46.641 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 08:49:46.641 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 08:49:46.651 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:46.667 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:46.676 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:46.691 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:46.693 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 08:49:46.726 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 08:49:46.726 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 08:49:46.731 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-06-25 08:49:46.733 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-06-25 08:49:46.734 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-06-25 08:49:46.740 +03:00 [DBG] Start authorize callback request
2019-06-25 08:49:46.744 +03:00 [DBG] No user present in authorize request
2019-06-25 08:49:46.744 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 08:49:46.766 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 08:49:46.766 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 08:49:46.774 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:46.782 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:46.788 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 08:49:46.795 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 08:49:46.796 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 08:49:46.796 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"c4c0fae0aaab46bdba7eb57f88406217","UiLocales":null,"Nonce":"f30569f4478c4d87bed71b8296cc143b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"c4c0fae0aaab46bdba7eb57f88406217","nonce":"f30569f4478c4d87bed71b8296cc143b"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 08:49:46.799 +03:00 [INF] Error: User denied consent
2019-06-25 08:49:46.803 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"c4c0fae0aaab46bdba7eb57f88406217","UiLocales":null,"Nonce":"f30569f4478c4d87bed71b8296cc143b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"c4c0fae0aaab46bdba7eb57f88406217","nonce":"f30569f4478c4d87bed71b8296cc143b"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 08:49:46.810 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile email monitoring","GrantType":"implicit","Error":"access_denied","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNP63EK3OFT:00000007","TimeStamp":"2019-06-25T05:49:46.0000000Z","ProcessId":20380,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-25 08:50:11.097 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:50:11.104 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:50:43.631 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:50:43.637 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:50:43.653 +03:00 [WRN] User e560d677-00f6-47ed-80ff-d5df9906f9c0 validation failed: DuplicateUserName.
2019-06-25 08:50:49.174 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:50:49.180 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:50:49.183 +03:00 [WRN] User 5199c42a-7d22-4551-ae1c-cf865bc517c0 password validation failed: PasswordRequiresNonAlphanumeric.
2019-06-25 08:50:50.318 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:50:50.320 +03:00 [WRN] User bef4b631-aa54-4ff9-a866-1c1e88f85d52 password validation failed: PasswordRequiresNonAlphanumeric.
2019-06-25 08:51:05.608 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:51:05.614 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:51:05.615 +03:00 [WRN] User fd59d2d4-e292-4a7f-afe9-adff915e6978 password validation failed: PasswordRequiresNonAlphanumeric.
2019-06-25 08:51:08.512 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:51:08.525 +03:00 [WRN] User 2d3ad618-a06f-46a3-b71f-a8cb58c56e5c validation failed: DuplicateUserName.
2019-06-25 08:51:10.352 +03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 08:51:10.364 +03:00 [WRN] User 5df5ecf3-f470-421e-a49e-8868a3f8187e validation failed: DuplicateUserName.
2019-06-25 08:54:49.891 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-25 08:54:49.907 +03:00 [DBG] Stopping grant removal
2019-06-25 09:02:21.375 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-25 09:02:21.570 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-25 09:02:21.571 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-25 09:02:21.571 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-25 09:02:21.572 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-25 09:02:21.573 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-25 09:02:21.575 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-25 09:02:21.703 +03:00 [DBG] Starting grant removal
2019-06-25 09:03:45.515 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-06-25 09:03:47.298 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-06-25 09:03:47.303 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-06-25 09:03:47.328 +03:00 [DBG] Login Url: /Account/Login
2019-06-25 09:03:47.328 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-25 09:03:47.329 +03:00 [DBG] Logout Url: /Account/Logout
2019-06-25 09:03:47.329 +03:00 [DBG] ConsentUrl Url: /consent
2019-06-25 09:03:47.330 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-25 09:03:47.331 +03:00 [DBG] Error Url: /home/error
2019-06-25 09:03:47.331 +03:00 [DBG] Error Id Parameter: errorId
2019-06-25 09:03:47.348 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 09:03:47.367 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 09:03:47.368 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 09:03:47.373 +03:00 [DBG] Start discovery request
2019-06-25 09:03:48.052 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 09:03:48.119 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 09:03:48.136 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 09:03:48.137 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 09:03:48.143 +03:00 [DBG] Start authorize request
2019-06-25 09:03:48.152 +03:00 [DBG] No user present in authorize request
2019-06-25 09:03:48.157 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 09:03:48.471 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 09:03:48.477 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 09:03:48.537 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:03:48.604 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 09:03:48.622 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:03:48.631 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 09:03:48.639 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 09:03:48.661 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"1661b98a60954ef49ab1f800ce6d060d","UiLocales":null,"Nonce":"1b9610d32f1a41fbad16fbb7b605bfd9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"1661b98a60954ef49ab1f800ce6d060d","nonce":"1b9610d32f1a41fbad16fbb7b605bfd9"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 09:03:48.683 +03:00 [INF] Showing login: User is not authenticated
2019-06-25 09:03:48.856 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 09:03:48.874 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 09:03:48.874 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 09:03:48.879 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:03:48.887 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 09:03:48.892 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:03:48.900 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 09:03:48.901 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 09:03:48.913 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 09:03:48.914 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 09:03:51.341 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-25 09:03:51.381 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 09:03:51.400 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 09:03:51.400 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 09:03:51.409 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:03:51.420 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 09:03:51.424 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:03:51.433 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 09:03:51.434 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 09:03:51.696 +03:00 [DBG] Augmenting SignInContext
2019-06-25 09:03:51.699 +03:00 [DBG] Adding idp claim with value: local
2019-06-25 09:03:51.699 +03:00 [DBG] Adding amr claim with value: pwd
2019-06-25 09:03:51.700 +03:00 [DBG] Adding auth_time claim with value: 1561442631
2019-06-25 09:03:51.709 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-06-25 09:03:51.721 +03:00 [INF] {"Username":"gurkanindibay@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","DisplayName":"gurkanindibay@gmail.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNP6BCVMV41:00000003","TimeStamp":"2019-06-25T06:03:51.0000000Z","ProcessId":19168,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-25 09:03:51.748 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 09:03:51.748 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 09:03:51.759 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-06-25 09:03:51.760 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-06-25 09:03:51.761 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-06-25 09:03:51.767 +03:00 [DBG] Start authorize callback request
2019-06-25 09:03:51.771 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 09:03:51.772 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 09:03:51.791 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 09:03:51.792 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 09:03:51.805 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:03:51.814 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 09:03:51.820 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:03:51.828 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 09:03:51.830 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 09:03:51.830 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"1661b98a60954ef49ab1f800ce6d060d","UiLocales":null,"Nonce":"1b9610d32f1a41fbad16fbb7b605bfd9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"1661b98a60954ef49ab1f800ce6d060d","nonce":"1b9610d32f1a41fbad16fbb7b605bfd9"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 09:03:51.872 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 09:03:51.878 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 09:03:51.888 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 09:03:51.889 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 09:03:51.962 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 09:03:51.963 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 09:03:51.971 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/#/auth-callback#","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****llJw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****DVbA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNP6BCVMV41:00000004","TimeStamp":"2019-06-25T06:03:51.0000000Z","ProcessId":19168,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 09:03:51.977 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/#/auth-callback#","State":"1661b98a60954ef49ab1f800ce6d060d","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 09:03:52.003 +03:00 [DBG] Augmenting SignInContext
2019-06-25 09:03:52.004 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-06-25 09:03:57.594 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-06-25 09:03:57.600 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-06-25 09:03:57.601 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-06-25 09:03:57.602 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 09:03:57.604 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 09:03:57.605 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 09:03:57.606 +03:00 [DBG] Start discovery request
2019-06-25 09:03:57.627 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 09:03:57.659 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-06-25 09:03:57.662 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-06-25 09:03:57.664 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-06-25 09:03:57.665 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-25 09:03:57.666 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-25 09:03:57.667 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-25 09:03:57.672 +03:00 [DBG] Start key discovery request
2019-06-25 09:03:57.765 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-06-25 09:03:57.768 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-06-25 09:03:57.768 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-06-25 09:03:57.809 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-06-25 09:03:57.811 +03:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-06-25 09:03:57.811 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-06-25 09:03:57.812 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 09:03:57.813 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 09:03:57.814 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 09:03:57.820 +03:00 [DBG] Start userinfo request
2019-06-25 09:03:57.824 +03:00 [DBG] Bearer token found in header
2019-06-25 09:03:57.864 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 09:03:57.865 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 09:03:57.880 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 09:03:57.880 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 09:03:57.883 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 09:03:57.885 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561442631,"exp":1561442751,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 09:03:57.891 +03:00 [DBG] Creating userinfo response
2019-06-25 09:03:57.895 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 09:03:57.898 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 09:03:57.911 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:03:57.912 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 09:03:57.913 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 09:03:57.919 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:03:57.924 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 09:03:57.925 +03:00 [DBG] End userinfo request
2019-06-25 09:03:57.947 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-06-25 09:03:57.948 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-06-25 09:03:57.949 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-06-25 09:03:57.951 +03:00 [DBG] Rendering check session result
2019-06-25 09:04:58.008 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 09:04:58.012 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 09:04:58.013 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 09:04:58.015 +03:00 [DBG] Start authorize request
2019-06-25 09:04:58.016 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 09:04:58.017 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 09:04:58.040 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 09:04:58.042 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 09:04:58.057 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:04:58.075 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 09:04:58.082 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 09:04:58.092 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 09:04:58.093 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 09:04:58.094 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d85d42e9e1ca44cfbcafc8bb9e655ca4","UiLocales":null,"Nonce":"6818f7d0de284bf7a3e770aa1948740c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d85d42e9e1ca44cfbcafc8bb9e655ca4","nonce":"6818f7d0de284bf7a3e770aa1948740c","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 09:04:58.103 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 09:04:58.104 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 09:04:58.105 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 09:04:58.105 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 09:04:58.114 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 09:04:58.115 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 09:04:58.118 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://localhost:4200/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****BxFA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Rg6A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNP6BCVMV41:00000006","TimeStamp":"2019-06-25T06:04:58.0000000Z","ProcessId":19168,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 09:04:58.121 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://localhost:4200/silent-refresh.html","State":"d85d42e9e1ca44cfbcafc8bb9e655ca4","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 10:02:21.806 +03:00 [INF] Removing 0 grants
2019-06-25 11:02:21.908 +03:00 [INF] Removing 0 grants
2019-06-25 12:02:22.007 +03:00 [INF] Removing 0 grants
2019-06-25 13:02:22.029 +03:00 [INF] Removing 0 grants
2019-06-25 13:15:34.316 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-25 13:15:34.378 +03:00 [DBG] Stopping grant removal
2019-06-25 13:21:12.486 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-25 13:21:12.710 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-25 13:21:12.712 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-25 13:21:12.713 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-25 13:21:12.713 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-25 13:21:12.714 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-25 13:21:12.714 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-25 13:21:12.844 +03:00 [DBG] Starting grant removal
2019-06-25 13:21:31.088 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:21:32.957 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:21:32.963 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:21:32.993 +03:00 [DBG] Login Url: /Account/Login
2019-06-25 13:21:32.994 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-25 13:21:32.995 +03:00 [DBG] Logout Url: /Account/Logout
2019-06-25 13:21:32.997 +03:00 [DBG] ConsentUrl Url: /consent
2019-06-25 13:21:32.998 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-25 13:21:32.998 +03:00 [DBG] Error Url: /home/error
2019-06-25 13:21:32.999 +03:00 [DBG] Error Id Parameter: errorId
2019-06-25 13:21:33.019 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 13:21:33.036 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 13:21:33.037 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 13:21:33.043 +03:00 [DBG] Start discovery request
2019-06-25 13:21:33.828 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 13:21:34.320 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:21:34.325 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:21:34.326 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:21:34.331 +03:00 [DBG] Start authorize request
2019-06-25 13:21:34.341 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:21:34.347 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:21:34.639 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:21:34.644 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:21:34.661 +03:00 [ERR] Invalid redirect_uri: http://local.promanage-cloud.com:12101/#/auth-callback#
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":null,"AllowedRedirectUris":["http://127.0.0.1:8080/silent-refresh.html","http://127.0.0.1:8080/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"e0c1cdb287044c56942f9ec430fcf99b","nonce":"7822d3ac6a144349a0602d2cb23edbe5"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:21:34.678 +03:00 [ERR] Request validation failed
2019-06-25 13:21:34.678 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":null,"AllowedRedirectUris":["http://127.0.0.1:8080/silent-refresh.html","http://127.0.0.1:8080/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"e0c1cdb287044c56942f9ec430fcf99b","nonce":"7822d3ac6a144349a0602d2cb23edbe5"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:21:34.694 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNPARI2EEN1:00000001","TimeStamp":"2019-06-25T10:21:34.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-25 13:22:36.224 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:22:36.235 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:22:36.237 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:22:36.239 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 13:22:36.242 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 13:22:36.243 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 13:22:36.245 +03:00 [DBG] Start discovery request
2019-06-25 13:22:36.261 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 13:22:36.292 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:22:36.294 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:22:36.298 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:22:36.300 +03:00 [DBG] Start authorize request
2019-06-25 13:22:36.300 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:22:36.302 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:22:36.324 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:22:36.326 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:22:36.389 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:22:36.455 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:22:36.467 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:22:36.475 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:22:36.484 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:22:36.485 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"f868d741c60845ee8255d2709fbc6cb9","UiLocales":null,"Nonce":"9b37f5e2e6234eaa9c14ed1e522c5873","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"f868d741c60845ee8255d2709fbc6cb9","nonce":"9b37f5e2e6234eaa9c14ed1e522c5873"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:22:36.515 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:22:36.521 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:22:36.529 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:22:36.530 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:22:36.603 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:22:36.605 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:22:36.615 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****KxCA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****CrEA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EEN4:00000001","TimeStamp":"2019-06-25T10:22:36.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:22:36.620 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","State":"f868d741c60845ee8255d2709fbc6cb9","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:22:43.667 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:22:43.674 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:22:43.675 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:22:43.676 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 13:22:43.678 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 13:22:43.679 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 13:22:43.680 +03:00 [DBG] Start discovery request
2019-06-25 13:22:43.700 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 13:22:43.762 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:22:43.766 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:22:43.767 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:22:43.768 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-25 13:22:43.769 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-25 13:22:43.770 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-25 13:22:43.776 +03:00 [DBG] Start key discovery request
2019-06-25 13:22:44.058 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:22:44.063 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:22:44.065 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:22:44.101 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:22:44.114 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:22:44.115 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:22:44.117 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:22:44.120 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:22:44.121 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:22:44.129 +03:00 [DBG] Start userinfo request
2019-06-25 13:22:44.132 +03:00 [DBG] Bearer token found in header
2019-06-25 13:22:44.186 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:22:44.186 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:22:44.201 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:22:44.202 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:22:44.206 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:22:44.208 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458156,"exp":1561458276,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:22:44.215 +03:00 [DBG] Creating userinfo response
2019-06-25 13:22:44.218 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:22:44.221 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:22:44.231 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:22:44.232 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:22:44.233 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:22:44.237 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:22:44.243 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:22:44.245 +03:00 [DBG] End userinfo request
2019-06-25 13:22:44.270 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-06-25 13:22:44.272 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-06-25 13:22:44.273 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-06-25 13:22:44.276 +03:00 [DBG] Rendering check session result
2019-06-25 13:23:44.359 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:23:44.360 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:23:44.361 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:23:44.363 +03:00 [DBG] Start authorize request
2019-06-25 13:23:44.363 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:23:44.365 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:23:44.383 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:23:44.384 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:23:44.390 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:23:44.407 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:23:44.415 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:23:44.429 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:23:44.430 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:23:44.431 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d09491df7c6c4e788fb7d408c0e63f7e","UiLocales":null,"Nonce":"51c6a2dca13047e896c6b4e799c40a54","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d09491df7c6c4e788fb7d408c0e63f7e","nonce":"51c6a2dca13047e896c6b4e799c40a54","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:23:44.438 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:23:44.439 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:23:44.439 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:23:44.440 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:23:44.446 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:23:44.447 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:23:44.450 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ZDzg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****eroQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EEN6:00000001","TimeStamp":"2019-06-25T10:23:44.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:23:44.455 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"d09491df7c6c4e788fb7d408c0e63f7e","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:23:44.574 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:23:44.579 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:23:44.580 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:23:44.585 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:23:44.589 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:23:44.590 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:23:44.594 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:23:44.596 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:23:44.597 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:23:44.598 +03:00 [DBG] Start userinfo request
2019-06-25 13:23:44.599 +03:00 [DBG] Bearer token found in header
2019-06-25 13:23:44.617 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:23:44.618 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:23:44.632 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:23:44.632 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:23:44.635 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:23:44.637 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458224,"exp":1561458344,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:23:44.640 +03:00 [DBG] Creating userinfo response
2019-06-25 13:23:44.641 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:23:44.641 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:23:44.647 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:23:44.649 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:23:44.650 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:23:44.657 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:23:44.663 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:23:44.664 +03:00 [DBG] End userinfo request
2019-06-25 13:30:22.217 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:30:22.230 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:30:22.232 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:30:22.233 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 13:30:22.235 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 13:30:22.240 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 13:30:22.243 +03:00 [DBG] Start discovery request
2019-06-25 13:30:22.259 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 13:30:22.289 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:30:22.290 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:30:22.291 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:30:22.293 +03:00 [DBG] Start authorize request
2019-06-25 13:30:22.294 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:30:22.295 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:30:22.314 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:30:22.314 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:30:22.323 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:30:22.342 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:30:22.350 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:30:22.363 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:30:22.365 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:30:22.366 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"668af64675ab4af4abce1d48450bb672","UiLocales":null,"Nonce":"b0bfccc972c54694a8a9ed83e378f06e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"668af64675ab4af4abce1d48450bb672","nonce":"b0bfccc972c54694a8a9ed83e378f06e"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:30:22.380 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:30:22.380 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:30:22.381 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:30:22.381 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:30:22.394 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:30:22.396 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:30:22.400 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****pzSg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****lGgg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EEN9:00000001","TimeStamp":"2019-06-25T10:30:22.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:30:22.411 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","State":"668af64675ab4af4abce1d48450bb672","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:30:30.506 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:30:30.513 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:30:30.515 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:30:30.517 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 13:30:30.519 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 13:30:30.520 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 13:30:30.521 +03:00 [DBG] Start discovery request
2019-06-25 13:30:30.541 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 13:30:30.577 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:30:30.580 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:30:30.581 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:30:30.584 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-25 13:30:30.587 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-25 13:30:30.589 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-25 13:30:30.590 +03:00 [DBG] Start key discovery request
2019-06-25 13:30:30.641 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:30:30.644 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:30:30.645 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:30:30.652 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:30:30.656 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:30:30.657 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:30:30.658 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:30:30.659 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:30:30.659 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:30:30.660 +03:00 [DBG] Start userinfo request
2019-06-25 13:30:30.660 +03:00 [DBG] Bearer token found in header
2019-06-25 13:30:30.682 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:30:30.683 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:30:30.699 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:30:30.699 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:30:30.703 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:30:30.705 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458622,"exp":1561458742,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:30:30.712 +03:00 [DBG] Creating userinfo response
2019-06-25 13:30:30.712 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:30:30.713 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:30:30.721 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:30:30.722 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:30:30.723 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:30:30.729 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:30:30.733 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:30:30.734 +03:00 [DBG] End userinfo request
2019-06-25 13:30:30.764 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-06-25 13:30:30.766 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-06-25 13:30:30.766 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-06-25 13:30:30.767 +03:00 [DBG] Rendering check session result
2019-06-25 13:31:31.211 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:31:31.214 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:31:31.215 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:31:31.217 +03:00 [DBG] Start authorize request
2019-06-25 13:31:31.218 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:31:31.219 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:31:31.236 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:31:31.237 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:31:31.241 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:31:31.251 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:31:31.256 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:31:31.262 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:31:31.263 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:31:31.264 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"9f34204b83a24e59989175e48fda20db","UiLocales":null,"Nonce":"6a32ee8a7d4942038a63b5071649a852","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"9f34204b83a24e59989175e48fda20db","nonce":"6a32ee8a7d4942038a63b5071649a852","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:31:31.270 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:31:31.270 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:31:31.270 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:31:31.271 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:31:31.276 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:31:31.277 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:31:31.282 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Rk4g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****UnwA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EEN9:00000003","TimeStamp":"2019-06-25T10:31:31.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:31:31.287 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"9f34204b83a24e59989175e48fda20db","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:31:31.399 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:31:31.402 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:31:31.404 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:31:31.409 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:31:31.413 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:31:31.414 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:31:31.415 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:31:31.415 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:31:31.416 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:31:31.417 +03:00 [DBG] Start userinfo request
2019-06-25 13:31:31.417 +03:00 [DBG] Bearer token found in header
2019-06-25 13:31:31.430 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:31:31.431 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:31:31.443 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:31:31.443 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:31:31.446 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:31:31.447 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458691,"exp":1561458811,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:31:31.449 +03:00 [DBG] Creating userinfo response
2019-06-25 13:31:31.449 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:31:31.450 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:31:31.456 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:31:31.457 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:31:31.457 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:31:31.462 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:31:31.466 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:31:31.467 +03:00 [DBG] End userinfo request
2019-06-25 13:32:32.169 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:32:32.171 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:32:32.172 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:32:32.174 +03:00 [DBG] Start authorize request
2019-06-25 13:32:32.175 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:32:32.176 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:32:32.197 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:32:32.197 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:32:32.204 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:32:32.216 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:32:32.222 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:32:32.231 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:32:32.232 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:32:32.232 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"33dec759bcab48feac557e3680d95caf","UiLocales":null,"Nonce":"87a5f8e8f4ed4fcc8dc7bc11f9d4f255","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"33dec759bcab48feac557e3680d95caf","nonce":"87a5f8e8f4ed4fcc8dc7bc11f9d4f255","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:32:32.238 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:32:32.238 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:32:32.239 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:32:32.239 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:32:32.244 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:32:32.245 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:32:32.249 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****FEQQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****d_Sg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EEN9:00000004","TimeStamp":"2019-06-25T10:32:32.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:32:32.252 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"33dec759bcab48feac557e3680d95caf","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:32:32.369 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:32:32.373 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:32:32.374 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:32:32.404 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:32:32.408 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:32:32.410 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:32:32.411 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:32:32.413 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:32:32.414 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:32:32.415 +03:00 [DBG] Start userinfo request
2019-06-25 13:32:32.416 +03:00 [DBG] Bearer token found in header
2019-06-25 13:32:32.436 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:32:32.437 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:32:32.451 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:32:32.452 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:32:32.455 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:32:32.456 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458752,"exp":1561458872,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:32:32.458 +03:00 [DBG] Creating userinfo response
2019-06-25 13:32:32.458 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:32:32.459 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:32:32.463 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:32:32.464 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:32:32.466 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:32:32.470 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:32:32.473 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:32:32.474 +03:00 [DBG] End userinfo request
2019-06-25 13:33:33.170 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:33:33.172 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:33:33.173 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:33:33.175 +03:00 [DBG] Start authorize request
2019-06-25 13:33:33.176 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:33:33.178 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:33:33.190 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:33:33.191 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:33:33.196 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:33:33.203 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:33:33.207 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:33:33.214 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:33:33.215 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:33:33.215 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d0136098f315435daf98e8d5d18cfd99","UiLocales":null,"Nonce":"4b00836544954ac19eb862ae01518aa4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d0136098f315435daf98e8d5d18cfd99","nonce":"4b00836544954ac19eb862ae01518aa4","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:33:33.221 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:33:33.221 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:33:33.221 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:33:33.222 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:33:33.228 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:33:33.228 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:33:33.232 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****s6-A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****wMEg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EEN9:00000005","TimeStamp":"2019-06-25T10:33:33.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:33:33.235 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"d0136098f315435daf98e8d5d18cfd99","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:33:33.318 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:33:33.322 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:33:33.323 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:33:33.328 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:33:33.336 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:33:33.337 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:33:33.339 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:33:33.340 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:33:33.341 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:33:33.341 +03:00 [DBG] Start userinfo request
2019-06-25 13:33:33.342 +03:00 [DBG] Bearer token found in header
2019-06-25 13:33:33.354 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:33:33.354 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:33:33.366 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:33:33.366 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:33:33.369 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:33:33.370 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458813,"exp":1561458933,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:33:33.372 +03:00 [DBG] Creating userinfo response
2019-06-25 13:33:33.372 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:33:33.373 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:33:33.377 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:33:33.378 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:33:33.378 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:33:33.382 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:33:33.386 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:33:33.387 +03:00 [DBG] End userinfo request
2019-06-25 13:34:34.237 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:34:34.239 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:34:34.240 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:34:34.242 +03:00 [DBG] Start authorize request
2019-06-25 13:34:34.243 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:34:34.244 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:34:34.261 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:34:34.262 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:34:34.268 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:34:34.277 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:34:34.282 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:34:34.298 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:34:34.299 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:34:34.300 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"3c12858086b14bb08dad2bff824180c1","UiLocales":null,"Nonce":"0777ab8006054f979f4d9942e59273cc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"3c12858086b14bb08dad2bff824180c1","nonce":"0777ab8006054f979f4d9942e59273cc","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:34:34.308 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:34:34.309 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:34:34.310 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:34:34.311 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:34:34.319 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:34:34.320 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:34:34.324 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****7Kug","$type":"Token"},{"TokenType":"access_token","TokenValue":"****rtGw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:00000001","TimeStamp":"2019-06-25T10:34:34.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:34:34.329 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"3c12858086b14bb08dad2bff824180c1","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:34:34.447 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:34:34.451 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:34:34.453 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:34:34.458 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:34:34.461 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:34:34.463 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:34:34.464 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:34:34.466 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:34:34.474 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:34:34.475 +03:00 [DBG] Start userinfo request
2019-06-25 13:34:34.476 +03:00 [DBG] Bearer token found in header
2019-06-25 13:34:34.496 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:34:34.496 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:34:34.515 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:34:34.516 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:34:34.519 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:34:34.520 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458874,"exp":1561458994,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:34:34.523 +03:00 [DBG] Creating userinfo response
2019-06-25 13:34:34.524 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:34:34.525 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:34:34.531 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:34:34.532 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:34:34.533 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:34:34.541 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:34:34.550 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:34:34.551 +03:00 [DBG] End userinfo request
2019-06-25 13:35:29.035 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:29.039 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:35:29.040 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:29.042 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 13:35:29.043 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 13:35:29.044 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 13:35:29.046 +03:00 [DBG] Start discovery request
2019-06-25 13:35:29.069 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 13:35:29.104 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:35:29.108 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:35:29.111 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:35:29.116 +03:00 [DBG] Start authorize request
2019-06-25 13:35:29.117 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:35:29.118 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:35:29.138 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:35:29.138 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:35:29.148 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:35:29.167 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:35:29.174 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:35:29.184 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:35:29.185 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:35:29.186 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"85cefe8c54274e9887cd259b68254ee2","UiLocales":null,"Nonce":"750c558e054a4beab7d071b47072e7ad","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"85cefe8c54274e9887cd259b68254ee2","nonce":"750c558e054a4beab7d071b47072e7ad"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:35:29.194 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:35:29.196 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:35:29.197 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:35:29.197 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:35:29.207 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:35:29.209 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:35:29.214 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****sYpA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****QNkQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:00000002","TimeStamp":"2019-06-25T10:35:29.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:35:29.217 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","State":"85cefe8c54274e9887cd259b68254ee2","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:35:35.171 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:35:35.173 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:35:35.174 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:35:35.175 +03:00 [DBG] Start authorize request
2019-06-25 13:35:35.176 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:35:35.176 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:35:35.195 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:35:35.195 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:35:35.202 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:35:35.215 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:35:35.220 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:35:35.229 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:35:35.230 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:35:35.231 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"da32e00403ec4582b9c2a59e51fe13c9","UiLocales":null,"Nonce":"0facfc60605c40aeb92072b4eb36bd38","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"da32e00403ec4582b9c2a59e51fe13c9","nonce":"0facfc60605c40aeb92072b4eb36bd38","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:35:35.240 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:35:35.240 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:35:35.241 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:35:35.242 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:35:35.249 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:35:35.251 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:35:35.254 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****MiZg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****e2ZQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:00000003","TimeStamp":"2019-06-25T10:35:35.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:35:35.262 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"da32e00403ec4582b9c2a59e51fe13c9","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:35:35.442 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:35.446 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:35:35.447 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:35.452 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:35.455 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:35:35.455 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:35.456 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:35:35.457 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:35:35.458 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:35:35.458 +03:00 [DBG] Start userinfo request
2019-06-25 13:35:35.459 +03:00 [DBG] Bearer token found in header
2019-06-25 13:35:35.472 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:35:35.473 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:35:35.485 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:35:35.486 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:35:35.489 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:35:35.490 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458935,"exp":1561459055,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:35:35.493 +03:00 [DBG] Creating userinfo response
2019-06-25 13:35:35.493 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:35:35.494 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:35:35.500 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:35:35.501 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:35:35.502 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:35:35.506 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:35:35.510 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:35:35.512 +03:00 [DBG] End userinfo request
2019-06-25 13:35:36.859 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:36.863 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:35:36.867 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:36.871 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 13:35:36.872 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 13:35:36.873 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 13:35:36.874 +03:00 [DBG] Start discovery request
2019-06-25 13:35:36.894 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 13:35:36.939 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:36.943 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:35:36.944 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:36.945 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-25 13:35:36.947 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-25 13:35:36.947 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-25 13:35:36.949 +03:00 [DBG] Start key discovery request
2019-06-25 13:35:37.187 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:37.191 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:35:37.192 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:37.212 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:37.217 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:35:37.221 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:35:37.222 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:35:37.223 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:35:37.225 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:35:37.225 +03:00 [DBG] Start userinfo request
2019-06-25 13:35:37.226 +03:00 [DBG] Bearer token found in header
2019-06-25 13:35:37.244 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:35:37.245 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:35:37.261 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:35:37.261 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:35:37.265 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:35:37.266 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458929,"exp":1561459049,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:35:37.269 +03:00 [DBG] Creating userinfo response
2019-06-25 13:35:37.269 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:35:37.270 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:35:37.275 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:35:37.276 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:35:37.280 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:35:37.292 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:35:37.297 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:35:37.298 +03:00 [DBG] End userinfo request
2019-06-25 13:35:37.321 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-06-25 13:35:37.322 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-06-25 13:35:37.323 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-06-25 13:35:37.324 +03:00 [DBG] Rendering check session result
2019-06-25 13:36:36.171 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:36:36.172 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:36:36.173 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:36:36.173 +03:00 [DBG] Start authorize request
2019-06-25 13:36:36.174 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:36:36.176 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:36:36.189 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:36:36.189 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:36:36.194 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:36:36.204 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:36:36.207 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:36:36.216 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:36:36.217 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:36:36.218 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"922151cbf5a94b88b0ff276b91650a5d","UiLocales":null,"Nonce":"8e73cf177e8143628b7e1219f928010e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"922151cbf5a94b88b0ff276b91650a5d","nonce":"8e73cf177e8143628b7e1219f928010e","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:36:36.223 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:36:36.224 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:36:36.224 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:36:36.225 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:36:36.233 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:36:36.233 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:36:36.236 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****1Cag","$type":"Token"},{"TokenType":"access_token","TokenValue":"****A1Bg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:00000005","TimeStamp":"2019-06-25T10:36:36.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:36:36.239 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"922151cbf5a94b88b0ff276b91650a5d","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:36:36.299 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:36:36.302 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:36:36.304 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:36:36.309 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:36:36.313 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:36:36.314 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:36:36.316 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:36:36.317 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:36:36.318 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:36:36.318 +03:00 [DBG] Start userinfo request
2019-06-25 13:36:36.319 +03:00 [DBG] Bearer token found in header
2019-06-25 13:36:36.333 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:36:36.333 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:36:36.346 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:36:36.347 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:36:36.351 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:36:36.355 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458996,"exp":1561459116,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:36:36.358 +03:00 [DBG] Creating userinfo response
2019-06-25 13:36:36.358 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:36:36.359 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:36:36.364 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:36:36.364 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:36:36.365 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:36:36.368 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:36:36.373 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:36:36.373 +03:00 [DBG] End userinfo request
2019-06-25 13:36:37.404 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:36:37.408 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:36:37.418 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:36:37.436 +03:00 [DBG] Start authorize request
2019-06-25 13:36:37.442 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:36:37.451 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:36:37.469 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:36:37.470 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:36:37.478 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:36:37.491 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:36:37.498 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:36:37.508 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:36:37.509 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:36:37.510 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"26b850fb39154a3d8f00d9747750116f","UiLocales":null,"Nonce":"7f44028907dd4561abed4221293c3dd6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"26b850fb39154a3d8f00d9747750116f","nonce":"7f44028907dd4561abed4221293c3dd6","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:36:37.519 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:36:37.519 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:36:37.519 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:36:37.520 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:36:37.526 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:36:37.527 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:36:37.530 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****IyoQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****n7rA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:00000006","TimeStamp":"2019-06-25T10:36:37.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:36:37.540 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"26b850fb39154a3d8f00d9747750116f","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:36:37.672 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:36:37.676 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:36:37.677 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:36:37.681 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:36:37.685 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:36:37.686 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:36:37.688 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:36:37.690 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:36:37.691 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:36:37.695 +03:00 [DBG] Start userinfo request
2019-06-25 13:36:37.695 +03:00 [DBG] Bearer token found in header
2019-06-25 13:36:37.721 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:36:37.722 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:36:37.744 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:36:37.746 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:36:37.755 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:36:37.756 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561458997,"exp":1561459117,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:36:37.762 +03:00 [DBG] Creating userinfo response
2019-06-25 13:36:37.763 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:36:37.768 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:36:37.775 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:36:37.782 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:36:37.783 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:36:37.789 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:36:37.796 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:36:37.798 +03:00 [DBG] End userinfo request
2019-06-25 13:37:37.168 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:37:37.173 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:37:37.176 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:37:37.179 +03:00 [DBG] Start authorize request
2019-06-25 13:37:37.180 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:37:37.184 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:37:37.200 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:37:37.201 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:37:37.210 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:37:37.221 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:37:37.227 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:37:37.238 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:37:37.241 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:37:37.245 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"24297d61b0c043c3aa21d5525a4e8eec","UiLocales":null,"Nonce":"269f86f66c5c47368c4131ccaa67f98f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"24297d61b0c043c3aa21d5525a4e8eec","nonce":"269f86f66c5c47368c4131ccaa67f98f","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:37:37.263 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:37:37.263 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:37:37.266 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:37:37.268 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:37:37.279 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:37:37.282 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:37:37.287 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Ex9w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****mBmQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:00000007","TimeStamp":"2019-06-25T10:37:37.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:37:37.295 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"24297d61b0c043c3aa21d5525a4e8eec","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:37:37.397 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:37:37.402 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:37:37.403 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:37:37.430 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:37:37.433 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:37:37.435 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:37:37.436 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:37:37.436 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:37:37.438 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:37:37.439 +03:00 [DBG] Start userinfo request
2019-06-25 13:37:37.440 +03:00 [DBG] Bearer token found in header
2019-06-25 13:37:37.457 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:37:37.458 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:37:37.473 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:37:37.474 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:37:37.477 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:37:37.478 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459057,"exp":1561459177,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:37:37.480 +03:00 [DBG] Creating userinfo response
2019-06-25 13:37:37.480 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:37:37.481 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:37:37.487 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:37:37.493 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:37:37.495 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:37:37.500 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:37:37.504 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:37:37.504 +03:00 [DBG] End userinfo request
2019-06-25 13:37:37.827 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:37:37.829 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:37:37.830 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:37:37.831 +03:00 [DBG] Start authorize request
2019-06-25 13:37:37.831 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:37:37.832 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:37:37.851 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:37:37.852 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:37:37.860 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:37:37.873 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:37:37.879 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:37:37.891 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:37:37.892 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:37:37.893 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"9361cef3b77046dcbceacbb4d73f4197","UiLocales":null,"Nonce":"4771392f0d4f4e919057b679f5e4f4ef","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"9361cef3b77046dcbceacbb4d73f4197","nonce":"4771392f0d4f4e919057b679f5e4f4ef","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:37:37.900 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:37:37.901 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:37:37.903 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:37:37.905 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:37:37.912 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:37:37.914 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:37:37.918 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****tHHw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****mBmQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:00000008","TimeStamp":"2019-06-25T10:37:37.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:37:37.922 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"9361cef3b77046dcbceacbb4d73f4197","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:37:38.063 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:37:38.067 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:37:38.067 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:37:38.102 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:37:38.106 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:37:38.108 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:37:38.110 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:37:38.113 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:37:38.115 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:37:38.118 +03:00 [DBG] Start userinfo request
2019-06-25 13:37:38.119 +03:00 [DBG] Bearer token found in header
2019-06-25 13:37:38.134 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:37:38.134 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:37:38.146 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:37:38.146 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:37:38.150 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:37:38.151 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459057,"exp":1561459177,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:37:38.155 +03:00 [DBG] Creating userinfo response
2019-06-25 13:37:38.156 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:37:38.159 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:37:38.163 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:37:38.164 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:37:38.165 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:37:38.170 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:37:38.174 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:37:38.174 +03:00 [DBG] End userinfo request
2019-06-25 13:38:38.239 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:38:38.241 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:38:38.242 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:38:38.244 +03:00 [DBG] Start authorize request
2019-06-25 13:38:38.245 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:38:38.246 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:38:38.265 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:38:38.266 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:38:38.273 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:38:38.288 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:38:38.296 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:38:38.309 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:38:38.310 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:38:38.311 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"6d6c93d64d8e4cbc96e013e3b7d91966","UiLocales":null,"Nonce":"eb73e962bbf3405794a01f750476c57d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"6d6c93d64d8e4cbc96e013e3b7d91966","nonce":"eb73e962bbf3405794a01f750476c57d","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:38:38.311 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:38:38.318 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:38:38.319 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:38:38.320 +03:00 [DBG] Start authorize request
2019-06-25 13:38:38.320 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:38:38.320 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:38:38.321 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:38:38.321 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:38:38.322 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:38:38.323 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:38:38.344 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:38:38.344 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:38:38.351 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:38:38.361 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:38:38.366 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:38:38.372 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:38:38.373 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:38:38.376 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****MaNQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****iRNg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:00000009","TimeStamp":"2019-06-25T10:38:38.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:38:38.381 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:38:38.390 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"6d6c93d64d8e4cbc96e013e3b7d91966","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:38:38.390 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:38:38.392 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"52329b9b9a84430ba9da43a543a61cbe","UiLocales":null,"Nonce":"8cf035bcbe8c4dde8706548fa6cd1a9d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"52329b9b9a84430ba9da43a543a61cbe","nonce":"8cf035bcbe8c4dde8706548fa6cd1a9d","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:38:38.398 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:38:38.398 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:38:38.399 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:38:38.399 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:38:38.407 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:38:38.407 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:38:38.411 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****X7-Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****iRNg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENE:00000001","TimeStamp":"2019-06-25T10:38:38.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:38:38.413 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"52329b9b9a84430ba9da43a543a61cbe","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:38:38.494 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:38:38.498 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:38:38.499 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:38:38.503 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:38:38.506 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:38:38.507 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:38:38.508 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:38:38.509 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:38:38.510 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:38:38.510 +03:00 [DBG] Start userinfo request
2019-06-25 13:38:38.511 +03:00 [DBG] Bearer token found in header
2019-06-25 13:38:38.537 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:38:38.538 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:38:38.556 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:38:38.556 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:38:38.559 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:38:38.559 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459118,"exp":1561459238,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:38:38.562 +03:00 [DBG] Creating userinfo response
2019-06-25 13:38:38.563 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:38:38.564 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:38:38.581 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:38:38.582 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:38:38.583 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:38:38.588 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:38:38.592 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:38:38.592 +03:00 [DBG] End userinfo request
2019-06-25 13:38:38.597 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:38:38.601 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:38:38.602 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:38:38.605 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:38:38.607 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:38:38.608 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:38:38.608 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:38:38.609 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:38:38.609 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:38:38.609 +03:00 [DBG] Start userinfo request
2019-06-25 13:38:38.610 +03:00 [DBG] Bearer token found in header
2019-06-25 13:38:38.629 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:38:38.629 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:38:38.644 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:38:38.644 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:38:38.647 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:38:38.647 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459118,"exp":1561459238,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:38:38.649 +03:00 [DBG] Creating userinfo response
2019-06-25 13:38:38.649 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:38:38.649 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:38:38.654 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:38:38.654 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:38:38.655 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:38:38.660 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:38:38.664 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:38:38.664 +03:00 [DBG] End userinfo request
2019-06-25 13:39:39.173 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:39:39.174 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:39:39.174 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:39:39.174 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:39:39.175 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:39:39.175 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:39:39.176 +03:00 [DBG] Start authorize request
2019-06-25 13:39:39.176 +03:00 [DBG] Start authorize request
2019-06-25 13:39:39.176 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:39:39.177 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:39:39.177 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:39:39.177 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:39:39.208 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:39:39.208 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:39:39.209 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:39:39.210 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:39:39.216 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:39:39.216 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:39:39.228 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:39:39.228 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:39:39.233 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:39:39.233 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:39:39.245 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:39:39.246 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:39:39.246 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:39:39.246 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:39:39.247 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"9d4e925bb1004ebaaadfa318400cd5b8","UiLocales":null,"Nonce":"84cc9decceb848dcbb7c7da75970b1b2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"9d4e925bb1004ebaaadfa318400cd5b8","nonce":"84cc9decceb848dcbb7c7da75970b1b2","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:39:39.247 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"447910e3c423447db6c1bad9da4aa52c","UiLocales":null,"Nonce":"1641d6bfcb2041b7834f52d718aa3d59","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"447910e3c423447db6c1bad9da4aa52c","nonce":"1641d6bfcb2041b7834f52d718aa3d59","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:39:39.252 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:39:39.265 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:39:39.265 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:39:39.265 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:39:39.267 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:39:39.268 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:39:39.268 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:39:39.268 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:39:39.274 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:39:39.275 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:39:39.277 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:39:39.278 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:39:39.279 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****TKLw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Irhw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:0000000A","TimeStamp":"2019-06-25T10:39:39.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:39:39.281 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****m0eQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Irhw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENE:00000002","TimeStamp":"2019-06-25T10:39:39.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:39:39.282 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"9d4e925bb1004ebaaadfa318400cd5b8","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:39:39.285 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"447910e3c423447db6c1bad9da4aa52c","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:39:39.401 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:39:39.404 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:39:39.405 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:39:39.411 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:39:39.414 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:39:39.415 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:39:39.415 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:39:39.416 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:39:39.417 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:39:39.417 +03:00 [DBG] Start userinfo request
2019-06-25 13:39:39.417 +03:00 [DBG] Bearer token found in header
2019-06-25 13:39:39.435 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:39:39.436 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:39:39.450 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:39:39.450 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:39:39.453 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:39:39.454 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459179,"exp":1561459299,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:39:39.456 +03:00 [DBG] Creating userinfo response
2019-06-25 13:39:39.456 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:39:39.457 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:39:39.461 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:39:39.462 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:39:39.462 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:39:39.467 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:39:39.472 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:39:39.473 +03:00 [DBG] End userinfo request
2019-06-25 13:39:39.474 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:39:39.477 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:39:39.477 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:39:39.481 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:39:39.491 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:39:39.491 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:39:39.492 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:39:39.492 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:39:39.492 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:39:39.493 +03:00 [DBG] Start userinfo request
2019-06-25 13:39:39.493 +03:00 [DBG] Bearer token found in header
2019-06-25 13:39:39.509 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:39:39.510 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:39:39.524 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:39:39.525 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:39:39.527 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:39:39.528 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459179,"exp":1561459299,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:39:39.531 +03:00 [DBG] Creating userinfo response
2019-06-25 13:39:39.531 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:39:39.531 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:39:39.535 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:39:39.535 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:39:39.535 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:39:39.539 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:39:39.542 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:39:39.543 +03:00 [DBG] End userinfo request
2019-06-25 13:40:40.235 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:40:40.235 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:40:40.235 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:40:40.236 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:40:40.236 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:40:40.236 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:40:40.237 +03:00 [DBG] Start authorize request
2019-06-25 13:40:40.237 +03:00 [DBG] Start authorize request
2019-06-25 13:40:40.238 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:40:40.238 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:40:40.238 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:40:40.239 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:40:40.255 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:40:40.256 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:40:40.257 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:40:40.257 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:40:40.261 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:40:40.262 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:40:40.270 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:40:40.271 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:40:40.274 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:40:40.276 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:40:40.283 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:40:40.283 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:40:40.284 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"5a7b5cf52ffb41d9b4c7de3ee9ebc32c","UiLocales":null,"Nonce":"21d8cfd1b43042faa302134320389887","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"5a7b5cf52ffb41d9b4c7de3ee9ebc32c","nonce":"21d8cfd1b43042faa302134320389887","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:40:40.284 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:40:40.286 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:40:40.287 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"3782c8cb6ff14d08bedb28649a694a8c","UiLocales":null,"Nonce":"210dfb3b04a04f3f8283eb2c160d0340","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"3782c8cb6ff14d08bedb28649a694a8c","nonce":"210dfb3b04a04f3f8283eb2c160d0340","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:40:40.288 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:40:40.289 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:40:40.290 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:40:40.290 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:40:40.291 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:40:40.291 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:40:40.292 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:40:40.292 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:40:40.296 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:40:40.296 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:40:40.297 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:40:40.298 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:40:40.299 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****V0Hw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Oz2g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:0000000B","TimeStamp":"2019-06-25T10:40:40.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:40:40.300 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****fNNw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Oz2g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENE:00000003","TimeStamp":"2019-06-25T10:40:40.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:40:40.301 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"5a7b5cf52ffb41d9b4c7de3ee9ebc32c","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:40:40.303 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"3782c8cb6ff14d08bedb28649a694a8c","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:40:40.374 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:40:40.377 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:40:40.378 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:40:40.381 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:40:40.384 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:40:40.384 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:40:40.385 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:40:40.385 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:40:40.386 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:40:40.386 +03:00 [DBG] Start userinfo request
2019-06-25 13:40:40.386 +03:00 [DBG] Bearer token found in header
2019-06-25 13:40:40.402 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:40:40.403 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:40:40.409 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:40:40.411 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:40:40.412 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:40:40.418 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:40:40.418 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:40:40.421 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:40:40.422 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459240,"exp":1561459360,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:40:40.423 +03:00 [DBG] Creating userinfo response
2019-06-25 13:40:40.424 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:40:40.424 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:40:40.428 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:40:40.429 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:40:40.429 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:40:40.433 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:40:40.437 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:40:40.437 +03:00 [DBG] End userinfo request
2019-06-25 13:40:40.440 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:40:40.442 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:40:40.443 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:40:40.443 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:40:40.444 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:40:40.445 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:40:40.445 +03:00 [DBG] Start userinfo request
2019-06-25 13:40:40.445 +03:00 [DBG] Bearer token found in header
2019-06-25 13:40:40.460 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:40:40.461 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:40:40.471 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:40:40.471 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:40:40.474 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:40:40.474 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459240,"exp":1561459360,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:40:40.476 +03:00 [DBG] Creating userinfo response
2019-06-25 13:40:40.476 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:40:40.476 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:40:40.480 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:40:40.480 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:40:40.481 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:40:40.484 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:40:40.487 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:40:40.488 +03:00 [DBG] End userinfo request
2019-06-25 13:41:41.173 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:41:41.174 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:41:41.175 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:41:41.175 +03:00 [DBG] Start authorize request
2019-06-25 13:41:41.176 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:41:41.176 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:41:41.179 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:41:41.180 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:41:41.181 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:41:41.181 +03:00 [DBG] Start authorize request
2019-06-25 13:41:41.182 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:41:41.182 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:41:41.197 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:41:41.198 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:41:41.202 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:41:41.202 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:41:41.204 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:41:41.209 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:41:41.215 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:41:41.219 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:41:41.222 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:41:41.236 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:41:41.243 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:41:41.244 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:41:41.244 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"e2da348a98d94f319ff6ea366d904327","UiLocales":null,"Nonce":"f4a9422bbcaa4382ab31def03da69d7d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"e2da348a98d94f319ff6ea366d904327","nonce":"f4a9422bbcaa4382ab31def03da69d7d","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:41:41.248 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:41:41.249 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:41:41.250 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"b67fa9a01577455e8d12b218ff603c2d","UiLocales":null,"Nonce":"c95e16307c6240708a7fedb7140a388d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"b67fa9a01577455e8d12b218ff603c2d","nonce":"c95e16307c6240708a7fedb7140a388d","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:41:41.251 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:41:41.253 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:41:41.253 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:41:41.254 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:41:41.255 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:41:41.256 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:41:41.256 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:41:41.257 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:41:41.262 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:41:41.263 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:41:41.264 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:41:41.264 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:41:41.267 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****udlQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4WfQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENE:00000004","TimeStamp":"2019-06-25T10:41:41.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:41:41.268 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9bZg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4WfQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:0000000C","TimeStamp":"2019-06-25T10:41:41.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:41:41.284 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"e2da348a98d94f319ff6ea366d904327","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:41:41.290 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"b67fa9a01577455e8d12b218ff603c2d","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:41:41.386 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:41:41.393 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:41:41.394 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:41:41.425 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:41:41.427 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:41:41.428 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:41:41.428 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:41:41.429 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:41:41.429 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:41:41.430 +03:00 [DBG] Start userinfo request
2019-06-25 13:41:41.430 +03:00 [DBG] Bearer token found in header
2019-06-25 13:41:41.438 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:41:41.441 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:41:41.449 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:41:41.455 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:41:41.456 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:41:41.469 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:41:41.469 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:41:41.472 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:41:41.472 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459301,"exp":1561459421,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:41:41.474 +03:00 [DBG] Creating userinfo response
2019-06-25 13:41:41.474 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:41:41.475 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:41:41.479 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:41:41.480 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:41:41.480 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:41:41.484 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:41:41.487 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:41:41.488 +03:00 [DBG] End userinfo request
2019-06-25 13:41:41.490 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:41:41.493 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:41:41.493 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:41:41.494 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:41:41.495 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:41:41.495 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:41:41.495 +03:00 [DBG] Start userinfo request
2019-06-25 13:41:41.496 +03:00 [DBG] Bearer token found in header
2019-06-25 13:41:41.508 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:41:41.508 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:41:41.527 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:41:41.528 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:41:41.530 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:41:41.531 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459301,"exp":1561459421,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:41:41.533 +03:00 [DBG] Creating userinfo response
2019-06-25 13:41:41.533 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:41:41.534 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:41:41.538 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:41:41.539 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:41:41.539 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:41:41.543 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:41:41.546 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:41:41.547 +03:00 [DBG] End userinfo request
2019-06-25 13:42:42.179 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:42:42.180 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:42:42.181 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:42:42.181 +03:00 [DBG] Start authorize request
2019-06-25 13:42:42.182 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:42:42.182 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:42:42.199 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:42:42.200 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:42:42.201 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:42:42.202 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:42:42.202 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:42:42.203 +03:00 [DBG] Start authorize request
2019-06-25 13:42:42.203 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:42:42.204 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:42:42.206 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:42:42.214 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:42:42.218 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:42:42.230 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:42:42.231 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:42:42.231 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"c51b1b4d6e40436a931f6e0ddc0ecc47","UiLocales":null,"Nonce":"37c311de3d8c4234955ba67b2940faeb","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"c51b1b4d6e40436a931f6e0ddc0ecc47","nonce":"37c311de3d8c4234955ba67b2940faeb","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:42:42.237 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:42:42.237 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:42:42.238 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:42:42.238 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:42:42.246 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:42:42.247 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:42:42.251 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****b1rw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****UtWw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENE:00000005","TimeStamp":"2019-06-25T10:42:42.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:42:42.254 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"c51b1b4d6e40436a931f6e0ddc0ecc47","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:42:42.276 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:42:42.277 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:42:42.286 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:42:42.302 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:42:42.307 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:42:42.318 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:42:42.322 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:42:42.323 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"162476e3dd9c4420b53d542ed88dc835","UiLocales":null,"Nonce":"a609935db5c34c5492fe261606223413","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"162476e3dd9c4420b53d542ed88dc835","nonce":"a609935db5c34c5492fe261606223413","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:42:42.329 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:42:42.331 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:42:42.332 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:42:42.332 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:42:42.338 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:42:42.338 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:42:42.342 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9t6Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****UtWw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:0000000D","TimeStamp":"2019-06-25T10:42:42.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:42:42.344 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"162476e3dd9c4420b53d542ed88dc835","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:42:42.355 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:42:42.359 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:42:42.361 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:42:42.376 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:42:42.380 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:42:42.381 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:42:42.382 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:42:42.383 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:42:42.383 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:42:42.384 +03:00 [DBG] Start userinfo request
2019-06-25 13:42:42.384 +03:00 [DBG] Bearer token found in header
2019-06-25 13:42:42.413 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:42:42.414 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:42:42.445 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:42:42.445 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:42:42.448 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:42:42.448 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459362,"exp":1561459482,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:42:42.451 +03:00 [DBG] Creating userinfo response
2019-06-25 13:42:42.451 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:42:42.452 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:42:42.458 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:42:42.459 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:42:42.459 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:42:42.466 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:42:42.475 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:42:42.476 +03:00 [DBG] End userinfo request
2019-06-25 13:42:42.516 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:42:42.519 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:42:42.519 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:42:42.523 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:42:42.525 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:42:42.526 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:42:42.526 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:42:42.527 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:42:42.527 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:42:42.527 +03:00 [DBG] Start userinfo request
2019-06-25 13:42:42.527 +03:00 [DBG] Bearer token found in header
2019-06-25 13:42:42.545 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:42:42.545 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:42:42.555 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:42:42.555 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:42:42.557 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:42:42.558 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459362,"exp":1561459482,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:42:42.559 +03:00 [DBG] Creating userinfo response
2019-06-25 13:42:42.560 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:42:42.560 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:42:42.566 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:42:42.566 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:42:42.567 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:42:42.572 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:42:42.577 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:42:42.577 +03:00 [DBG] End userinfo request
2019-06-25 13:43:43.175 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:43:43.177 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:43:43.177 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:43:43.177 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:43:43.178 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:43:43.179 +03:00 [DBG] Start authorize request
2019-06-25 13:43:43.179 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:43:43.180 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:43:43.180 +03:00 [DBG] Start authorize request
2019-06-25 13:43:43.181 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:43:43.181 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:43:43.182 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:43:43.202 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:43:43.202 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:43:43.203 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:43:43.203 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:43:43.211 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:43:43.211 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:43:43.226 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:43:43.229 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:43:43.233 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:43:43.236 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:43:43.245 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:43:43.246 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:43:43.247 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d268613e88834af299741b8a17373674","UiLocales":null,"Nonce":"3c241dbd1b3c4314bf5494f82ffd266f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d268613e88834af299741b8a17373674","nonce":"3c241dbd1b3c4314bf5494f82ffd266f","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:43:43.253 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:43:43.262 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:43:43.262 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"4b2ca7e807ab44978125367837b1e97c","UiLocales":null,"Nonce":"80cbe467bef54364aedbb1f629ff8392","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"4b2ca7e807ab44978125367837b1e97c","nonce":"80cbe467bef54364aedbb1f629ff8392","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:43:43.265 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:43:43.268 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:43:43.268 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:43:43.269 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:43:43.272 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:43:43.272 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:43:43.273 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:43:43.273 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:43:43.279 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:43:43.280 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:43:43.282 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:43:43.283 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:43:43.283 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****td2Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1JMw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:0000000E","TimeStamp":"2019-06-25T10:43:43.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:43:43.286 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Dadg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1JMw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENE:00000006","TimeStamp":"2019-06-25T10:43:43.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:43:43.298 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"d268613e88834af299741b8a17373674","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:43:43.303 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"4b2ca7e807ab44978125367837b1e97c","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:43:43.396 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:43:43.399 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:43:43.400 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:43:43.407 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:43:43.410 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:43:43.410 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:43:43.411 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:43:43.411 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:43:43.412 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:43:43.412 +03:00 [DBG] Start userinfo request
2019-06-25 13:43:43.412 +03:00 [DBG] Bearer token found in header
2019-06-25 13:43:43.433 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:43:43.434 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:43:43.445 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:43:43.448 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:43:43.448 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:43:43.453 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:43:43.454 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:43:43.456 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:43:43.457 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459423,"exp":1561459543,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:43:43.459 +03:00 [DBG] Creating userinfo response
2019-06-25 13:43:43.459 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:43:43.460 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:43:43.466 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:43:43.467 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:43:43.467 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:43:43.471 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:43:43.474 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:43:43.475 +03:00 [DBG] End userinfo request
2019-06-25 13:43:43.477 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:43:43.479 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:43:43.480 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:43:43.480 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:43:43.481 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:43:43.481 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:43:43.481 +03:00 [DBG] Start userinfo request
2019-06-25 13:43:43.481 +03:00 [DBG] Bearer token found in header
2019-06-25 13:43:43.493 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:43:43.493 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:43:43.509 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:43:43.510 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:43:43.516 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:43:43.518 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459423,"exp":1561459543,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:43:43.521 +03:00 [DBG] Creating userinfo response
2019-06-25 13:43:43.522 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:43:43.522 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:43:43.528 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:43:43.528 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:43:43.530 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:43:43.534 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:43:43.538 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:43:43.540 +03:00 [DBG] End userinfo request
2019-06-25 13:44:44.175 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:44:44.176 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:44:44.177 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:44:44.177 +03:00 [DBG] Start authorize request
2019-06-25 13:44:44.178 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:44:44.178 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:44:44.178 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:44:44.179 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:44:44.179 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:44:44.180 +03:00 [DBG] Start authorize request
2019-06-25 13:44:44.181 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:44:44.181 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:44:44.200 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:44:44.202 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:44:44.202 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:44:44.203 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:44:44.208 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:44:44.210 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:44:44.233 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:44:44.235 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:44:44.238 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:44:44.240 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:44:44.248 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:44:44.249 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:44:44.249 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"0d3ad2943e494137afed73d13b95fa67","UiLocales":null,"Nonce":"86ee659dfd7e415fb12b0cd1f206d2fa","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"0d3ad2943e494137afed73d13b95fa67","nonce":"86ee659dfd7e415fb12b0cd1f206d2fa","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:44:44.250 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:44:44.252 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:44:44.253 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"faf3617d124c470faba84b4d8047d34a","UiLocales":null,"Nonce":"cb40c4a6400a4188a528cbd83f25f0bc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"faf3617d124c470faba84b4d8047d34a","nonce":"cb40c4a6400a4188a528cbd83f25f0bc","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:44:44.254 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:44:44.257 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:44:44.260 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:44:44.270 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:44:44.270 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:44:44.271 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:44:44.271 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:44:44.272 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:44:44.279 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:44:44.279 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:44:44.279 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:44:44.280 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:44:44.283 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****dp9A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****YhoQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENE:00000007","TimeStamp":"2019-06-25T10:44:44.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:44:44.283 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****NKRw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****YhoQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENB:0000000F","TimeStamp":"2019-06-25T10:44:44.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:44:44.286 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"faf3617d124c470faba84b4d8047d34a","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:44:44.289 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"0d3ad2943e494137afed73d13b95fa67","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:44:44.361 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:44:44.362 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:44:44.365 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:44:44.365 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:44:44.366 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:44:44.367 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:44:44.400 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:44:44.403 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:44:44.403 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:44:44.404 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:44:44.405 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:44:44.405 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:44:44.405 +03:00 [DBG] Start userinfo request
2019-06-25 13:44:44.406 +03:00 [DBG] Bearer token found in header
2019-06-25 13:44:44.423 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:44:44.423 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:44:44.433 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:44:44.433 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:44:44.436 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:44:44.437 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459484,"exp":1561459604,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:44:44.439 +03:00 [DBG] Creating userinfo response
2019-06-25 13:44:44.439 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:44:44.440 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:44:44.444 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:44:44.445 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:44:44.445 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:44:44.448 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:44:44.453 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:44:44.453 +03:00 [DBG] End userinfo request
2019-06-25 13:44:44.455 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:44:44.458 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:44:44.458 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:44:44.460 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:44:44.465 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:44:44.466 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:44:44.466 +03:00 [DBG] Start userinfo request
2019-06-25 13:44:44.466 +03:00 [DBG] Bearer token found in header
2019-06-25 13:44:44.478 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:44:44.478 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:44:44.488 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:44:44.488 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:44:44.490 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:44:44.491 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459484,"exp":1561459604,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:44:44.493 +03:00 [DBG] Creating userinfo response
2019-06-25 13:44:44.493 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:44:44.493 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:44:44.497 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:44:44.497 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:44:44.498 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:44:44.501 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:44:44.504 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:44:44.514 +03:00 [DBG] End userinfo request
2019-06-25 13:45:45.177 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:45:45.178 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:45:45.179 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:45:45.180 +03:00 [DBG] Start authorize request
2019-06-25 13:45:45.180 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:45:45.182 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:45:45.182 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:45:45.183 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:45:45.184 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:45:45.185 +03:00 [DBG] Start authorize request
2019-06-25 13:45:45.186 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:45:45.186 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:45:45.199 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:45:45.199 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:45:45.203 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:45:45.203 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:45:45.206 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:45:45.210 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:45:45.219 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:45:45.221 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:45:45.225 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:45:45.226 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:45:45.239 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:45:45.239 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:45:45.240 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:45:45.240 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:45:45.241 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"b409a1b109574485b6eb3fd53b333970","UiLocales":null,"Nonce":"1383b1980378413da55298e028063d80","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"b409a1b109574485b6eb3fd53b333970","nonce":"1383b1980378413da55298e028063d80","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:45:45.241 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"7f466212ea3745e683b31eb428d006e8","UiLocales":null,"Nonce":"6d9272e1a7714efab4c00bd74dd67ff3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"7f466212ea3745e683b31eb428d006e8","nonce":"6d9272e1a7714efab4c00bd74dd67ff3","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:45:45.246 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:45:45.247 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:45:45.247 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:45:45.247 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:45:45.248 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:45:45.249 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:45:45.249 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:45:45.250 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:45:45.253 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:45:45.256 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:45:45.256 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:45:45.266 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:45:45.269 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****nncw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****-amQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENI:00000001","TimeStamp":"2019-06-25T10:45:45.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:45:45.269 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****fOWA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****-amQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENH:00000001","TimeStamp":"2019-06-25T10:45:45.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:45:45.273 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"b409a1b109574485b6eb3fd53b333970","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:45:45.275 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"7f466212ea3745e683b31eb428d006e8","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:45:45.378 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:45:45.381 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:45:45.382 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:45:45.386 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:45:45.390 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:45:45.390 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:45:45.391 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:45:45.392 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:45:45.392 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:45:45.393 +03:00 [DBG] Start userinfo request
2019-06-25 13:45:45.393 +03:00 [DBG] Bearer token found in header
2019-06-25 13:45:45.409 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:45:45.409 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:45:45.409 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:45:45.412 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:45:45.412 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:45:45.420 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:45:45.421 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:45:45.423 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:45:45.423 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459545,"exp":1561459665,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:45:45.425 +03:00 [DBG] Creating userinfo response
2019-06-25 13:45:45.426 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:45:45.426 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:45:45.430 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:45:45.430 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:45:45.431 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:45:45.435 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:45:45.440 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:45:45.451 +03:00 [DBG] End userinfo request
2019-06-25 13:45:45.454 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:45:45.456 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:45:45.456 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:45:45.458 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:45:45.459 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:45:45.459 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:45:45.459 +03:00 [DBG] Start userinfo request
2019-06-25 13:45:45.459 +03:00 [DBG] Bearer token found in header
2019-06-25 13:45:45.479 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:45:45.480 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:45:45.490 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:45:45.490 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:45:45.493 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:45:45.493 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459545,"exp":1561459665,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:45:45.495 +03:00 [DBG] Creating userinfo response
2019-06-25 13:45:45.495 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:45:45.496 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:45:45.500 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:45:45.501 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:45:45.501 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:45:45.507 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:45:45.510 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:45:45.511 +03:00 [DBG] End userinfo request
2019-06-25 13:46:46.176 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:46:46.177 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:46:46.177 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:46:46.180 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:46:46.184 +03:00 [DBG] Start authorize request
2019-06-25 13:46:46.186 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:46:46.187 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:46:46.187 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:46:46.188 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:46:46.189 +03:00 [DBG] Start authorize request
2019-06-25 13:46:46.189 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:46:46.190 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:46:46.205 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:46:46.205 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:46:46.207 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:46:46.207 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:46:46.212 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:46:46.212 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:46:46.223 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:46:46.223 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:46:46.231 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:46:46.231 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:46:46.241 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:46:46.241 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:46:46.242 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:46:46.242 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:46:46.243 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"892e8bb81e5f4bc5a61a7a0f7db60cc3","UiLocales":null,"Nonce":"5b7f9a68d59d4cd2a52aea08c58c025e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"892e8bb81e5f4bc5a61a7a0f7db60cc3","nonce":"5b7f9a68d59d4cd2a52aea08c58c025e","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:46:46.244 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"2dc6e84c36a94b1c9909b6fe8d77e6b9","UiLocales":null,"Nonce":"78c0b4220c8b4f96a5fbfac4e672ab4e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"2dc6e84c36a94b1c9909b6fe8d77e6b9","nonce":"78c0b4220c8b4f96a5fbfac4e672ab4e","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:46:46.251 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:46:46.264 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:46:46.265 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:46:46.265 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:46:46.265 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:46:46.266 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:46:46.266 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:46:46.267 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:46:46.274 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:46:46.274 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:46:46.275 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:46:46.275 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:46:46.277 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Qu5g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_AQQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENH:00000002","TimeStamp":"2019-06-25T10:46:46.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:46:46.278 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****0d8w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_AQQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENI:00000002","TimeStamp":"2019-06-25T10:46:46.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:46:46.280 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"892e8bb81e5f4bc5a61a7a0f7db60cc3","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:46:46.283 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"2dc6e84c36a94b1c9909b6fe8d77e6b9","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:46:46.361 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:46:46.364 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:46:46.365 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:46:46.381 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:46:46.383 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:46:46.384 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:46:46.384 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:46:46.385 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:46:46.385 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:46:46.385 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:46:46.386 +03:00 [DBG] Start userinfo request
2019-06-25 13:46:46.386 +03:00 [DBG] Bearer token found in header
2019-06-25 13:46:46.388 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:46:46.388 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:46:46.402 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:46:46.402 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:46:46.415 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:46:46.415 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:46:46.418 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:46:46.418 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459606,"exp":1561459726,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:46:46.420 +03:00 [DBG] Creating userinfo response
2019-06-25 13:46:46.421 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:46:46.421 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:46:46.426 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:46:46.427 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:46:46.428 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:46:46.433 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:46:46.438 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:46:46.438 +03:00 [DBG] End userinfo request
2019-06-25 13:46:46.441 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:46:46.444 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:46:46.445 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:46:46.445 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:46:46.446 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:46:46.446 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:46:46.447 +03:00 [DBG] Start userinfo request
2019-06-25 13:46:46.447 +03:00 [DBG] Bearer token found in header
2019-06-25 13:46:46.460 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:46:46.460 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:46:46.470 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:46:46.471 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:46:46.473 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:46:46.474 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459606,"exp":1561459726,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:46:46.475 +03:00 [DBG] Creating userinfo response
2019-06-25 13:46:46.476 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:46:46.476 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:46:46.480 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:46:46.480 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:46:46.481 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:46:46.484 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:46:46.488 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:46:46.489 +03:00 [DBG] End userinfo request
2019-06-25 13:47:47.174 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:47:47.175 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:47:47.175 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:47:47.176 +03:00 [DBG] Start authorize request
2019-06-25 13:47:47.177 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:47:47.177 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:47:47.177 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:47:47.178 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:47:47.179 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:47:47.179 +03:00 [DBG] Start authorize request
2019-06-25 13:47:47.180 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:47:47.180 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:47:47.197 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:47:47.197 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:47:47.198 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:47:47.199 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:47:47.203 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:47:47.204 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:47:47.216 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:47:47.217 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:47:47.221 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:47:47.223 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:47:47.233 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:47:47.233 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:47:47.234 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"87daea1355cd4eafb95397da2389e79e","UiLocales":null,"Nonce":"6a0266e01abd4af68f241e3f8ec1f22a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"87daea1355cd4eafb95397da2389e79e","nonce":"6a0266e01abd4af68f241e3f8ec1f22a","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:47:47.234 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:47:47.238 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:47:47.240 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:47:47.251 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"24cef87a926244e4b64a95d519c21299","UiLocales":null,"Nonce":"fce95b80e1534803b885cd7344f9fdea","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"24cef87a926244e4b64a95d519c21299","nonce":"fce95b80e1534803b885cd7344f9fdea","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:47:47.251 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:47:47.254 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:47:47.255 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:47:47.257 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:47:47.257 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:47:47.258 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:47:47.258 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:47:47.262 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:47:47.263 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:47:47.267 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:47:47.267 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****zT0w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****SOrA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENI:00000003","TimeStamp":"2019-06-25T10:47:47.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:47:47.268 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:47:47.270 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"87daea1355cd4eafb95397da2389e79e","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:47:47.273 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****KPpQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****SOrA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENH:00000003","TimeStamp":"2019-06-25T10:47:47.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:47:47.276 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"24cef87a926244e4b64a95d519c21299","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:47:47.348 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:47:47.351 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:47:47.352 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:47:47.356 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:47:47.359 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:47:47.360 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:47:47.360 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:47:47.361 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:47:47.361 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:47:47.362 +03:00 [DBG] Start userinfo request
2019-06-25 13:47:47.362 +03:00 [DBG] Bearer token found in header
2019-06-25 13:47:47.371 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:47:47.374 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:47:47.375 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:47:47.380 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:47:47.390 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:47:47.401 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:47:47.401 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:47:47.404 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:47:47.404 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459667,"exp":1561459787,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:47:47.406 +03:00 [DBG] Creating userinfo response
2019-06-25 13:47:47.406 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:47:47.406 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:47:47.411 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:47:47.411 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:47:47.412 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:47:47.417 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:47:47.422 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:47:47.422 +03:00 [DBG] End userinfo request
2019-06-25 13:47:47.425 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:47:47.429 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:47:47.438 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:47:47.438 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:47:47.439 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:47:47.439 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:47:47.439 +03:00 [DBG] Start userinfo request
2019-06-25 13:47:47.440 +03:00 [DBG] Bearer token found in header
2019-06-25 13:47:47.452 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:47:47.452 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:47:47.463 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:47:47.463 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:47:47.466 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:47:47.466 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459667,"exp":1561459787,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:47:47.468 +03:00 [DBG] Creating userinfo response
2019-06-25 13:47:47.468 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:47:47.468 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:47:47.472 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:47:47.473 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:47:47.474 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:47:47.484 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:47:47.488 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:47:47.489 +03:00 [DBG] End userinfo request
2019-06-25 13:48:48.178 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:48:48.179 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:48:48.180 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:48:48.180 +03:00 [DBG] Start authorize request
2019-06-25 13:48:48.181 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:48:48.181 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:48:48.182 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:48:48.183 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:48:48.184 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:48:48.185 +03:00 [DBG] Start authorize request
2019-06-25 13:48:48.185 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:48:48.186 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:48:48.200 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:48:48.201 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:48:48.208 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:48:48.220 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:48:48.225 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:48:48.237 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:48:48.238 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:48:48.238 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"f95de0a2494540ed8181f92d612cdfb8","UiLocales":null,"Nonce":"9b872997fe1d4b259a55a2d08094fd00","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"f95de0a2494540ed8181f92d612cdfb8","nonce":"9b872997fe1d4b259a55a2d08094fd00","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:48:48.243 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:48:48.244 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:48:48.244 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:48:48.245 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:48:48.252 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:48:48.253 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:48:48.255 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:48:48.256 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:48:48.257 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****FuFg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****A4OQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENH:00000004","TimeStamp":"2019-06-25T10:48:48.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:48:48.260 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"f95de0a2494540ed8181f92d612cdfb8","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:48:48.260 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:48:48.274 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:48:48.280 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:48:48.306 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:48:48.307 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:48:48.307 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"346819f455d54f9ea0e057fca0b955c1","UiLocales":null,"Nonce":"f887aa59b5f643fb851e0e43b195ddbb","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"346819f455d54f9ea0e057fca0b955c1","nonce":"f887aa59b5f643fb851e0e43b195ddbb","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:48:48.313 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:48:48.314 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:48:48.314 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:48:48.314 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:48:48.322 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:48:48.322 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:48:48.326 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****qIQg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****A4OQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENI:00000004","TimeStamp":"2019-06-25T10:48:48.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:48:48.329 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"346819f455d54f9ea0e057fca0b955c1","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:48:48.435 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:48:48.437 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:48:48.439 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:48:48.441 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:48:48.444 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:48:48.454 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:48:48.454 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:48:48.454 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:48:48.455 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:48:48.456 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:48:48.456 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:48:48.457 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:48:48.457 +03:00 [DBG] Start userinfo request
2019-06-25 13:48:48.457 +03:00 [DBG] Bearer token found in header
2019-06-25 13:48:48.470 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:48:48.471 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:48:48.486 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:48:48.487 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:48:48.490 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:48:48.494 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459728,"exp":1561459848,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:48:48.496 +03:00 [DBG] Creating userinfo response
2019-06-25 13:48:48.496 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:48:48.497 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:48:48.501 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:48:48.502 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:48:48.502 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:48:48.507 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:48:48.511 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:48:48.512 +03:00 [DBG] End userinfo request
2019-06-25 13:48:48.514 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:48:48.516 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:48:48.517 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:48:48.517 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:48:48.518 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:48:48.518 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:48:48.519 +03:00 [DBG] Start userinfo request
2019-06-25 13:48:48.519 +03:00 [DBG] Bearer token found in header
2019-06-25 13:48:48.534 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:48:48.534 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:48:48.548 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:48:48.549 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:48:48.551 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:48:48.551 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459728,"exp":1561459848,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:48:48.553 +03:00 [DBG] Creating userinfo response
2019-06-25 13:48:48.553 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:48:48.553 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:48:48.557 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:48:48.557 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:48:48.558 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:48:48.562 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:48:48.566 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:48:48.567 +03:00 [DBG] End userinfo request
2019-06-25 13:49:49.187 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:49:49.188 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:49:49.188 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:49:49.189 +03:00 [DBG] Start authorize request
2019-06-25 13:49:49.189 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:49:49.190 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:49:49.207 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:49:49.208 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:49:49.212 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:49:49.213 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:49:49.214 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:49:49.215 +03:00 [DBG] Start authorize request
2019-06-25 13:49:49.215 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:49:49.216 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:49:49.221 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:49:49.234 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:49:49.234 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:49:49.236 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:49:49.241 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:49:49.243 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:49:49.252 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:49:49.253 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:49:49.254 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:49:49.255 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"66ba7a9b29884b218cd51561893e45d2","UiLocales":null,"Nonce":"1d0c08b696c2469ba5e088dbea44a973","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"66ba7a9b29884b218cd51561893e45d2","nonce":"1d0c08b696c2469ba5e088dbea44a973","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:49:49.256 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:49:49.261 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:49:49.261 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:49:49.262 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:49:49.262 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:49:49.266 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:49:49.268 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:49:49.269 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:49:49.278 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"eac3a6b5ed694c2ebded123f00f3eb01","UiLocales":null,"Nonce":"d66d37c368104342aed4c4b3b8b886bc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"eac3a6b5ed694c2ebded123f00f3eb01","nonce":"d66d37c368104342aed4c4b3b8b886bc","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:49:49.278 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:49:49.286 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:49:49.286 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****KVsA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****JZIw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENM:00000001","TimeStamp":"2019-06-25T10:49:49.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:49:49.287 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:49:49.290 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"66ba7a9b29884b218cd51561893e45d2","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:49:49.290 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:49:49.291 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:49:49.299 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:49:49.300 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:49:49.304 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****plkg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****JZIw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000001","TimeStamp":"2019-06-25T10:49:49.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:49:49.320 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"eac3a6b5ed694c2ebded123f00f3eb01","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:49:49.393 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:49:49.396 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:49:49.396 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:49:49.396 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:49:49.399 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:49:49.400 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:49:49.413 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:49:49.416 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:49:49.416 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:49:49.417 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:49:49.417 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:49:49.418 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:49:49.418 +03:00 [DBG] Start userinfo request
2019-06-25 13:49:49.419 +03:00 [DBG] Bearer token found in header
2019-06-25 13:49:49.435 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:49:49.435 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:49:49.445 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:49:49.445 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:49:49.448 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:49:49.448 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459789,"exp":1561459909,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:49:49.451 +03:00 [DBG] Creating userinfo response
2019-06-25 13:49:49.451 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:49:49.452 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:49:49.457 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:49:49.458 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:49:49.459 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:49:49.464 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:49:49.468 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:49:49.469 +03:00 [DBG] End userinfo request
2019-06-25 13:49:49.480 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:49:49.482 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:49:49.483 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:49:49.483 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:49:49.484 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:49:49.484 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:49:49.485 +03:00 [DBG] Start userinfo request
2019-06-25 13:49:49.485 +03:00 [DBG] Bearer token found in header
2019-06-25 13:49:49.497 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:49:49.497 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:49:49.507 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:49:49.507 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:49:49.510 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:49:49.510 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459789,"exp":1561459909,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:49:49.512 +03:00 [DBG] Creating userinfo response
2019-06-25 13:49:49.512 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:49:49.513 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:49:49.516 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:49:49.517 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:49:49.517 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:49:49.523 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:49:49.527 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:49:49.528 +03:00 [DBG] End userinfo request
2019-06-25 13:50:50.218 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:50:50.219 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:50:50.219 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:50:50.220 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:50:50.220 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:50:50.221 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:50:50.221 +03:00 [DBG] Start authorize request
2019-06-25 13:50:50.222 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:50:50.222 +03:00 [DBG] Start authorize request
2019-06-25 13:50:50.223 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:50:50.223 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:50:50.224 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:50:50.242 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:50:50.242 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:50:50.242 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:50:50.243 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:50:50.252 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:50:50.252 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:50:50.265 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:50:50.266 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:50:50.272 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:50:50.283 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:50:50.290 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:50:50.291 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:50:50.291 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"324fe28d33624ef3b515ab971b35efb3","UiLocales":null,"Nonce":"0b85d638400e4371bdc3d0ba547012ab","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"324fe28d33624ef3b515ab971b35efb3","nonce":"0b85d638400e4371bdc3d0ba547012ab","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:50:50.300 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:50:50.300 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:50:50.301 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:50:50.301 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:50:50.301 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:50:50.302 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:50:50.303 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"97b5c576bd6d49c78ff2c89b8620f6db","UiLocales":null,"Nonce":"0e67e78f06c54cb5942f67924b9fd981","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"97b5c576bd6d49c78ff2c89b8620f6db","nonce":"0e67e78f06c54cb5942f67924b9fd981","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:50:50.313 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:50:50.320 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:50:50.324 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:50:50.324 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****qYKQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****xNrQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENM:00000002","TimeStamp":"2019-06-25T10:50:50.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:50:50.326 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:50:50.329 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"324fe28d33624ef3b515ab971b35efb3","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:50:50.330 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:50:50.331 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:50:50.341 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:50:50.342 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:50:50.346 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bhSQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****xNrQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000002","TimeStamp":"2019-06-25T10:50:50.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:50:50.362 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"97b5c576bd6d49c78ff2c89b8620f6db","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:50:50.511 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:50:50.513 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:50:50.514 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:50:50.521 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:50:50.524 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:50:50.525 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:50:50.526 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:50:50.527 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:50:50.527 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:50:50.528 +03:00 [DBG] Start userinfo request
2019-06-25 13:50:50.528 +03:00 [DBG] Bearer token found in header
2019-06-25 13:50:50.546 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:50:50.546 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:50:50.551 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:50:50.555 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:50:50.560 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:50:50.564 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:50:50.564 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:50:50.566 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:50:50.567 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459850,"exp":1561459970,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:50:50.568 +03:00 [DBG] Creating userinfo response
2019-06-25 13:50:50.569 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:50:50.569 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:50:50.574 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:50:50.574 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:50:50.574 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:50:50.579 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:50:50.584 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:50:50.585 +03:00 [DBG] End userinfo request
2019-06-25 13:50:50.589 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:50:50.596 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:50:50.597 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:50:50.598 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:50:50.599 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:50:50.599 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:50:50.600 +03:00 [DBG] Start userinfo request
2019-06-25 13:50:50.600 +03:00 [DBG] Bearer token found in header
2019-06-25 13:50:50.616 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:50:50.616 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:50:50.628 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:50:50.629 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:50:50.632 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:50:50.633 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459850,"exp":1561459970,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:50:50.636 +03:00 [DBG] Creating userinfo response
2019-06-25 13:50:50.636 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:50:50.637 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:50:50.641 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:50:50.642 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:50:50.642 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:50:50.647 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:50:50.650 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:50:50.651 +03:00 [DBG] End userinfo request
2019-06-25 13:51:51.190 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:51:51.191 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:51:51.191 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:51:51.192 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:51:51.193 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:51:51.193 +03:00 [DBG] Start authorize request
2019-06-25 13:51:51.194 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:51:51.194 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:51:51.195 +03:00 [DBG] Start authorize request
2019-06-25 13:51:51.195 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:51:51.196 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:51:51.196 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:51:51.216 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:51:51.217 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:51:51.217 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:51:51.218 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:51:51.224 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:51:51.224 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:51:51.234 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:51:51.236 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:51:51.238 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:51:51.240 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:51:51.245 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:51:51.248 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:51:51.252 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:51:51.252 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:51:51.252 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"c05224cda86648b693446fde744ea97d","UiLocales":null,"Nonce":"d77146b72a414625af447d0aa6a386c2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"c05224cda86648b693446fde744ea97d","nonce":"d77146b72a414625af447d0aa6a386c2","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:51:51.253 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"bd1cd0321771478a8a947ab830655a96","UiLocales":null,"Nonce":"88a7b3ae864841afb7e72490addd1c60","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"bd1cd0321771478a8a947ab830655a96","nonce":"88a7b3ae864841afb7e72490addd1c60","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:51:51.256 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:51:51.260 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:51:51.260 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:51:51.261 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:51:51.261 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:51:51.261 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:51:51.261 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:51:51.262 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:51:51.269 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:51:51.269 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:51:51.269 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:51:51.270 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:51:51.272 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****SBWA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****YGAQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENM:00000003","TimeStamp":"2019-06-25T10:51:51.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:51:51.273 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****OBfQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****YGAQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000003","TimeStamp":"2019-06-25T10:51:51.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:51:51.275 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"bd1cd0321771478a8a947ab830655a96","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:51:51.277 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"c05224cda86648b693446fde744ea97d","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:51:51.382 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:51:51.386 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:51:51.389 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:51:51.392 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:51:51.395 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:51:51.396 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:51:51.397 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:51:51.397 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:51:51.398 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:51:51.398 +03:00 [DBG] Start userinfo request
2019-06-25 13:51:51.398 +03:00 [DBG] Bearer token found in header
2019-06-25 13:51:51.410 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:51:51.413 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:51:51.413 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:51:51.413 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:51:51.413 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:51:51.423 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:51:51.424 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:51:51.426 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:51:51.427 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459911,"exp":1561460031,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:51:51.437 +03:00 [DBG] Creating userinfo response
2019-06-25 13:51:51.438 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:51:51.438 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:51:51.441 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:51:51.442 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:51:51.442 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:51:51.446 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:51:51.449 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:51:51.449 +03:00 [DBG] End userinfo request
2019-06-25 13:51:51.452 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:51:51.454 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:51:51.455 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:51:51.455 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:51:51.456 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:51:51.456 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:51:51.457 +03:00 [DBG] Start userinfo request
2019-06-25 13:51:51.457 +03:00 [DBG] Bearer token found in header
2019-06-25 13:51:51.470 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:51:51.471 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:51:51.484 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:51:51.484 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:51:51.494 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:51:51.495 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459911,"exp":1561460031,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:51:51.497 +03:00 [DBG] Creating userinfo response
2019-06-25 13:51:51.497 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:51:51.497 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:51:51.503 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:51:51.504 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:51:51.504 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:51:51.510 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:51:51.515 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:51:51.515 +03:00 [DBG] End userinfo request
2019-06-25 13:52:52.184 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:52:52.186 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:52:52.186 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:52:52.187 +03:00 [DBG] Start authorize request
2019-06-25 13:52:52.188 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:52:52.188 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:52:52.189 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:52:52.190 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:52:52.190 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:52:52.191 +03:00 [DBG] Start authorize request
2019-06-25 13:52:52.192 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:52:52.193 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:52:52.208 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:52:52.209 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:52:52.212 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:52:52.213 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:52:52.216 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:52:52.221 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:52:52.231 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:52:52.240 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:52:52.242 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:52:52.245 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:52:52.259 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:52:52.259 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:52:52.260 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:52:52.260 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:52:52.261 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"3435796064a54da7acf56cfc27288d08","UiLocales":null,"Nonce":"e4d813367bde457382f0b0d59703b478","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"3435796064a54da7acf56cfc27288d08","nonce":"e4d813367bde457382f0b0d59703b478","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:52:52.261 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"2839168e152c4d7789b6570b31a4e447","UiLocales":null,"Nonce":"e6e822ba0a234159bf6505c0ed826d12","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"2839168e152c4d7789b6570b31a4e447","nonce":"e6e822ba0a234159bf6505c0ed826d12","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:52:52.266 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:52:52.266 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:52:52.266 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:52:52.267 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:52:52.268 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:52:52.269 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:52:52.269 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:52:52.269 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:52:52.273 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:52:52.274 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:52:52.277 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:52:52.278 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:52:52.278 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ZUAQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_Q4A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENM:00000004","TimeStamp":"2019-06-25T10:52:52.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:52:52.281 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"3435796064a54da7acf56cfc27288d08","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:52:52.281 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****p0ow","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_Q4A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000004","TimeStamp":"2019-06-25T10:52:52.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:52:52.284 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"2839168e152c4d7789b6570b31a4e447","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:52:52.368 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:52:52.369 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:52:52.372 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:52:52.373 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:52:52.373 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:52:52.374 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:52:52.377 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:52:52.379 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:52:52.380 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:52:52.380 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:52:52.381 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:52:52.381 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:52:52.382 +03:00 [DBG] Start userinfo request
2019-06-25 13:52:52.382 +03:00 [DBG] Bearer token found in header
2019-06-25 13:52:52.401 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:52:52.401 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:52:52.415 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:52:52.415 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:52:52.417 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:52:52.418 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459972,"exp":1561460092,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:52:52.420 +03:00 [DBG] Creating userinfo response
2019-06-25 13:52:52.420 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:52:52.420 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:52:52.424 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:52:52.436 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:52:52.436 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:52:52.440 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:52:52.445 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:52:52.445 +03:00 [DBG] End userinfo request
2019-06-25 13:52:52.448 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:52:52.450 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:52:52.451 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:52:52.451 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:52:52.452 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:52:52.452 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:52:52.453 +03:00 [DBG] Start userinfo request
2019-06-25 13:52:52.453 +03:00 [DBG] Bearer token found in header
2019-06-25 13:52:52.469 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:52:52.469 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:52:52.482 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:52:52.483 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:52:52.485 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:52:52.486 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561459972,"exp":1561460092,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:52:52.487 +03:00 [DBG] Creating userinfo response
2019-06-25 13:52:52.488 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:52:52.488 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:52:52.494 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:52:52.495 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:52:52.495 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:52:52.499 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:52:52.503 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:52:52.503 +03:00 [DBG] End userinfo request
2019-06-25 13:53:53.177 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:53:53.178 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:53:53.178 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:53:53.179 +03:00 [DBG] Start authorize request
2019-06-25 13:53:53.181 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:53:53.181 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:53:53.182 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:53:53.192 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:53:53.193 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:53:53.193 +03:00 [DBG] Start authorize request
2019-06-25 13:53:53.194 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:53:53.195 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:53:53.210 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:53:53.210 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:53:53.213 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:53:53.213 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:53:53.216 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:53:53.218 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:53:53.225 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:53:53.228 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:53:53.230 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:53:53.234 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:53:53.238 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:53:53.239 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:53:53.239 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"8f1a9f21d01d43999ecf42efc79c2e68","UiLocales":null,"Nonce":"64a7f82142c54d6984249191a02ff379","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"8f1a9f21d01d43999ecf42efc79c2e68","nonce":"64a7f82142c54d6984249191a02ff379","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:53:53.241 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:53:53.242 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:53:53.242 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"7fa941b94f2a4b7ab9b1f68d776a3158","UiLocales":null,"Nonce":"a559b4dd1f91431b9354b98aacbb4f7c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"7fa941b94f2a4b7ab9b1f68d776a3158","nonce":"a559b4dd1f91431b9354b98aacbb4f7c","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:53:53.244 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:53:53.245 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:53:53.245 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:53:53.246 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:53:53.247 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:53:53.248 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:53:53.248 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:53:53.248 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:53:53.252 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:53:53.254 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:53:53.254 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:53:53.263 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:53:53.266 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****pWyQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ZidA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENM:00000005","TimeStamp":"2019-06-25T10:53:53.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:53:53.267 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****N6oA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ZidA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000005","TimeStamp":"2019-06-25T10:53:53.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:53:53.270 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"7fa941b94f2a4b7ab9b1f68d776a3158","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:53:53.274 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"8f1a9f21d01d43999ecf42efc79c2e68","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:53:53.353 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:53:53.356 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:53:53.356 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:53:53.390 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:53:53.392 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:53:53.393 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:53:53.393 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:53:53.394 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:53:53.395 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:53:53.398 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:53:53.407 +03:00 [DBG] Start userinfo request
2019-06-25 13:53:53.407 +03:00 [DBG] Bearer token found in header
2019-06-25 13:53:53.409 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:53:53.410 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:53:53.423 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:53:53.424 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:53:53.436 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:53:53.437 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:53:53.439 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:53:53.440 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460033,"exp":1561460153,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:53:53.449 +03:00 [DBG] Creating userinfo response
2019-06-25 13:53:53.449 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:53:53.450 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:53:53.454 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:53:53.454 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:53:53.455 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:53:53.460 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:53:53.464 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:53:53.465 +03:00 [DBG] End userinfo request
2019-06-25 13:53:53.467 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:53:53.470 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:53:53.471 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:53:53.471 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:53:53.471 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:53:53.472 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:53:53.472 +03:00 [DBG] Start userinfo request
2019-06-25 13:53:53.472 +03:00 [DBG] Bearer token found in header
2019-06-25 13:53:53.488 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:53:53.489 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:53:53.498 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:53:53.499 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:53:53.501 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:53:53.501 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460033,"exp":1561460153,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:53:53.503 +03:00 [DBG] Creating userinfo response
2019-06-25 13:53:53.503 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:53:53.503 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:53:53.508 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:53:53.508 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:53:53.509 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:53:53.513 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:53:53.517 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:53:53.517 +03:00 [DBG] End userinfo request
2019-06-25 13:54:54.183 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:54:54.185 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:54:54.186 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:54:54.187 +03:00 [DBG] Start authorize request
2019-06-25 13:54:54.187 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:54:54.187 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:54:54.207 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:54:54.207 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:54:54.215 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:54:54.229 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:54:54.236 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:54:54.248 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:54:54.249 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:54:54.250 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"c825ab4f468d4fc3ac094899b35c96b4","UiLocales":null,"Nonce":"098de77820b148cab85d0c1c8f991dcc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"c825ab4f468d4fc3ac094899b35c96b4","nonce":"098de77820b148cab85d0c1c8f991dcc","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:54:54.257 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:54:54.258 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:54:54.259 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:54:54.265 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:54:54.273 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:54:54.273 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:54:54.274 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:54:54.275 +03:00 [DBG] Start authorize request
2019-06-25 13:54:54.275 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:54:54.276 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:54:54.281 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:54:54.282 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:54:54.284 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9Rig","$type":"Token"},{"TokenType":"access_token","TokenValue":"****cBZQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000006","TimeStamp":"2019-06-25T10:54:54.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:54:54.287 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"c825ab4f468d4fc3ac094899b35c96b4","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:54:54.357 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:54:54.357 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:54:54.362 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:54:54.372 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:54:54.381 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:54:54.391 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:54:54.392 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:54:54.392 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"e008cfba4c504125bf44e18f382a174a","UiLocales":null,"Nonce":"3eb9fd4495764913801b9b1ae7afff6f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"e008cfba4c504125bf44e18f382a174a","nonce":"3eb9fd4495764913801b9b1ae7afff6f","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:54:54.397 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:54:54.398 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:54:54.398 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:54:54.398 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:54:54.406 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:54:54.407 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:54:54.411 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****8c6A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****cBZQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENM:00000006","TimeStamp":"2019-06-25T10:54:54.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:54:54.414 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"e008cfba4c504125bf44e18f382a174a","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:54:54.447 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:54:54.452 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:54:54.453 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:54:54.457 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:54:54.460 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:54:54.464 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:54:54.465 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:54:54.466 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:54:54.467 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:54:54.467 +03:00 [DBG] Start userinfo request
2019-06-25 13:54:54.468 +03:00 [DBG] Bearer token found in header
2019-06-25 13:54:54.488 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:54:54.488 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:54:54.506 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:54:54.507 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:54:54.509 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:54:54.510 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:54:54.511 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460094,"exp":1561460214,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:54:54.512 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:54:54.514 +03:00 [DBG] Creating userinfo response
2019-06-25 13:54:54.514 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:54:54.515 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:54:54.515 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:54:54.520 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:54:54.521 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:54:54.521 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:54:54.526 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:54:54.530 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:54:54.530 +03:00 [DBG] End userinfo request
2019-06-25 13:54:54.533 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:54:54.536 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:54:54.536 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:54:54.537 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:54:54.537 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:54:54.538 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:54:54.538 +03:00 [DBG] Start userinfo request
2019-06-25 13:54:54.538 +03:00 [DBG] Bearer token found in header
2019-06-25 13:54:54.550 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:54:54.551 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:54:54.561 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:54:54.562 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:54:54.565 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:54:54.565 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460094,"exp":1561460214,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:54:54.567 +03:00 [DBG] Creating userinfo response
2019-06-25 13:54:54.567 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:54:54.568 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:54:54.572 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:54:54.572 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:54:54.573 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:54:54.577 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:54:54.581 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:54:54.582 +03:00 [DBG] End userinfo request
2019-06-25 13:55:55.177 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:55:55.178 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:55:55.178 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:55:55.179 +03:00 [DBG] Start authorize request
2019-06-25 13:55:55.180 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:55:55.180 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:55:55.181 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:55:55.182 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:55:55.182 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:55:55.183 +03:00 [DBG] Start authorize request
2019-06-25 13:55:55.183 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:55:55.184 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:55:55.199 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:55:55.200 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:55:55.204 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:55:55.204 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:55:55.208 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:55:55.211 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:55:55.226 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:55:55.227 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:55:55.233 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:55:55.234 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:55:55.246 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:55:55.247 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:55:55.247 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:55:55.248 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"5b059780b65b443c8a9716f9440c50a0","UiLocales":null,"Nonce":"4447a487535045dabed3b3e63db3bac8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"5b059780b65b443c8a9716f9440c50a0","nonce":"4447a487535045dabed3b3e63db3bac8","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:55:55.248 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:55:55.252 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"6eb2207ec0494d049013a0ea8fe0310a","UiLocales":null,"Nonce":"9db1d96da141497594599629dac991ce","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"6eb2207ec0494d049013a0ea8fe0310a","nonce":"9db1d96da141497594599629dac991ce","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:55:55.255 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:55:55.257 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:55:55.257 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:55:55.257 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:55:55.259 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:55:55.261 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:55:55.263 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:55:55.268 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:55:55.275 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:55:55.275 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:55:55.279 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****88Qg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1pBw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENM:00000007","TimeStamp":"2019-06-25T10:55:55.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:55:55.283 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"5b059780b65b443c8a9716f9440c50a0","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:55:55.283 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:55:55.284 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:55:55.287 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****t-oQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1pBw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000007","TimeStamp":"2019-06-25T10:55:55.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:55:55.290 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"6eb2207ec0494d049013a0ea8fe0310a","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:55:55.377 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:55:55.380 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:55:55.380 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:55:55.384 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:55:55.387 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:55:55.388 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:55:55.388 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:55:55.389 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:55:55.389 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:55:55.389 +03:00 [DBG] Start userinfo request
2019-06-25 13:55:55.390 +03:00 [DBG] Bearer token found in header
2019-06-25 13:55:55.400 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:55:55.403 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:55:55.404 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:55:55.406 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:55:55.406 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:55:55.420 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:55:55.420 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:55:55.422 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:55:55.423 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460155,"exp":1561460275,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:55:55.428 +03:00 [DBG] Creating userinfo response
2019-06-25 13:55:55.429 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:55:55.429 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:55:55.432 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:55:55.433 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:55:55.433 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:55:55.437 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:55:55.440 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:55:55.441 +03:00 [DBG] End userinfo request
2019-06-25 13:55:55.443 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:55:55.445 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:55:55.446 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:55:55.446 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:55:55.447 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:55:55.447 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:55:55.447 +03:00 [DBG] Start userinfo request
2019-06-25 13:55:55.448 +03:00 [DBG] Bearer token found in header
2019-06-25 13:55:55.458 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:55:55.463 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:55:55.475 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:55:55.476 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:55:55.480 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:55:55.480 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460155,"exp":1561460275,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:55:55.482 +03:00 [DBG] Creating userinfo response
2019-06-25 13:55:55.483 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:55:55.483 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:55:55.488 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:55:55.489 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:55:55.490 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:55:55.502 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:55:55.507 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:55:55.507 +03:00 [DBG] End userinfo request
2019-06-25 13:56:56.181 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:56:56.182 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:56:56.183 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:56:56.183 +03:00 [DBG] Start authorize request
2019-06-25 13:56:56.184 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:56:56.184 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:56:56.184 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:56:56.185 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:56:56.186 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:56:56.186 +03:00 [DBG] Start authorize request
2019-06-25 13:56:56.187 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:56:56.187 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:56:56.203 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:56:56.204 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:56:56.204 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:56:56.204 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:56:56.208 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:56:56.208 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:56:56.220 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:56:56.226 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:56:56.230 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:56:56.235 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:56:56.238 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:56:56.238 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:56:56.239 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"a8eeedd77f1c435eaf45bb860a1b1033","UiLocales":null,"Nonce":"583ec0837b874aeca5f435a60076f983","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"a8eeedd77f1c435eaf45bb860a1b1033","nonce":"583ec0837b874aeca5f435a60076f983","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:56:56.243 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:56:56.244 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:56:56.244 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:56:56.244 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d98a530e788a49c299444765a3d9115d","UiLocales":null,"Nonce":"04b35b33207545a593ac3331761eb0c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d98a530e788a49c299444765a3d9115d","nonce":"04b35b33207545a593ac3331761eb0c6","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:56:56.244 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:56:56.248 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:56:56.248 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:56:56.250 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:56:56.251 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:56:56.251 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:56:56.252 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:56:56.257 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:56:56.259 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:56:56.260 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:56:56.271 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:56:56.273 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****B-8A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ggbA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000008","TimeStamp":"2019-06-25T10:56:56.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:56:56.274 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9HjQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ggbA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENM:00000008","TimeStamp":"2019-06-25T10:56:56.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:56:56.277 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"a8eeedd77f1c435eaf45bb860a1b1033","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:56:56.281 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"d98a530e788a49c299444765a3d9115d","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:56:56.389 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:56:56.392 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:56:56.392 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:56:56.403 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:56:56.406 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:56:56.406 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:56:56.410 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:56:56.413 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:56:56.414 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:56:56.415 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:56:56.415 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:56:56.415 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:56:56.416 +03:00 [DBG] Start userinfo request
2019-06-25 13:56:56.416 +03:00 [DBG] Bearer token found in header
2019-06-25 13:56:56.430 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:56:56.433 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:56:56.454 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:56:56.455 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:56:56.458 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:56:56.459 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460216,"exp":1561460336,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:56:56.462 +03:00 [DBG] Creating userinfo response
2019-06-25 13:56:56.471 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:56:56.472 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:56:56.476 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:56:56.477 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:56:56.478 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:56:56.483 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:56:56.486 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:56:56.487 +03:00 [DBG] End userinfo request
2019-06-25 13:56:56.489 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:56:56.492 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:56:56.492 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:56:56.493 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:56:56.493 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:56:56.494 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:56:56.494 +03:00 [DBG] Start userinfo request
2019-06-25 13:56:56.494 +03:00 [DBG] Bearer token found in header
2019-06-25 13:56:56.508 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:56:56.509 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:56:56.527 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:56:56.527 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:56:56.530 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:56:56.530 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460216,"exp":1561460336,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:56:56.532 +03:00 [DBG] Creating userinfo response
2019-06-25 13:56:56.532 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:56:56.532 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:56:56.537 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:56:56.537 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:56:56.538 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:56:56.542 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:56:56.547 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:56:56.547 +03:00 [DBG] End userinfo request
2019-06-25 13:57:57.190 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:57:57.192 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:57:57.193 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:57:57.193 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:57:57.194 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:57:57.195 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:57:57.195 +03:00 [DBG] Start authorize request
2019-06-25 13:57:57.196 +03:00 [DBG] Start authorize request
2019-06-25 13:57:57.197 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:57:57.197 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:57:57.198 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:57:57.198 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:57:57.214 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:57:57.215 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:57:57.217 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:57:57.217 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:57:57.219 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:57:57.222 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:57:57.228 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:57:57.233 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:57:57.235 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:57:57.247 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:57:57.253 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:57:57.253 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:57:57.254 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"ed4f749e26014a9dbea4616a567f7787","UiLocales":null,"Nonce":"0c71bea05f7d4a0894d6d8fcf8b2cf85","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"ed4f749e26014a9dbea4616a567f7787","nonce":"0c71bea05f7d4a0894d6d8fcf8b2cf85","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:57:57.257 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:57:57.257 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:57:57.258 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d2814cddb7fb4ba282d569d74477b94e","UiLocales":null,"Nonce":"5abb8969c21d4de7a1535db3512d7ab1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d2814cddb7fb4ba282d569d74477b94e","nonce":"5abb8969c21d4de7a1535db3512d7ab1","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:57:57.259 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:57:57.261 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:57:57.261 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:57:57.262 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:57:57.263 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:57:57.263 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:57:57.263 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:57:57.264 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:57:57.268 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:57:57.269 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:57:57.270 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:57:57.271 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:57:57.272 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****KCRw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8WpA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENM:00000009","TimeStamp":"2019-06-25T10:57:57.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:57:57.273 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****KypA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8WpA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000009","TimeStamp":"2019-06-25T10:57:57.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:57:57.275 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"ed4f749e26014a9dbea4616a567f7787","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:57:57.291 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"d2814cddb7fb4ba282d569d74477b94e","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:57:57.358 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:57:57.361 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:57:57.361 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:57:57.365 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:57:57.367 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:57:57.368 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:57:57.368 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:57:57.369 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:57:57.369 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:57:57.369 +03:00 [DBG] Start userinfo request
2019-06-25 13:57:57.370 +03:00 [DBG] Bearer token found in header
2019-06-25 13:57:57.384 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:57:57.384 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:57:57.386 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:57:57.389 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:57:57.389 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:57:57.398 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:57:57.398 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:57:57.406 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:57:57.407 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460277,"exp":1561460397,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:57:57.419 +03:00 [DBG] Creating userinfo response
2019-06-25 13:57:57.419 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:57:57.420 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:57:57.424 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:57:57.424 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:57:57.425 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:57:57.430 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:57:57.433 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:57:57.433 +03:00 [DBG] End userinfo request
2019-06-25 13:57:57.435 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:57:57.438 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:57:57.438 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:57:57.439 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:57:57.439 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:57:57.440 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:57:57.440 +03:00 [DBG] Start userinfo request
2019-06-25 13:57:57.440 +03:00 [DBG] Bearer token found in header
2019-06-25 13:57:57.456 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:57:57.456 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:57:57.466 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:57:57.466 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:57:57.469 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:57:57.469 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460277,"exp":1561460397,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:57:57.471 +03:00 [DBG] Creating userinfo response
2019-06-25 13:57:57.471 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:57:57.472 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:57:57.476 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:57:57.477 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:57:57.477 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:57:57.481 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:57:57.485 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:57:57.485 +03:00 [DBG] End userinfo request
2019-06-25 13:58:44.764 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:58:44.768 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:58:44.769 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:58:44.769 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 13:58:44.771 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 13:58:44.772 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 13:58:44.772 +03:00 [DBG] Start discovery request
2019-06-25 13:58:44.792 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 13:58:44.818 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:58:44.820 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:58:44.820 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:58:44.821 +03:00 [DBG] Start authorize request
2019-06-25 13:58:44.823 +03:00 [DBG] No user present in authorize request
2019-06-25 13:58:44.824 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:58:44.846 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:58:44.848 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:58:44.854 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:58:44.872 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:58:44.880 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:58:44.891 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:58:44.892 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:58:44.893 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"09f59fd2e13a460c977584bf6ffb3ce7","UiLocales":null,"Nonce":"22366ccb853845fba503ebe88e2848c3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"09f59fd2e13a460c977584bf6ffb3ce7","nonce":"22366ccb853845fba503ebe88e2848c3"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:58:44.897 +03:00 [INF] Showing login: User is not authenticated
2019-06-25 13:58:44.955 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:58:44.968 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:58:44.969 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:58:44.974 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:58:44.983 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:58:44.991 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:58:44.999 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:58:44.999 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:58:45.013 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:58:45.013 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:58:58.195 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:58:58.196 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:58:58.197 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:58:58.197 +03:00 [DBG] Start authorize request
2019-06-25 13:58:58.198 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:58:58.199 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:58:58.218 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:58:58.219 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:58:58.224 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:58:58.234 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:58:58.239 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:58:58.247 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:58:58.248 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:58:58.248 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"d67cbd58c62d4a4fb68f9ea407122f55","UiLocales":null,"Nonce":"781d0650a38e42a5940ccab7b8f15a21","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"d67cbd58c62d4a4fb68f9ea407122f55","nonce":"781d0650a38e42a5940ccab7b8f15a21","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:58:58.253 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:58:58.253 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:58:58.254 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:58:58.254 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:58:58.262 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:58:58.262 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:58:58.265 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****MrSw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****hrcQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:0000000A","TimeStamp":"2019-06-25T10:58:58.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:58:58.267 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"d67cbd58c62d4a4fb68f9ea407122f55","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:58:58.365 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:58:58.368 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:58:58.369 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:58:58.399 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:58:58.401 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:58:58.402 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:58:58.403 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:58:58.403 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:58:58.404 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:58:58.404 +03:00 [DBG] Start userinfo request
2019-06-25 13:58:58.404 +03:00 [DBG] Bearer token found in header
2019-06-25 13:58:58.417 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:58:58.418 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:58:58.428 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:58:58.428 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:58:58.431 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:58:58.431 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460338,"exp":1561460458,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:58:58.433 +03:00 [DBG] Creating userinfo response
2019-06-25 13:58:58.433 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:58:58.433 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:58:58.437 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:58:58.437 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:58:58.438 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:58:58.443 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:58:58.446 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:58:58.447 +03:00 [DBG] End userinfo request
2019-06-25 13:59:59.249 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 13:59:59.250 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 13:59:59.250 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 13:59:59.251 +03:00 [DBG] Start authorize request
2019-06-25 13:59:59.251 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:59:59.251 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 13:59:59.266 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:59:59.267 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:59:59.271 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:59:59.278 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:59:59.282 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:59:59.292 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 13:59:59.292 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 13:59:59.293 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"fa37557139cb4517b3e51caa951eff08","UiLocales":null,"Nonce":"59e82bf5152945eb8a533829a2ce7475","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"fa37557139cb4517b3e51caa951eff08","nonce":"59e82bf5152945eb8a533829a2ce7475","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 13:59:59.298 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 13:59:59.298 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 13:59:59.299 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 13:59:59.299 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 13:59:59.305 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 13:59:59.306 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 13:59:59.308 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****awgQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****hqbA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:0000000B","TimeStamp":"2019-06-25T10:59:59.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 13:59:59.311 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"fa37557139cb4517b3e51caa951eff08","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 13:59:59.415 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:59:59.418 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:59:59.423 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:59:59.429 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 13:59:59.432 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 13:59:59.432 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 13:59:59.433 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 13:59:59.434 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 13:59:59.434 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 13:59:59.437 +03:00 [DBG] Start userinfo request
2019-06-25 13:59:59.437 +03:00 [DBG] Bearer token found in header
2019-06-25 13:59:59.455 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:59:59.455 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:59:59.469 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 13:59:59.469 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 13:59:59.472 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 13:59:59.473 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460399,"exp":1561460519,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 13:59:59.476 +03:00 [DBG] Creating userinfo response
2019-06-25 13:59:59.476 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:59:59.476 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:59:59.482 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:59:59.482 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 13:59:59.483 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 13:59:59.487 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 13:59:59.503 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 13:59:59.503 +03:00 [DBG] End userinfo request
2019-06-25 14:01:00.177 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:01:00.178 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:01:00.179 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:01:00.180 +03:00 [DBG] Start authorize request
2019-06-25 14:01:00.180 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:01:00.181 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:01:00.196 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:01:00.196 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:01:00.202 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:01:00.210 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:01:00.216 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:01:00.233 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:01:00.234 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:01:00.235 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"167d34ce278c4fcb8336ec2a3bf6f485","UiLocales":null,"Nonce":"180e33a670a9404bba8fb8024a95a97e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"167d34ce278c4fcb8336ec2a3bf6f485","nonce":"180e33a670a9404bba8fb8024a95a97e","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:01:00.352 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:01:00.353 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:01:00.354 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:01:00.354 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:01:00.363 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:01:00.363 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:01:00.373 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****7syw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****IEuA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:0000000C","TimeStamp":"2019-06-25T11:01:00.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:01:00.375 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"167d34ce278c4fcb8336ec2a3bf6f485","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:01:00.482 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:01:00.485 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:01:00.486 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:01:00.514 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:01:00.517 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:01:00.518 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:01:00.518 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 14:01:00.520 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 14:01:00.520 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 14:01:00.530 +03:00 [DBG] Start userinfo request
2019-06-25 14:01:00.530 +03:00 [DBG] Bearer token found in header
2019-06-25 14:01:00.545 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:01:00.545 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:01:00.555 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:01:00.555 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:01:00.558 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 14:01:00.558 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460460,"exp":1561460580,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 14:01:00.560 +03:00 [DBG] Creating userinfo response
2019-06-25 14:01:00.560 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:01:00.561 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:01:00.565 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:01:00.565 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 14:01:00.566 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:01:00.571 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:01:00.574 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 14:01:00.575 +03:00 [DBG] End userinfo request
2019-06-25 14:02:01.180 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:02:01.181 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:02:01.182 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:02:01.183 +03:00 [DBG] Start authorize request
2019-06-25 14:02:01.184 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:02:01.189 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:02:01.203 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:02:01.204 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:02:01.209 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:02:01.219 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:02:01.224 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:02:01.231 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:02:01.231 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:02:01.232 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"c7f1bba495db4e11a080969440adf2ae","UiLocales":null,"Nonce":"14233c730b6549f4b385a29130f797a2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"c7f1bba495db4e11a080969440adf2ae","nonce":"14233c730b6549f4b385a29130f797a2","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:02:01.236 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:02:01.236 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:02:01.237 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:02:01.237 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:02:01.243 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:02:01.243 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:02:01.246 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****4tKA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zpgA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:0000000D","TimeStamp":"2019-06-25T11:02:01.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:02:01.249 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"c7f1bba495db4e11a080969440adf2ae","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:02:01.310 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:02:01.314 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:02:01.314 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:02:01.319 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:02:01.323 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:02:01.324 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:02:01.324 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 14:02:01.325 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 14:02:01.326 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 14:02:01.326 +03:00 [DBG] Start userinfo request
2019-06-25 14:02:01.326 +03:00 [DBG] Bearer token found in header
2019-06-25 14:02:01.349 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:02:01.349 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:02:01.366 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:02:01.366 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:02:01.369 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 14:02:01.370 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460521,"exp":1561460641,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 14:02:01.372 +03:00 [DBG] Creating userinfo response
2019-06-25 14:02:01.372 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:02:01.372 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:02:01.377 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:02:01.377 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 14:02:01.378 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:02:01.382 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:02:01.398 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 14:02:01.400 +03:00 [DBG] End userinfo request
2019-06-25 14:03:02.186 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:03:02.187 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:03:02.188 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:03:02.189 +03:00 [DBG] Start authorize request
2019-06-25 14:03:02.189 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:03:02.190 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:03:02.207 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:03:02.208 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:03:02.213 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:03:02.221 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:03:02.226 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:03:02.235 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:03:02.235 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:03:02.236 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"9fb3261eb88c47ac8726663e41145dff","UiLocales":null,"Nonce":"89c16ffdfbcd4e0a9471998ad2f8d977","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"9fb3261eb88c47ac8726663e41145dff","nonce":"89c16ffdfbcd4e0a9471998ad2f8d977","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:03:02.241 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:03:02.241 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:03:02.242 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:03:02.242 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:03:02.249 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:03:02.249 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:03:02.253 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****i7mQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dPhw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:0000000E","TimeStamp":"2019-06-25T11:03:02.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:03:02.272 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"9fb3261eb88c47ac8726663e41145dff","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:03:02.381 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:03:02.385 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:03:02.387 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:03:02.392 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:03:02.395 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:03:02.396 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:03:02.398 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 14:03:02.412 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 14:03:02.413 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 14:03:02.413 +03:00 [DBG] Start userinfo request
2019-06-25 14:03:02.414 +03:00 [DBG] Bearer token found in header
2019-06-25 14:03:02.433 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:03:02.434 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:03:02.452 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:03:02.452 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:03:02.455 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 14:03:02.456 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460582,"exp":1561460702,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 14:03:02.458 +03:00 [DBG] Creating userinfo response
2019-06-25 14:03:02.459 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:03:02.459 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:03:02.464 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:03:02.465 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 14:03:02.465 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:03:02.471 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:03:02.485 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 14:03:02.485 +03:00 [DBG] End userinfo request
2019-06-25 14:04:03.203 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:04:03.204 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:04:03.204 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:04:03.205 +03:00 [DBG] Start authorize request
2019-06-25 14:04:03.206 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:04:03.206 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:04:03.226 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:04:03.227 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:04:03.234 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:04:03.246 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:04:03.253 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:04:03.265 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:04:03.266 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:04:03.266 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"b0aa7c3ed069435092c0519333fafc83","UiLocales":null,"Nonce":"c4586ae33f2347c7bfcb3d2c98756b4d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"b0aa7c3ed069435092c0519333fafc83","nonce":"c4586ae33f2347c7bfcb3d2c98756b4d","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:04:03.272 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:04:03.273 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:04:03.273 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:04:03.273 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:04:03.281 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:04:03.281 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:04:03.284 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****m41A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ayVA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:0000000F","TimeStamp":"2019-06-25T11:04:03.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:04:03.288 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"b0aa7c3ed069435092c0519333fafc83","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:04:03.459 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:04:03.480 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:04:03.482 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:04:03.501 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:04:03.508 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:04:03.511 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:04:03.514 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 14:04:03.516 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 14:04:03.517 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 14:04:03.522 +03:00 [DBG] Start userinfo request
2019-06-25 14:04:03.540 +03:00 [DBG] Bearer token found in header
2019-06-25 14:04:03.613 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:04:03.613 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:04:03.685 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:04:03.688 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:04:03.706 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 14:04:03.707 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460643,"exp":1561460763,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 14:04:03.710 +03:00 [DBG] Creating userinfo response
2019-06-25 14:04:03.710 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:04:03.711 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:04:03.757 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:04:03.764 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 14:04:03.766 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:04:03.813 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:04:03.824 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 14:04:03.825 +03:00 [DBG] End userinfo request
2019-06-25 14:05:04.212 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:05:04.214 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:05:04.215 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:05:04.216 +03:00 [DBG] Start authorize request
2019-06-25 14:05:04.216 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:05:04.217 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:05:04.235 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:05:04.236 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:05:04.240 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:05:04.248 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:05:04.251 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:05:04.260 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:05:04.260 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:05:04.261 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"a4e4abaaaa8f489dabba635f60e5d97a","UiLocales":null,"Nonce":"35c0555df7b44335866c54bebe35bf34","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"a4e4abaaaa8f489dabba635f60e5d97a","nonce":"35c0555df7b44335866c54bebe35bf34","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:05:04.265 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:05:04.265 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:05:04.265 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:05:04.266 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:05:04.271 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:05:04.271 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:05:04.274 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bg9g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7fMg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000010","TimeStamp":"2019-06-25T11:05:04.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:05:04.276 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"a4e4abaaaa8f489dabba635f60e5d97a","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:05:04.400 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:05:04.403 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:05:04.404 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:05:04.409 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:05:04.412 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:05:04.413 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:05:04.414 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 14:05:04.415 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 14:05:04.425 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 14:05:04.426 +03:00 [DBG] Start userinfo request
2019-06-25 14:05:04.426 +03:00 [DBG] Bearer token found in header
2019-06-25 14:05:04.443 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:05:04.444 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:05:04.459 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:05:04.459 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:05:04.462 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 14:05:04.463 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460704,"exp":1561460824,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 14:05:04.470 +03:00 [DBG] Creating userinfo response
2019-06-25 14:05:04.470 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:05:04.471 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:05:04.477 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:05:04.478 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 14:05:04.478 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:05:04.483 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:05:04.489 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 14:05:04.491 +03:00 [DBG] End userinfo request
2019-06-25 14:06:05.209 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:06:05.210 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:06:05.211 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:06:05.212 +03:00 [DBG] Start authorize request
2019-06-25 14:06:05.213 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:06:05.214 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:06:05.240 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:06:05.241 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:06:05.248 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:06:05.259 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:06:05.264 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:06:05.305 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:06:05.305 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:06:05.306 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"a97de2c9aa72463d99813673ebf33ee0","UiLocales":null,"Nonce":"fc45b79da63445e6a36ffdb508e689d8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"a97de2c9aa72463d99813673ebf33ee0","nonce":"fc45b79da63445e6a36ffdb508e689d8","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:06:05.313 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:06:05.314 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:06:05.314 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:06:05.314 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:06:05.323 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:06:05.323 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:06:05.327 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ZGKw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****fS5g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000011","TimeStamp":"2019-06-25T11:06:05.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:06:05.331 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"a97de2c9aa72463d99813673ebf33ee0","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:06:05.409 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:06:05.413 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:06:05.414 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:06:05.418 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:06:05.422 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:06:05.422 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:06:05.423 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 14:06:05.424 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 14:06:05.424 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 14:06:05.424 +03:00 [DBG] Start userinfo request
2019-06-25 14:06:05.424 +03:00 [DBG] Bearer token found in header
2019-06-25 14:06:05.439 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:06:05.439 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:06:05.451 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:06:05.452 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:06:05.454 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 14:06:05.455 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460765,"exp":1561460885,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 14:06:05.456 +03:00 [DBG] Creating userinfo response
2019-06-25 14:06:05.457 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:06:05.457 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:06:05.462 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:06:05.463 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 14:06:05.463 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:06:05.468 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:06:05.481 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 14:06:05.481 +03:00 [DBG] End userinfo request
2019-06-25 14:07:06.209 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:07:06.210 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:07:06.211 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:07:06.212 +03:00 [DBG] Start authorize request
2019-06-25 14:07:06.213 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:07:06.214 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:07:06.239 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:07:06.240 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:07:06.246 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:07:06.256 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:07:06.260 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:07:06.268 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:07:06.269 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:07:06.269 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"61ac90d9ed5b44cdaf30d0a3b6d81383","UiLocales":null,"Nonce":"b137ae00c7f0488fbede9b70c071438c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"61ac90d9ed5b44cdaf30d0a3b6d81383","nonce":"b137ae00c7f0488fbede9b70c071438c","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:07:06.275 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:07:06.276 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:07:06.276 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:07:06.276 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:07:06.284 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:07:06.285 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:07:06.288 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****00FA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****p1Eg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000012","TimeStamp":"2019-06-25T11:07:06.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:07:06.292 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"61ac90d9ed5b44cdaf30d0a3b6d81383","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:07:06.366 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:07:06.370 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:07:06.387 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:07:06.408 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:07:06.412 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:07:06.414 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:07:06.415 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 14:07:06.427 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 14:07:06.428 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 14:07:06.428 +03:00 [DBG] Start userinfo request
2019-06-25 14:07:06.429 +03:00 [DBG] Bearer token found in header
2019-06-25 14:07:06.446 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:07:06.447 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:07:06.460 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:07:06.461 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:07:06.463 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 14:07:06.465 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460826,"exp":1561460946,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 14:07:06.472 +03:00 [DBG] Creating userinfo response
2019-06-25 14:07:06.472 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:07:06.472 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:07:06.477 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:07:06.477 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 14:07:06.478 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:07:06.481 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:07:06.485 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 14:07:06.485 +03:00 [DBG] End userinfo request
2019-06-25 14:08:07.247 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:08:07.248 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:08:07.249 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:08:07.250 +03:00 [DBG] Start authorize request
2019-06-25 14:08:07.250 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:08:07.250 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:08:07.267 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:08:07.267 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:08:07.273 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:08:07.284 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:08:07.290 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:08:07.300 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:08:07.300 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:08:07.301 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"5e63e8f5658b40bba1f1c75fc49381d4","UiLocales":null,"Nonce":"22fb020986fe4c3dbc73044f7edb0b7c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"5e63e8f5658b40bba1f1c75fc49381d4","nonce":"22fb020986fe4c3dbc73044f7edb0b7c","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:08:07.307 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:08:07.308 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:08:07.309 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:08:07.310 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:08:07.330 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:08:07.331 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:08:07.334 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****uFXw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ZNRw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000013","TimeStamp":"2019-06-25T11:08:07.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:08:07.337 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"5e63e8f5658b40bba1f1c75fc49381d4","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:08:07.442 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:08:07.445 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:08:07.446 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:08:07.450 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:08:07.453 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:08:07.458 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:08:07.458 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 14:08:07.459 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 14:08:07.459 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 14:08:07.460 +03:00 [DBG] Start userinfo request
2019-06-25 14:08:07.461 +03:00 [DBG] Bearer token found in header
2019-06-25 14:08:07.472 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:08:07.473 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:08:07.485 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:08:07.485 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:08:07.488 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 14:08:07.488 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460887,"exp":1561461007,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 14:08:07.490 +03:00 [DBG] Creating userinfo response
2019-06-25 14:08:07.490 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:08:07.490 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:08:07.494 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:08:07.503 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 14:08:07.503 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:08:07.511 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:08:07.517 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 14:08:07.517 +03:00 [DBG] End userinfo request
2019-06-25 14:09:08.187 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:09:08.188 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:09:08.189 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:09:08.190 +03:00 [DBG] Start authorize request
2019-06-25 14:09:08.190 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:09:08.191 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:09:08.207 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:09:08.208 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:09:08.212 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:09:08.218 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:09:08.222 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:09:08.229 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:09:08.230 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:09:08.241 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"5afabef58aa04e4bb139dd88040c0ae3","UiLocales":null,"Nonce":"29c5a14efe594510a6c4f8c6e99494f8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"5afabef58aa04e4bb139dd88040c0ae3","nonce":"29c5a14efe594510a6c4f8c6e99494f8","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:09:08.248 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:09:08.250 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:09:08.250 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:09:08.251 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:09:08.261 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:09:08.261 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:09:08.264 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bHQg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****-g3w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000014","TimeStamp":"2019-06-25T11:09:08.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:09:08.267 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"5afabef58aa04e4bb139dd88040c0ae3","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:09:08.372 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:09:08.376 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:09:08.377 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:09:08.401 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:09:08.404 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:09:08.405 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:09:08.406 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 14:09:08.406 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 14:09:08.407 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 14:09:08.407 +03:00 [DBG] Start userinfo request
2019-06-25 14:09:08.407 +03:00 [DBG] Bearer token found in header
2019-06-25 14:09:08.423 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:09:08.423 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:09:08.434 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:09:08.435 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:09:08.437 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 14:09:08.437 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561460948,"exp":1561461068,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 14:09:08.439 +03:00 [DBG] Creating userinfo response
2019-06-25 14:09:08.440 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:09:08.440 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:09:08.446 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:09:08.447 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 14:09:08.447 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:09:08.453 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:09:08.457 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 14:09:08.457 +03:00 [DBG] End userinfo request
2019-06-25 14:10:09.198 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:10:09.199 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:10:09.200 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:10:09.200 +03:00 [DBG] Start authorize request
2019-06-25 14:10:09.201 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:10:09.201 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:10:09.218 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:10:09.219 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:10:09.224 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:10:09.235 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:10:09.242 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:10:09.253 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:10:09.254 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:10:09.255 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"0738abf3d77a46d7834e60ff9edb4fe4","UiLocales":null,"Nonce":"d97ec6c5eda24babba3dd7d443490109","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"0738abf3d77a46d7834e60ff9edb4fe4","nonce":"d97ec6c5eda24babba3dd7d443490109","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:10:09.261 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:10:09.262 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:10:09.262 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:10:09.262 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:10:09.271 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:10:09.272 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:10:09.276 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ahqg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ikwA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000015","TimeStamp":"2019-06-25T11:10:09.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:10:09.280 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"0738abf3d77a46d7834e60ff9edb4fe4","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:10:09.354 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:10:09.358 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:10:09.358 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:10:09.392 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 14:10:09.395 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 14:10:09.396 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 14:10:09.397 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 14:10:09.397 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 14:10:09.398 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 14:10:09.398 +03:00 [DBG] Start userinfo request
2019-06-25 14:10:09.399 +03:00 [DBG] Bearer token found in header
2019-06-25 14:10:09.417 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:10:09.417 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:10:09.435 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:10:09.435 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:10:09.439 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 14:10:09.440 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561461009,"exp":1561461129,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 14:10:09.443 +03:00 [DBG] Creating userinfo response
2019-06-25 14:10:09.443 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:10:09.444 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:10:09.449 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:10:09.450 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 14:10:09.450 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 14:10:09.456 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:10:09.461 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 14:10:09.462 +03:00 [DBG] End userinfo request
2019-06-25 14:11:10.185 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 14:11:10.186 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 14:11:10.187 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 14:11:10.187 +03:00 [DBG] Start authorize request
2019-06-25 14:11:10.187 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:11:10.188 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 14:11:10.204 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 14:11:10.204 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 14:11:10.208 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:11:10.216 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:11:10.220 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 14:11:10.227 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 14:11:10.227 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 14:11:10.228 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"51e92e6d094649a784d7763159835fe1","UiLocales":null,"Nonce":"af5c23ae9c15482cb5f10f186fb8ebcc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/silent-refresh.html","response_type":"id_token token","scope":"openid profile email  monitoring","state":"51e92e6d094649a784d7763159835fe1","nonce":"af5c23ae9c15482cb5f10f186fb8ebcc","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 14:11:10.232 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 14:11:10.233 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 14:11:10.233 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 14:11:10.233 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 14:11:10.240 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 14:11:10.240 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 14:11:10.243 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****rZrg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****y3sg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EENL:00000016","TimeStamp":"2019-06-25T11:11:10.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 14:11:10.246 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/silent-refresh.html","State":"51e92e6d094649a784d7763159835fe1","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 14:21:13.003 +03:00 [INF] Removing 0 grants
2019-06-25 15:10:20.000 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 15:10:20.004 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 15:10:20.005 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 15:10:20.006 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 15:10:20.016 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 15:10:20.017 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 15:10:20.017 +03:00 [DBG] Start discovery request
2019-06-25 15:10:20.038 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 15:10:20.074 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 15:10:20.075 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 15:10:20.076 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 15:10:20.076 +03:00 [DBG] Start authorize request
2019-06-25 15:10:20.077 +03:00 [DBG] User in authorize request: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 15:10:20.077 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 15:10:20.107 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:10:20.107 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:10:20.115 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:10:20.128 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:10:20.134 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:10:20.144 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:10:20.145 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 15:10:20.146 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"9c15976f1ce64b959858f4c18984fe6c","UiLocales":null,"Nonce":"de85db83cb164471b17371165a1f44c8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"63d52f911a24b7f30f0f6c211e23c5d6","Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"9c15976f1ce64b959858f4c18984fe6c","nonce":"de85db83cb164471b17371165a1f44c8"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 15:10:20.148 +03:00 [DBG] Client is configured to not require consent, no consent is required
2019-06-25 15:10:20.149 +03:00 [DBG] Creating Implicit Flow response.
2019-06-25 15:10:20.149 +03:00 [DBG] Getting claims for access token for client: promanage_spa
2019-06-25 15:10:20.149 +03:00 [DBG] Getting claims for access token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09
2019-06-25 15:10:20.157 +03:00 [DBG] Getting claims for identity token for subject: b526d429-b810-43c0-a866-8b7ee6ef5c09 and client: promanage_spa
2019-06-25 15:10:20.157 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-25 15:10:20.161 +03:00 [INF] {"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","Endpoint":"Authorize","SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","Scopes":"openid profile email monitoring","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****6QIA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Bn3A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNPARI2EEO1:00000001","TimeStamp":"2019-06-25T12:10:20.0000000Z","ProcessId":20032,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-25 15:10:20.175 +03:00 [INF] Authorize endpoint response
{"SubjectId":"b526d429-b810-43c0-a866-8b7ee6ef5c09","ClientId":"promanage_spa","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","State":"9c15976f1ce64b959858f4c18984fe6c","Scope":"openid profile email monitoring","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-25 15:10:28.110 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 15:10:28.114 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 15:10:28.115 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 15:10:28.116 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 15:10:28.116 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 15:10:28.117 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 15:10:28.118 +03:00 [DBG] Start discovery request
2019-06-25 15:10:28.135 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 15:10:28.437 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://local.promanage-cloud.com:12101
2019-06-25 15:10:28.440 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 15:10:28.441 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 15:10:28.441 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-25 15:10:28.443 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-25 15:10:28.444 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-25 15:10:28.445 +03:00 [DBG] Start key discovery request
2019-06-25 15:10:28.499 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 15:10:28.502 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 15:10:28.502 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 15:10:28.509 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://local.promanage-cloud.com:12101
2019-06-25 15:10:28.516 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 15:10:28.517 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 15:10:28.518 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-25 15:10:28.519 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-25 15:10:28.519 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-25 15:10:28.520 +03:00 [DBG] Start userinfo request
2019-06-25 15:10:28.520 +03:00 [DBG] Bearer token found in header
2019-06-25 15:10:28.542 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:10:28.542 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:10:28.561 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:10:28.562 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:10:28.567 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-25 15:10:28.569 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561464620,"exp":1561464740,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","monitoring"],"client_id":"promanage_spa","sub":"b526d429-b810-43c0-a866-8b7ee6ef5c09","auth_time":1561442631,"idp":"local","scope":["openid","profile","email","monitoring"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-25 15:10:28.571 +03:00 [DBG] Creating userinfo response
2019-06-25 15:10:28.571 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 15:10:28.572 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 15:10:28.578 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:10:28.579 +03:00 [DBG] Requested claim types: sub website picture updated_at locale preferred_username middle_name given_name family_name name nickname gender birthdate zoneinfo profile email_verified email
2019-06-25 15:10:28.579 +03:00 [DBG] Scopes in access token: openid profile email monitoring
2019-06-25 15:10:28.584 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:10:28.591 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2019-06-25 15:10:28.592 +03:00 [DBG] End userinfo request
2019-06-25 15:10:28.627 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-06-25 15:10:28.628 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-06-25 15:10:28.629 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-06-25 15:10:28.629 +03:00 [DBG] Rendering check session result
2019-06-25 15:13:37.032 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 15:13:37.039 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 15:13:37.040 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 15:13:37.042 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 15:13:37.043 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 15:13:37.063 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 15:13:37.063 +03:00 [DBG] Start discovery request
2019-06-25 15:13:37.078 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 15:13:40.077 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 15:13:40.080 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 15:13:40.080 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 15:13:40.081 +03:00 [DBG] Start authorize request
2019-06-25 15:13:40.081 +03:00 [DBG] No user present in authorize request
2019-06-25 15:13:40.082 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 15:13:40.100 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:13:40.101 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:13:40.110 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:13:40.127 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:13:40.134 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:13:40.144 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:13:40.150 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 15:13:40.150 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"40c8a0eab4db43b581fb404deb266701","UiLocales":null,"Nonce":"b20c0c4cd71941d9a637844d5386f757","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"40c8a0eab4db43b581fb404deb266701","nonce":"b20c0c4cd71941d9a637844d5386f757"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 15:13:40.155 +03:00 [INF] Showing login: User is not authenticated
2019-06-25 15:13:40.215 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 15:13:40.233 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:13:40.234 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:13:40.242 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:13:40.257 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:13:40.263 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:13:40.274 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:13:40.275 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 15:13:40.295 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:13:40.296 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:21:10.138 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 15:21:10.143 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 15:21:10.144 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 15:21:10.145 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 15:21:10.146 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 15:21:10.147 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 15:21:10.147 +03:00 [DBG] Start discovery request
2019-06-25 15:21:10.162 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 15:21:10.190 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 15:21:10.191 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 15:21:10.192 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 15:21:10.193 +03:00 [DBG] Start authorize request
2019-06-25 15:21:10.193 +03:00 [DBG] No user present in authorize request
2019-06-25 15:21:10.193 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 15:21:10.214 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:21:10.214 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:21:10.221 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:21:10.231 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:21:10.239 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:21:10.252 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:21:10.253 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 15:21:10.253 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"62c0a10bdd5d4dbeb1327f1f96c900b4","UiLocales":null,"Nonce":"563b90a38e8f425c82f8644f74819c3d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"62c0a10bdd5d4dbeb1327f1f96c900b4","nonce":"563b90a38e8f425c82f8644f74819c3d"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 15:21:10.264 +03:00 [INF] Showing login: User is not authenticated
2019-06-25 15:21:10.270 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 15:21:10.285 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:21:10.286 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:21:10.291 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:21:10.305 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:21:10.311 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:21:10.320 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:21:10.320 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 15:21:10.335 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:21:10.335 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:21:13.040 +03:00 [INF] Removing 0 grants
2019-06-25 15:23:40.790 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://local.promanage-cloud.com:12101
2019-06-25 15:23:40.794 +03:00 [DBG] Origin http://local.promanage-cloud.com:12101 is allowed: true
2019-06-25 15:23:40.794 +03:00 [DBG] CorsPolicyService allowed origin: http://local.promanage-cloud.com:12101
2019-06-25 15:23:40.795 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-25 15:23:40.795 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-25 15:23:40.796 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-25 15:23:40.796 +03:00 [DBG] Start discovery request
2019-06-25 15:23:40.812 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-25 15:23:40.894 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-25 15:23:40.895 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-25 15:23:40.896 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-25 15:23:40.896 +03:00 [DBG] Start authorize request
2019-06-25 15:23:40.897 +03:00 [DBG] No user present in authorize request
2019-06-25 15:23:40.897 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 15:23:40.914 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:23:40.915 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:23:40.920 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:23:40.942 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:23:40.949 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:23:40.959 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:23:40.960 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 15:23:40.961 +03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"promanage_spa","ClientName":"ProManage SPA","RedirectUri":"http://local.promanage-cloud.com:12101/#/auth-callback#","AllowedRedirectUris":["http://local.promanage-cloud.com:12101/silent-refresh.html","http://local.promanage-cloud.com:12101/#/auth-callback#"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email monitoring","State":"3fde95b553c24d0e9a26cf65a8e057bc","UiLocales":null,"Nonce":"f0cb7760aef3420d878f92c95a8000e7","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"promanage_spa","redirect_uri":"http://local.promanage-cloud.com:12101/#/auth-callback#","response_type":"id_token token","scope":"openid profile email  monitoring","state":"3fde95b553c24d0e9a26cf65a8e057bc","nonce":"f0cb7760aef3420d878f92c95a8000e7"},"$type":"AuthorizeRequestValidationLog"}
2019-06-25 15:23:40.963 +03:00 [INF] Showing login: User is not authenticated
2019-06-25 15:23:41.062 +03:00 [DBG] Start authorize request protocol validation
2019-06-25 15:23:41.078 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:23:41.078 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 15:23:41.083 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:23:41.093 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:23:41.099 +03:00 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-06-25 15:23:41.110 +03:00 [DBG] Found ["monitoring"] API scopes in database
2019-06-25 15:23:41.110 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-25 15:23:41.124 +03:00 [DBG] promanage_spa found in database: true
2019-06-25 15:23:41.124 +03:00 [DBG] client configuration validation for client promanage_spa succeeded.
2019-06-25 16:21:13.073 +03:00 [INF] Removing 0 grants
2019-06-25 17:21:13.095 +03:00 [INF] Removing 0 grants
2019-06-25 18:21:13.133 +03:00 [INF] Removing 0 grants
2019-06-25 19:21:13.167 +03:00 [INF] Removing 0 grants
2019-06-25 20:21:13.187 +03:00 [INF] Removing 0 grants
2019-06-25 21:21:13.204 +03:00 [INF] Removing 0 grants
2019-06-25 22:21:13.245 +03:00 [INF] Removing 0 grants
2019-06-25 23:21:13.303 +03:00 [INF] Removing 0 grants
2019-06-26 00:21:13.330 +03:00 [INF] Removing 0 grants
2019-06-26 01:21:13.355 +03:00 [INF] Removing 0 grants
2019-06-26 02:21:13.375 +03:00 [INF] Removing 0 grants
2019-06-26 03:21:13.418 +03:00 [INF] Removing 0 grants
2019-06-26 04:21:13.442 +03:00 [INF] Removing 0 grants
2019-06-26 05:21:13.455 +03:00 [INF] Removing 0 grants
2019-06-26 06:21:13.472 +03:00 [INF] Removing 0 grants
2019-06-26 07:21:13.498 +03:00 [INF] Removing 0 grants
2019-06-26 08:21:13.532 +03:00 [INF] Removing 0 grants
2019-06-26 08:54:26.310 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-26 08:54:26.375 +03:00 [DBG] Stopping grant removal
2019-06-27 10:43:01.616 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 10:43:01.809 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 10:43:01.810 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 10:43:01.811 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 10:43:01.811 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 10:43:01.812 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 10:43:01.813 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 10:43:02.027 +03:00 [DBG] Starting grant removal
2019-06-27 10:43:15.393 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 10:43:15.437 +03:00 [DBG] Stopping grant removal
2019-06-27 10:47:39.670 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 10:47:39.853 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 10:47:39.854 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 10:47:39.855 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 10:47:39.855 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 10:47:39.856 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 10:47:39.856 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 10:47:39.945 +03:00 [DBG] Starting grant removal
2019-06-27 10:49:24.864 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 10:49:24.902 +03:00 [DBG] Stopping grant removal
2019-06-27 10:51:21.053 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 10:51:21.233 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 10:51:21.234 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 10:51:21.235 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 10:51:21.236 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 10:51:21.236 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 10:51:21.237 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 10:51:21.330 +03:00 [DBG] Starting grant removal
2019-06-27 10:51:23.764 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 10:51:23.796 +03:00 [DBG] Stopping grant removal
2019-06-27 10:51:33.023 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 10:51:33.275 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 10:51:33.275 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 10:51:33.276 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 10:51:33.277 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 10:51:33.277 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 10:51:33.278 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 10:51:33.366 +03:00 [DBG] Starting grant removal
2019-06-27 10:51:40.664 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 10:51:40.693 +03:00 [DBG] Stopping grant removal
2019-06-27 10:56:08.933 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 10:56:09.100 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 10:56:09.101 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 10:56:09.102 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 10:56:09.102 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 10:56:09.103 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 10:56:09.104 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 10:56:09.192 +03:00 [DBG] Starting grant removal
2019-06-27 10:56:15.330 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 10:56:15.344 +03:00 [DBG] Stopping grant removal
2019-06-27 10:56:22.235 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 10:56:22.403 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 10:56:22.403 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 10:56:22.405 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 10:56:22.405 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 10:56:22.406 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 10:56:22.407 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 10:56:22.496 +03:00 [DBG] Starting grant removal
2019-06-27 10:56:27.849 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 10:56:27.879 +03:00 [DBG] Stopping grant removal
2019-06-27 10:58:16.703 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 10:58:16.868 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 10:58:16.869 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 10:58:16.870 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 10:58:16.870 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 10:58:16.871 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 10:58:16.872 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 10:58:16.961 +03:00 [DBG] Starting grant removal
2019-06-27 10:58:24.622 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 10:58:24.662 +03:00 [DBG] Stopping grant removal
2019-06-27 11:04:07.811 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 11:04:08.000 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 11:04:08.001 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 11:04:08.002 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 11:04:08.002 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 11:04:08.003 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 11:04:08.004 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 11:04:08.097 +03:00 [DBG] Starting grant removal
2019-06-27 11:04:17.998 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 11:04:18.035 +03:00 [DBG] Stopping grant removal
2019-06-27 11:12:01.324 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 11:12:01.491 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 11:12:01.492 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 11:12:01.493 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 11:12:01.494 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 11:12:01.494 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 11:12:01.495 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 11:12:01.590 +03:00 [DBG] Starting grant removal
2019-06-27 11:12:25.302 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 11:12:25.345 +03:00 [DBG] Stopping grant removal
2019-06-27 11:13:35.057 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 11:13:35.238 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 11:13:35.239 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 11:13:35.240 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 11:13:35.242 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 11:13:35.245 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 11:13:35.248 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 11:13:35.437 +03:00 [DBG] Starting grant removal
2019-06-27 11:13:41.036 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 11:13:41.072 +03:00 [DBG] Stopping grant removal
2019-06-27 11:27:09.082 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 11:27:09.345 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 11:27:09.348 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 11:27:09.350 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 11:27:09.352 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 11:27:09.353 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 11:27:09.355 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 11:27:09.599 +03:00 [DBG] Starting grant removal
2019-06-27 11:30:49.126 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 11:30:49.169 +03:00 [DBG] Stopping grant removal
2019-06-27 11:30:55.348 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-06-27 11:30:55.520 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-27 11:30:55.521 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-27 11:30:55.523 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-27 11:30:55.524 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-27 11:30:55.525 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-27 11:30:55.526 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-27 11:30:55.642 +03:00 [DBG] Starting grant removal
2019-06-27 11:31:40.644 +03:00 [DBG] Login Url: /Account/Login
2019-06-27 11:31:40.648 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 11:31:40.648 +03:00 [DBG] Logout Url: /Account/Logout
2019-06-27 11:31:40.650 +03:00 [DBG] ConsentUrl Url: /consent
2019-06-27 11:31:40.650 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 11:31:40.651 +03:00 [DBG] Error Url: /home/error
2019-06-27 11:31:40.651 +03:00 [DBG] Error Id Parameter: errorId
2019-06-27 11:38:55.352 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 11:38:55.372 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 11:38:55.373 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 11:38:55.378 +03:00 [DBG] Start discovery request
2019-06-27 11:38:58.318 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-27 11:40:45.838 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 11:40:45.840 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 11:40:45.841 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 11:40:45.842 +03:00 [DBG] Start discovery request
2019-06-27 11:40:45.874 +03:00 [DBG] Found ["openid","email","profile","monitoring","epc"] as all scopes in database
2019-06-27 11:44:54.018 +03:00 [DBG] TaskCanceledException. Exiting.
2019-06-27 11:44:54.055 +03:00 [DBG] Stopping grant removal
2019-06-27 17:10:10.188 +03:00 [ERR] 2019-06-27 17:10:10.183702 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  OracleException.Number: 12154
2019-06-27 17:10:10.227 +03:00 [ERR] 2019-06-27 17:10:10.227118 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12154: TNS:could not resolve the connect identifier specified ---> OracleInternal.Network.NetworkException (0x00002F7A): ORA-12154: TNS:could not resolve the connect identifier specified
   at OracleInternal.Network.AddressResolution..ctor(String TNSAlias, String instanceName)
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleDatabaseCreator.Exists()
2019-06-27 17:10:20.177 +03:00 [ERR] 2019-06-27 17:10:20.174759 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  OracleException.Number: 12154
2019-06-27 17:10:20.204 +03:00 [ERR] 2019-06-27 17:10:20.204324 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12154: TNS:could not resolve the connect identifier specified ---> OracleInternal.Network.NetworkException (0x00002F7A): ORA-12154: TNS:could not resolve the connect identifier specified
   at OracleInternal.Network.AddressResolution..ctor(String TNSAlias, String instanceName)
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleDatabaseCreator.Exists()
2019-06-27 17:10:29.881 +03:00 [ERR] 2019-06-27 17:10:29.878344 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  OracleException.Number: 12154
2019-06-27 17:10:29.911 +03:00 [ERR] 2019-06-27 17:10:29.911896 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12154: TNS:could not resolve the connect identifier specified ---> OracleInternal.Network.NetworkException (0x00002F7A): ORA-12154: TNS:could not resolve the connect identifier specified
   at OracleInternal.Network.AddressResolution..ctor(String TNSAlias, String instanceName)
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleDatabaseCreator.Exists()
2019-06-27 17:29:17.869 +03:00 [ERR] 2019-06-27 17:29:17.866099 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  OracleException.Number: -1000
2019-06-27 17:29:17.895 +03:00 [ERR] 2019-06-27 17:29:17.894957 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  Oracle.ManagedDataAccess.Client.OracleException (0x80004005): Connection request timed out
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleDatabaseCreator.Exists()
2019-06-27 17:29:38.601 +03:00 [ERR] 2019-06-27 17:29:38.598875 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  OracleException.Number: -1000
2019-06-27 17:29:38.629 +03:00 [ERR] 2019-06-27 17:29:38.629674 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  Oracle.ManagedDataAccess.Client.OracleException (0x80004005): Connection request timed out
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleDatabaseCreator.Exists()
2019-06-28 12:19:48.372 +03:00 [ERR] 2019-06-28 12:19:48.368315 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  OracleException.Number: 12541
2019-06-28 12:19:48.401 +03:00 [ERR] 2019-06-28 12:19:48.401873 ThreadID:1   (ERROR)   OracleDatabaseCreator.Exists() :  Oracle.ManagedDataAccess.Client.OracleException (0x80004005): ORA-12541: TNS: No listener ---> OracleInternal.Network.NetworkException (0x80004005): ORA-12541: TNS: No listener ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Hedef makine etkin olarak reddettiğinden bağlantı kurulamadı 127.0.0.1:32769
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at OracleInternal.Network.TcpTransportAdapter.ConnectIterate()
   at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor)
   at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, OracleConnection connRefForCriteria, String instanceName)
   at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, OracleConnection connRefForCriteria, String affinityInstanceName, Boolean bForceMatch)
   at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, OracleConnection connRefForCriteria)
   at Oracle.ManagedDataAccess.Client.OracleConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Oracle.EntityFrameworkCore.Storage.Internal.OracleDatabaseCreator.Exists()
2019-07-03 07:48:44.867 +03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-03 07:48:45.149 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-03 07:48:45.149 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-03 07:48:45.150 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-03 07:48:45.150 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-03 07:48:45.151 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-03 07:48:45.151 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-03 07:48:45.321 +03:00 [DBG] Starting grant removal
2019-07-03 07:48:48.462 +03:00 [DBG] TaskCanceledException. Exiting.
2019-07-03 07:48:48.477 +03:00 [DBG] Stopping grant removal
